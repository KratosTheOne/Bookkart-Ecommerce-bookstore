(this["webpackJsonpbook-store-v2"]=this["webpackJsonpbook-store-v2"]||[]).push([[0],{304:function(e,t,a){e.exports=a(551)},393:function(e,t){},395:function(e,t){},405:function(e,t){},407:function(e,t){},434:function(e,t){},436:function(e,t){},437:function(e,t){},443:function(e,t){},445:function(e,t){},463:function(e,t){},466:function(e,t){},482:function(e,t){},485:function(e,t){},510:function(e,t,a){var n={"./amplify-amazon-button_5.entry.js":[557,4],"./amplify-auth-fields_9.entry.js":[558,13],"./amplify-authenticator.entry.js":[559,5],"./amplify-button_3.entry.js":[560,6],"./amplify-checkbox.entry.js":[561,18],"./amplify-confirm-sign-in_8.entry.js":[562,7],"./amplify-container.entry.js":[563,19],"./amplify-federated-buttons_2.entry.js":[564,8],"./amplify-federated-sign-in.entry.js":[565,14],"./amplify-form-field_4.entry.js":[566,20],"./amplify-greetings.entry.js":[567,9],"./amplify-icon-button.entry.js":[568,21],"./amplify-icon.entry.js":[569,15],"./amplify-link.entry.js":[570,22],"./amplify-nav_2.entry.js":[571,10],"./amplify-radio-button_2.entry.js":[572,11],"./amplify-select-mfa-type.entry.js":[573,12],"./amplify-sign-in-button.entry.js":[574,16],"./amplify-tooltip.entry.js":[575,23]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=510,e.exports=r},549:function(e,t,a){},551:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(262),l=a.n(c),o=a(13),i=a.n(o),u=a(6),s=a(40),m=a(16),p=a(261),d=a(550),f=a(610),b=r.a.createContext(),E=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],o=c[1],E=Object(n.useState)([]),h=Object(m.a)(E,2),k=h[0],v=h[1],j=Object(n.useState)(!1),O=Object(m.a)(j,2),y=O[0],g=O[1];Object(n.useEffect)((function(){N()}),[]);var _=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)({id:Object(f.a)()},t),e.prev=1,e.next=4,p.a.graphql(Object(d.b)("\n  mutation ProcessOrder($input: ProcessOrderInput!) {\n    processOrder(input: $input)\n  }\n",{input:a}));case 4:console.log("Order is successful"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,p.a.graphql({query:"\n  query ListBooks(\n    $filter: ModelBookFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listBooks(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        title\n        description\n        image\n        author\n        featured\n        price\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",authMode:"API_KEY"});case 4:t=e.sent,a=t.data,n=a.listBooks.items,r=n.filter((function(e){return!!e.featured})),o(n),v(r),g(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{books:l,featured:k,loading:y,checkout:_}},t)},h=a(9),k=a(43),v=a(93),j=function(){return r.a.createElement("section",{className:"hero"},r.a.createElement("h2",null,"Wisdom Books"),r.a.createElement("h3",null,"A room without books is like a ",r.a.createElement("br",null),"body without a soul"),r.a.createElement(h.b,{className:"btn",to:"/books"},"View All Books"))},O=function(){var e=Object(n.useContext)(b).featured;return e.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement("section",{className:"featured"},r.a.createElement("header",{className:"featured-head"},r.a.createElement("h3",null,"Featured Collection")),r.a.createElement("div",{className:"books featured-list"},e.map((function(e){var t=e.id,a=e.image,n=e.title;return r.a.createElement("article",{key:t,className:"book featured-book"},r.a.createElement("div",{className:"book-image"},r.a.createElement("img",{src:a,alt:n})),r.a.createElement(h.b,{to:"books/".concat(t),className:"btn book-link"},"details"))}))))):r.a.createElement("h3",null,"No Featured Books")},y=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Oops. Error Page"))},g=function(){var e=Object(n.useContext)(b).books;return e.length?r.a.createElement("section",{className:"books"},e.map((function(e){var t=e.image,a=e.id,n=e.title;return r.a.createElement("article",{key:a,className:"book"},r.a.createElement("div",{className:"book-image"},r.a.createElement("img",{src:t,alt:n})),r.a.createElement(h.b,{to:"books/".concat(a),className:"btn book-link"},"details"))}))):r.a.createElement("h3",null,"No Books Available")},_=a(51),N=r.a.createContext(),w=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(0),s=Object(m.a)(i,2),p=s[0],d=s[1];Object(n.useEffect)((function(){var e=Object(_.a)(l).reduce((function(e,t){return e+t.amount*t.price}),0);d(parseFloat(e.toFixed(2)))}),[l]);var f=function(e){var t=Object(_.a)(l).map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{amount:t.amount+1}):t}));o(t)};return r.a.createElement(N.Provider,{value:{cart:l,total:p,addToCart:function(e){var t=e.id,a=e.title,n=e.price,r=e.image;if(Object(_.a)(l).find((function(e){return e.id===t})))f(t);else{var c=[].concat(Object(_.a)(l),[{id:t,title:a,image:r,price:n,amount:1}]);o(c)}},increaseAmount:f,decreaseAmount:function(e,t){var a=[];a=1===t?Object(_.a)(l).filter((function(t){return t.id!==e})):Object(_.a)(l).map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{amount:t.amount-1}):t})),o(a)},clearCart:function(){o([])}}},t)},x=a(99),C=function(){var e=Object(k.f)(),t=Object(n.useContext)(N),a=t.cart,c=t.total,l=t.increaseAmount,o=t.decreaseAmount;return a.length?r.a.createElement("section",{className:"cart"},r.a.createElement("header",null,r.a.createElement("h2",null,"My Cart")),r.a.createElement("div",{className:"cart-wrapper"},a.map((function(e){var t=e.id,a=e.title,n=e.price,c=e.image,i=e.amount;return r.a.createElement("article",{key:t,className:"cart-item"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:c,alt:"cart item"})),r.a.createElement("div",{className:"details"},r.a.createElement("p",null,a),r.a.createElement("p",null,"$ ",n)),r.a.createElement("div",{className:"amount"},r.a.createElement("button",{onClick:function(){return l(t)}},r.a.createElement(x.b,null)),r.a.createElement("p",null,i),r.a.createElement("button",{onClick:function(){return o(t,i)}},r.a.createElement(x.a,null))))}))),r.a.createElement("div",null,r.a.createElement("h3",null,"Total: $ ",c)),r.a.createElement("div",null,r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/checkout")}},"Checkout"))):r.a.createElement("h3",null,"Empty Cart")},S=a(609),A=a(281),T=a(50),F={style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},$=function(){var e=Object(n.useContext)(N),t=e.cart,a=e.total,c=(e.clearCart,Object(n.useContext)(b).checkout),l=Object(n.useState)({cart:t,total:a,address:null,token:null}),o=Object(m.a)(l,2),p=o[0],d=o[1],f=Object(n.useState)(null),E=Object(m.a)(f,2),h=E[0],v=E[1],j=Object(T.useStripe)(),O=Object(T.useElements)();Object(k.f)();Object(n.useEffect)((function(){p.token&&c(p)}),[c,p]);var y=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=O.getElement(T.CardElement),e.next=4,j.createToken(a);case 4:(n=e.sent).error?v(n.error.message):(v(null),r=n.token,d(Object(u.a)(Object(u.a)({},p),{},{token:r.id})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:y},r.a.createElement("div",{className:"checkout-form"},r.a.createElement("label",{htmlFor:"checkout-address"},"Shipping Address"),r.a.createElement("input",{id:"checkout-address",type:"text",onChange:function(e){return d(Object(u.a)(Object(u.a)({},p),{},{address:e.target.value}))}}),r.a.createElement("div",{className:"stripe-section"},r.a.createElement("label",{htmlFor:"stripe-element"}," Credit or debit card "),r.a.createElement(T.CardElement,{id:"stripe-element",options:F,onChange:function(e){e.error?v(e.error.message):v(null)}})),r.a.createElement("div",{className:"card-errors",role:"alert"},h)),r.a.createElement("button",{type:"submit",className:"btn"},"Submit Payment"))},B=function(){var e=Object(A.a)("pk_test_51ItDIhSHzNjZoxy2a3aKIF3QwvvCrJ4jd7t4KIDd1zDDwd69Ixy4fGP98rE8WnuZk7zZQ9eKod3ttE53CokaTksk00Jbn97Vzc");return r.a.createElement("section",{className:"checkout-wrapper"},r.a.createElement(S.a,null,r.a.createElement(T.Elements,{stripe:e},r.a.createElement("section",null,r.a.createElement("h2",null,"Time to Checkout?"),r.a.createElement($,null)))))},q=function(){var e=Object(k.g)().id,t=Object(k.f)(),a=Object(n.useContext)(b).books,c=Object(n.useContext)(N).addToCart,l=a.find((function(t){return t.id===e}));if(!l)return r.a.createElement("h3",null,"Loading...");var o=l.image,i=l.title,s=l.description,m=l.author,p=l.price;return r.a.createElement("section",{className:"book-details"},r.a.createElement("div",{className:"detail-image"},r.a.createElement("img",{src:o,alt:"10x Rule"})),r.a.createElement("div",{className:"detail-description"},r.a.createElement("h2",null,i),r.a.createElement("p",null,s),r.a.createElement("h3",null,m),r.a.createElement("h4",null,"Price - $ ",p),r.a.createElement("button",{className:"btn",onClick:function(){c(Object(u.a)(Object(u.a)({},l),{},{id:e})),t.push("/cart")}},"Add to Cart")))},I=a(131),P={aws_project_region:"us-east-2",aws_cognito_identity_pool_id:"us-east-2:9e122a9e-257b-4726-9bb1-f51843a97f28",aws_cognito_region:"us-east-2",aws_user_pools_id:"us-east-2_FwTkAxkjW",aws_user_pools_web_client_id:"36dpfrf4amsf6a2sj78lusrret",oauth:{},aws_user_files_s3_bucket:"bookkartc7ec905d48ab4f019975898315cdfb5f191806-dev",aws_user_files_s3_bucket_region:"us-east-2",aws_appsync_graphqlEndpoint:"https://luegqxacwvb7vfwvhkj5tjb6ru.appsync-api.us-east-2.amazonaws.com/graphql",aws_appsync_region:"us-east-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"da2-b36um6uq5rh3jobebqviwnof2a",aws_content_delivery_bucket:"bookkart-20210521155224-hostingbucket-dev",aws_content_delivery_bucket_region:"us-east-2",aws_content_delivery_url:"http://bookkart-20210521155224-hostingbucket-dev.s3-website.us-east-2.amazonaws.com"},D=P.aws_user_files_s3_bucket_region,z=P.aws_user_files_s3_bucket,M=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({title:"",description:"",image:"",author:"",price:""}),o=Object(m.a)(l,2),b=o[0],E=o[1],h=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,b.title&&b.price){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,p.a.graphql(Object(d.b)("\n  mutation CreateBook(\n    $input: CreateBookInput!\n    $condition: ModelBookConditionInput\n  ) {\n    createBook(input: $input, condition: $condition) {\n      id\n      title\n      description\n      image\n      author\n      featured\n      price\n      orders {\n        items {\n          id\n          book_id\n          order_id\n          createdAt\n          updatedAt\n          customer\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",{input:b}));case 6:E({title:"",description:"",image:"",author:"",price:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error creating todo:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r,l,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.files[0],n=a.name.split(".")[1],r=a.name.split(".")[0],l="images/".concat(Object(f.a)()).concat(r,".").concat(n),o="https://".concat(z,".s3.").concat(D,".amazonaws.com/public/").concat(l),e.prev=6,e.next=9,I.a.put(l,a,{level:"public",contentType:a.type});case 9:return e.next=11,I.a.get(l,{level:"public"});case 11:s=e.sent,c(s),E(Object(u.a)(Object(u.a)({},b),{},{image:o})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"admin-wrapper"},r.a.createElement(S.a,null,r.a.createElement("section",null,r.a.createElement("header",{className:"form-header"},r.a.createElement("h3",null,"Add New Book"),r.a.createElement(S.b,null)),r.a.createElement("form",{className:"form-wrapper",onSubmit:h},r.a.createElement("div",{className:"form-image"},a?r.a.createElement("img",{className:"image-preview",src:a,alt:""}):r.a.createElement("input",{type:"file",accept:"image/jpg",onChange:function(e){return k(e)}})),r.a.createElement("div",{className:"form-fields"},r.a.createElement("div",{className:"title-form"},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"title"},"Title")),r.a.createElement("p",null,r.a.createElement("input",{name:"email",type:"title",placeholder:"Type the title",onChange:function(e){return E(Object(u.a)(Object(u.a)({},b),{},{title:e.target.value}))},required:!0}))),r.a.createElement("div",{className:"description-form"},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"description"},"Description")),r.a.createElement("p",null,r.a.createElement("textarea",{name:"description",type:"text",rows:"8",placeholder:"Type the description of the book",onChange:function(e){return E(Object(u.a)(Object(u.a)({},b),{},{description:e.target.value}))},required:!0}))),r.a.createElement("div",{className:"author-form"},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"author"},"Author")),r.a.createElement("p",null,r.a.createElement("input",{name:"author",type:"text",placeholder:"Type the author's name",onChange:function(e){return E(Object(u.a)(Object(u.a)({},b),{},{author:e.target.value}))},required:!0}))),r.a.createElement("div",{className:"price-form"},r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"price"},"Price ($)"),r.a.createElement("input",{name:"price",type:"text",placeholder:"What is the Price of the book (USD)",onChange:function(e){return E(Object(u.a)(Object(u.a)({},b),{},{price:e.target.value}))},required:!0}))),r.a.createElement("div",{className:"featured-form"},r.a.createElement("p",null,r.a.createElement("label",null,"Featured?"),r.a.createElement("input",{type:"checkbox",className:"featured-checkbox",checked:b.featured,onChange:function(){return E(Object(u.a)(Object(u.a)({},b),{},{featured:!b.featured}))}}))),r.a.createElement("div",{className:"submit-form"},r.a.createElement("button",{className:"btn",type:"submit"},"Submit")))))))},K=function(){return r.a.createElement("header",{className:"main-head"},r.a.createElement("nav",null,r.a.createElement("h1",{id:"logo"},"Wisdomly"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(h.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/books"},"Books")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/cart"},"Cart")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/checkout"},"Checkout")))))};v.default.configure(P);var W=function(){return r.a.createElement(h.a,null,r.a.createElement(K,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/"},r.a.createElement(O,null)),r.a.createElement(k.a,{path:"/cart"},r.a.createElement(C,null)),r.a.createElement(k.a,{path:"/checkout"},r.a.createElement(B,null)),r.a.createElement(k.a,{exact:!0,path:"/books"},r.a.createElement(g,null)),r.a.createElement(k.a,{path:"/books/:id",children:r.a.createElement(q,null)}),r.a.createElement(k.a,{path:"/admin"},r.a.createElement(M,null)),r.a.createElement(k.a,{path:"*"},r.a.createElement(y,null))))};a(549);l.a.render(r.a.createElement(E,null,r.a.createElement(w,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)))),document.getElementById("root"))}},[[304,2,3]]]);
//# sourceMappingURL=main.9bdf144c.chunk.js.map