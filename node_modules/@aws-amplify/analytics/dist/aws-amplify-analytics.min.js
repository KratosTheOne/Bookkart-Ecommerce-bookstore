!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@aws-amplify/core"),require("@aws-amplify/cache")):"function"==typeof define&&define.amd?define("aws_amplify_analytics",["@aws-amplify/core","@aws-amplify/cache"],t):"object"==typeof exports?exports.aws_amplify_analytics=t(require("@aws-amplify/core"),require("@aws-amplify/cache")):e.aws_amplify_analytics=t(e["@aws-amplify/core"],e["@aws-amplify/cache"])}(this,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=104)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return f})),n.d(t,"__generator",(function(){return l})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return v})),n.d(t,"__spread",(function(){return _})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return m})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return O})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return S})),n.d(t,"__classPrivateFieldGet",(function(){return j})),n.d(t,"__classPrivateFieldSet",(function(){return A}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function m(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):f(o[0][2],n)}catch(e){f(o[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function f(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function O(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function j(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(54),t),r.__exportStar(n(56),t),r.__exportStar(n(57),t),r.__exportStar(n(58),t),r.__exportStar(n(59),t),r.__exportStar(n(60),t),r.__exportStar(n(61),t),r.__exportStar(n(62),t),r.__exportStar(n(63),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(64),t),r.__exportStar(n(65),t),r.__exportStar(n(66),t)},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(78),i=n(79);t.fromUtf8=function(e){return"function"==typeof TextEncoder?i.fromUtf8(e):r.fromUtf8(e)},t.toUtf8=function(e){return"function"==typeof TextDecoder?i.toUtf8(e):r.toUtf8(e)}},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",c="[object Array]",f="[object Boolean]",l="[object Date]",d="[object Error]",p="[object Function]",h="[object GeneratorFunction]",v="[object Map]",_="[object Number]",g="[object Object]",y="[object RegExp]",m="[object Set]",b="[object String]",w="[object Symbol]",O="[object WeakMap]",E="[object ArrayBuffer]",S="[object DataView]",j="[object Float32Array]",A="[object Float64Array]",I="[object Int8Array]",x="[object Int16Array]",P="[object Int32Array]",k="[object Uint8Array]",M="[object Uint16Array]",C="[object Uint32Array]",R=/\b__p \+= '';/g,T=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,D=/[&<>"']/g,L=RegExp(z.source),N=RegExp(D.source),q=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/[\\^$.*+?()[\]{}|]/g,W=RegExp(V.source),G=/^\s+|\s+$/g,Y=/^\s+/,J=/\s+$/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fe=/($^)/,le=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="[\\ud800-\\udfff]",ve="["+pe+"]",_e="["+de+"]",ge="\\d+",ye="[\\u2700-\\u27bf]",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",be="[^\\ud800-\\udfff"+pe+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",we="\\ud83c[\\udffb-\\udfff]",Oe="[^\\ud800-\\udfff]",Ee="(?:\\ud83c[\\udde6-\\uddff]){2}",Se="[\\ud800-\\udbff][\\udc00-\\udfff]",je="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ae="(?:"+me+"|"+be+")",Ie="(?:"+je+"|"+be+")",xe="(?:"+_e+"|"+we+")"+"?",Pe="[\\ufe0e\\ufe0f]?"+xe+("(?:\\u200d(?:"+[Oe,Ee,Se].join("|")+")[\\ufe0e\\ufe0f]?"+xe+")*"),ke="(?:"+[ye,Ee,Se].join("|")+")"+Pe,Me="(?:"+[Oe+_e+"?",_e,Ee,Se,he].join("|")+")",Ce=RegExp("['’]","g"),Re=RegExp(_e,"g"),Te=RegExp(we+"(?="+we+")|"+Me+Pe,"g"),Ue=RegExp([je+"?"+me+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[ve,je,"$"].join("|")+")",Ie+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[ve,je+Ae,"$"].join("|")+")",je+"?"+Ae+"+(?:['’](?:d|ll|m|re|s|t|ve))?",je+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,ke].join("|"),"g"),ze=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),De=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Le=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ne=-1,qe={};qe[j]=qe[A]=qe[I]=qe[x]=qe[P]=qe[k]=qe["[object Uint8ClampedArray]"]=qe[M]=qe[C]=!0,qe[u]=qe[c]=qe[E]=qe[f]=qe[S]=qe[l]=qe[d]=qe[p]=qe[v]=qe[_]=qe[g]=qe[y]=qe[m]=qe[b]=qe[O]=!1;var He={};He[u]=He[c]=He[E]=He[S]=He[f]=He[l]=He[j]=He[A]=He[I]=He[x]=He[P]=He[v]=He[_]=He[g]=He[y]=He[m]=He[b]=He[w]=He[k]=He["[object Uint8ClampedArray]"]=He[M]=He[C]=!0,He[d]=He[p]=He[O]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fe=parseFloat,$e=parseInt,Ke="object"==typeof e&&e&&e.Object===Object&&e,Ve="object"==typeof self&&self&&self.Object===Object&&self,We=Ke||Ve||Function("return this")(),Ge=t&&!t.nodeType&&t,Ye=Ge&&"object"==typeof r&&r&&!r.nodeType&&r,Je=Ye&&Ye.exports===Ge,Ze=Je&&Ke.process,Xe=function(){try{var e=Ye&&Ye.require&&Ye.require("util").types;return e||Ze&&Ze.binding&&Ze.binding("util")}catch(e){}}(),Qe=Xe&&Xe.isArrayBuffer,et=Xe&&Xe.isDate,tt=Xe&&Xe.isMap,nt=Xe&&Xe.isRegExp,rt=Xe&&Xe.isSet,it=Xe&&Xe.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ft(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function lt(e,t){return!!(null==e?0:e.length)&&wt(e,t,0)>-1}function dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function ht(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function vt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function _t(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function gt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yt=jt("length");function mt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function wt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):bt(e,Et,n)}function Ot(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Et(e){return e!=e}function St(e,t){var n=null==e?0:e.length;return n?xt(e,t)/n:NaN}function jt(e){return function(t){return null==t?void 0:t[e]}}function At(e){return function(t){return null==e?void 0:e[t]}}function It(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function xt(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Pt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function kt(e){return function(t){return e(t)}}function Mt(e,t){return pt(t,(function(t){return e[t]}))}function Ct(e,t){return e.has(t)}function Rt(e,t){for(var n=-1,r=e.length;++n<r&&wt(t,e[n],0)>-1;);return n}function Tt(e,t){for(var n=e.length;n--&&wt(t,e[n],0)>-1;);return n}function Ut(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var zt=At({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Dt=At({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Lt(e){return"\\"+Be[e]}function Nt(e){return ze.test(e)}function qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ht(e,t){return function(n){return e(t(n))}}function Bt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function Ft(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function $t(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Kt(e){return Nt(e)?function(e){var t=Te.lastIndex=0;for(;Te.test(e);)++t;return t}(e):yt(e)}function Vt(e){return Nt(e)?function(e){return e.match(Te)||[]}(e):function(e){return e.split("")}(e)}var Wt=At({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Gt=function e(t){var n,r=(t=null==t?We:Gt.defaults(We.Object(),t,Gt.pick(We,Le))).Array,i=t.Date,de=t.Error,pe=t.Function,he=t.Math,ve=t.Object,_e=t.RegExp,ge=t.String,ye=t.TypeError,me=r.prototype,be=pe.prototype,we=ve.prototype,Oe=t["__core-js_shared__"],Ee=be.toString,Se=we.hasOwnProperty,je=0,Ae=(n=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ie=we.toString,xe=Ee.call(ve),Pe=We._,ke=_e("^"+Ee.call(Se).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=Je?t.Buffer:void 0,Te=t.Symbol,ze=t.Uint8Array,Be=Me?Me.allocUnsafe:void 0,Ke=Ht(ve.getPrototypeOf,ve),Ve=ve.create,Ge=we.propertyIsEnumerable,Ye=me.splice,Ze=Te?Te.isConcatSpreadable:void 0,Xe=Te?Te.iterator:void 0,yt=Te?Te.toStringTag:void 0,At=function(){try{var e=Qi(ve,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yt=t.clearTimeout!==We.clearTimeout&&t.clearTimeout,Jt=i&&i.now!==We.Date.now&&i.now,Zt=t.setTimeout!==We.setTimeout&&t.setTimeout,Xt=he.ceil,Qt=he.floor,en=ve.getOwnPropertySymbols,tn=Me?Me.isBuffer:void 0,nn=t.isFinite,rn=me.join,on=Ht(ve.keys,ve),an=he.max,sn=he.min,un=i.now,cn=t.parseInt,fn=he.random,ln=me.reverse,dn=Qi(t,"DataView"),pn=Qi(t,"Map"),hn=Qi(t,"Promise"),vn=Qi(t,"Set"),_n=Qi(t,"WeakMap"),gn=Qi(ve,"create"),yn=_n&&new _n,mn={},bn=Io(dn),wn=Io(pn),On=Io(hn),En=Io(vn),Sn=Io(_n),jn=Te?Te.prototype:void 0,An=jn?jn.valueOf:void 0,In=jn?jn.toString:void 0;function xn(e){if($a(e)&&!Ra(e)&&!(e instanceof Cn)){if(e instanceof Mn)return e;if(Se.call(e,"__wrapped__"))return xo(e)}return new Mn(e)}var Pn=function(){function e(){}return function(t){if(!Fa(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function kn(){}function Mn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Cn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Un;++t<n;)this.add(e[t])}function Dn(e){var t=this.__data__=new Tn(e);this.size=t.size}function Ln(e,t){var n=Ra(e),r=!n&&Ca(e),i=!n&&!r&&Da(e),o=!n&&!r&&!i&&Xa(e),a=n||r||i||o,s=a?Pt(e.length,ge):[],u=s.length;for(var c in e)!t&&!Se.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ao(c,u))||s.push(c);return s}function Nn(e){var t=e.length;return t?e[zr(0,t-1)]:void 0}function qn(e,t){return So(gi(e),Yn(t,0,e.length))}function Hn(e){return So(gi(e))}function Bn(e,t,n){(void 0!==n&&!Pa(e[t],n)||void 0===n&&!(t in e))&&Wn(e,t,n)}function Fn(e,t,n){var r=e[t];Se.call(e,t)&&Pa(r,n)&&(void 0!==n||t in e)||Wn(e,t,n)}function $n(e,t){for(var n=e.length;n--;)if(Pa(e[n][0],t))return n;return-1}function Kn(e,t,n,r){return er(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Vn(e,t){return e&&yi(t,bs(t),e)}function Wn(e,t,n){"__proto__"==t&&At?At(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Gn(e,t){for(var n=-1,i=t.length,o=r(i),a=null==e;++n<i;)o[n]=a?void 0:vs(e,t[n]);return o}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Jn(e,t,n,r,i,o){var a,s=1&t,c=2&t,d=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!Fa(e))return e;var O=Ra(e);if(O){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Se.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return gi(e,a)}else{var R=no(e),T=R==p||R==h;if(Da(e))return li(e,s);if(R==g||R==u||T&&!i){if(a=c||T?{}:io(e),!s)return c?function(e,t){return yi(e,to(e),t)}(e,function(e,t){return e&&yi(t,ws(t),e)}(a,e)):function(e,t){return yi(e,eo(e),t)}(e,Vn(a,e))}else{if(!He[R])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case E:return di(e);case f:case l:return new r(+e);case S:return function(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case A:case I:case x:case P:case k:case"[object Uint8ClampedArray]":case M:case C:return pi(e,n);case v:return new r;case _:case b:return new r(e);case y:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case m:return new r;case w:return i=e,An?ve(An.call(i)):{}}var i}(e,R,s)}}o||(o=new Dn);var U=o.get(e);if(U)return U;o.set(e,a),Ya(e)?e.forEach((function(r){a.add(Jn(r,t,n,r,e,o))})):Ka(e)&&e.forEach((function(r,i){a.set(i,Jn(r,t,n,i,e,o))}));var z=O?void 0:(d?c?Vi:Ki:c?ws:bs)(e);return st(z||e,(function(r,i){z&&(r=e[i=r]),Fn(a,i,Jn(r,t,n,i,e,o))})),a}function Zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ve(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Xn(e,t,n){if("function"!=typeof e)throw new ye(o);return bo((function(){e.apply(void 0,n)}),t)}function Qn(e,t,n,r){var i=-1,o=lt,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=pt(t,kt(n))),r?(o=dt,a=!1):t.length>=200&&(o=Ct,a=!1,t=new zn(t));e:for(;++i<s;){var f=e[i],l=null==n?f:n(f);if(f=r||0!==f?f:0,a&&l==l){for(var d=c;d--;)if(t[d]===l)continue e;u.push(f)}else o(t,l,r)||u.push(f)}return u}xn.templateSettings={escape:q,evaluate:H,interpolate:B,variable:"",imports:{_:xn}},xn.prototype=kn.prototype,xn.prototype.constructor=xn,Mn.prototype=Pn(kn.prototype),Mn.prototype.constructor=Mn,Cn.prototype=Pn(kn.prototype),Cn.prototype.constructor=Cn,Rn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Rn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Rn.prototype.get=function(e){var t=this.__data__;if(gn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Se.call(t,e)?t[e]:void 0},Rn.prototype.has=function(e){var t=this.__data__;return gn?void 0!==t[e]:Se.call(t,e)},Rn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&void 0===t?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(e){var t=this.__data__,n=$n(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Tn.prototype.get=function(e){var t=this.__data__,n=$n(t,e);return n<0?void 0:t[n][1]},Tn.prototype.has=function(e){return $n(this.__data__,e)>-1},Tn.prototype.set=function(e,t){var n=this.__data__,r=$n(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Un.prototype.clear=function(){this.size=0,this.__data__={hash:new Rn,map:new(pn||Tn),string:new Rn}},Un.prototype.delete=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t},Un.prototype.get=function(e){return Zi(this,e).get(e)},Un.prototype.has=function(e){return Zi(this,e).has(e)},Un.prototype.set=function(e,t){var n=Zi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},zn.prototype.add=zn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},zn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.clear=function(){this.__data__=new Tn,this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dn.prototype.get=function(e){return this.__data__.get(e)},Dn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Tn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Un(r)}return n.set(e,t),this.size=n.size,this};var er=wi(ur),tr=wi(cr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!Za(a):n(a,s)))var s=a,u=o}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function or(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=oo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?or(s,t-1,n,r,i):ht(i,s):r||(i[i.length]=s)}return i}var ar=Oi(),sr=Oi(!0);function ur(e,t){return e&&ar(e,t,bs)}function cr(e,t){return e&&sr(e,t,bs)}function fr(e,t){return ft(t,(function(t){return qa(e[t])}))}function lr(e,t){for(var n=0,r=(t=si(t,e)).length;null!=e&&n<r;)e=e[Ao(t[n++])];return n&&n==r?e:void 0}function dr(e,t,n){var r=t(e);return Ra(e)?r:ht(r,n(e))}function pr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yt&&yt in ve(e)?function(e){var t=Se.call(e,yt),n=e[yt];try{e[yt]=void 0;var r=!0}catch(e){}var i=Ie.call(e);r&&(t?e[yt]=n:delete e[yt]);return i}(e):function(e){return Ie.call(e)}(e)}function hr(e,t){return e>t}function vr(e,t){return null!=e&&Se.call(e,t)}function _r(e,t){return null!=e&&t in ve(e)}function gr(e,t,n){for(var i=n?dt:lt,o=e[0].length,a=e.length,s=a,u=r(a),c=1/0,f=[];s--;){var l=e[s];s&&t&&(l=pt(l,kt(t))),c=sn(l.length,c),u[s]=!n&&(t||o>=120&&l.length>=120)?new zn(s&&l):void 0}l=e[0];var d=-1,p=u[0];e:for(;++d<o&&f.length<c;){var h=l[d],v=t?t(h):h;if(h=n||0!==h?h:0,!(p?Ct(p,v):i(f,v,n))){for(s=a;--s;){var _=u[s];if(!(_?Ct(_,v):i(e[s],v,n)))continue e}p&&p.push(v),f.push(h)}}return f}function yr(e,t,n){var r=null==(e=_o(e,t=si(t,e)))?e:e[Ao(No(t))];return null==r?void 0:ot(r,e,n)}function mr(e){return $a(e)&&pr(e)==u}function br(e,t,n,r,i){return e===t||(null==e||null==t||!$a(e)&&!$a(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Ra(e),s=Ra(t),p=a?c:no(e),h=s?c:no(t),O=(p=p==u?g:p)==g,j=(h=h==u?g:h)==g,A=p==h;if(A&&Da(e)){if(!Da(t))return!1;a=!0,O=!1}if(A&&!O)return o||(o=new Dn),a||Xa(e)?Fi(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case f:case l:case _:return Pa(+e,+t);case d:return e.name==t.name&&e.message==t.message;case y:case b:return e==t+"";case v:var s=qt;case m:var u=1&r;if(s||(s=Ft),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var p=Fi(s(e),s(t),r,i,o,a);return a.delete(e),p;case w:if(An)return An.call(e)==An.call(t)}return!1}(e,t,p,n,r,i,o);if(!(1&n)){var I=O&&Se.call(e,"__wrapped__"),x=j&&Se.call(t,"__wrapped__");if(I||x){var P=I?e.value():e,k=x?t.value():t;return o||(o=new Dn),i(P,k,n,r,o)}}if(!A)return!1;return o||(o=new Dn),function(e,t,n,r,i,o){var a=1&n,s=Ki(e),u=s.length,c=Ki(t).length;if(u!=c&&!a)return!1;var f=u;for(;f--;){var l=s[f];if(!(a?l in t:Se.call(t,l)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var p=!0;o.set(e,t),o.set(t,e);var h=a;for(;++f<u;){l=s[f];var v=e[l],_=t[l];if(r)var g=a?r(_,v,l,t,e,o):r(v,_,l,e,t,o);if(!(void 0===g?v===_||i(v,_,n,r,o):g)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var y=e.constructor,m=t.constructor;y==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o)}(e,t,n,r,br,i))}function wr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=ve(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],f=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var l=new Dn;if(r)var d=r(c,f,u,e,t,l);if(!(void 0===d?br(f,c,3,r,l):d))return!1}}return!0}function Or(e){return!(!Fa(e)||(t=e,Ae&&Ae in t))&&(qa(e)?ke:ae).test(Io(e));var t}function Er(e){return"function"==typeof e?e:null==e?Vs:"object"==typeof e?Ra(e)?Pr(e[0],e[1]):xr(e):tu(e)}function Sr(e){if(!lo(e))return on(e);var t=[];for(var n in ve(e))Se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!Fa(e))return function(e){var t=[];if(null!=e)for(var n in ve(e))t.push(n);return t}(e);var t=lo(e),n=[];for(var r in e)("constructor"!=r||!t&&Se.call(e,r))&&n.push(r);return n}function Ar(e,t){return e<t}function Ir(e,t){var n=-1,i=Ua(e)?r(e.length):[];return er(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function xr(e){var t=Xi(e);return 1==t.length&&t[0][2]?ho(t[0][0],t[0][1]):function(n){return n===e||wr(n,e,t)}}function Pr(e,t){return uo(e)&&po(t)?ho(Ao(e),t):function(n){var r=vs(n,e);return void 0===r&&r===t?_s(n,e):br(t,r,3)}}function kr(e,t,n,r,i){e!==t&&ar(t,(function(o,a){if(i||(i=new Dn),Fa(o))!function(e,t,n,r,i,o,a){var s=yo(e,n),u=yo(t,n),c=a.get(u);if(c)return void Bn(e,n,c);var f=o?o(s,u,n+"",e,t,a):void 0,l=void 0===f;if(l){var d=Ra(u),p=!d&&Da(u),h=!d&&!p&&Xa(u);f=u,d||p||h?Ra(s)?f=s:za(s)?f=gi(s):p?(l=!1,f=li(u,!0)):h?(l=!1,f=pi(u,!0)):f=[]:Wa(u)||Ca(u)?(f=s,Ca(s)?f=as(s):Fa(s)&&!qa(s)||(f=io(u))):l=!1}l&&(a.set(u,f),i(f,u,r,o,a),a.delete(u));Bn(e,n,f)}(e,t,a,n,kr,r,i);else{var s=r?r(yo(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Bn(e,a,s)}}),ws)}function Mr(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:void 0}function Cr(e,t,n){var r=-1;return t=pt(t.length?t:[Vs],kt(Ji())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ir(e,(function(e,n,i){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=hi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function Rr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=lr(e,a);n(s,a)&&Hr(o,si(a,e),s)}return o}function Tr(e,t,n,r){var i=r?Ot:wt,o=-1,a=t.length,s=e;for(e===t&&(t=gi(t)),n&&(s=pt(e,kt(n)));++o<a;)for(var u=0,c=t[o],f=n?n(c):c;(u=i(s,f,u,r))>-1;)s!==e&&Ye.call(s,u,1),Ye.call(e,u,1);return e}function Ur(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ao(i)?Ye.call(e,i,1):Qr(e,i)}}return e}function zr(e,t){return e+Qt(fn()*(t-e+1))}function Dr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function Lr(e,t){return wo(vo(e,t,Vs),e+"")}function Nr(e){return Nn(Ps(e))}function qr(e,t){var n=Ps(e);return So(n,Yn(t,0,n.length))}function Hr(e,t,n,r){if(!Fa(e))return e;for(var i=-1,o=(t=si(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=Ao(t[i]),c=n;if(i!=a){var f=s[u];void 0===(c=r?r(f,u,s):void 0)&&(c=Fa(f)?f:ao(t[i+1])?[]:{})}Fn(s,u,c),s=s[u]}return e}var Br=yn?function(e,t){return yn.set(e,t),e}:Vs,Fr=At?function(e,t){return At(e,"toString",{configurable:!0,enumerable:!1,value:Fs(t),writable:!0})}:Vs;function $r(e){return So(Ps(e))}function Kr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function Vr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Wr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Za(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Gr(e,t,Vs,n)}function Gr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!=t,s=null===t,u=Za(t),c=void 0===t;i<o;){var f=Qt((i+o)/2),l=n(e[f]),d=void 0!==l,p=null===l,h=l==l,v=Za(l);if(a)var _=r||h;else _=c?h&&(r||d):s?h&&d&&(r||!p):u?h&&d&&!p&&(r||!v):!p&&!v&&(r?l<=t:l<t);_?i=f+1:o=f}return sn(o,4294967294)}function Yr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Pa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Jr(e){return"number"==typeof e?e:Za(e)?NaN:+e}function Zr(e){if("string"==typeof e)return e;if(Ra(e))return pt(e,Zr)+"";if(Za(e))return In?In.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Xr(e,t,n){var r=-1,i=lt,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=dt;else if(o>=200){var c=t?null:Di(e);if(c)return Ft(c);a=!1,i=Ct,u=new zn}else u=t?[]:s;e:for(;++r<o;){var f=e[r],l=t?t(f):f;if(f=n||0!==f?f:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue e;t&&u.push(l),s.push(f)}else i(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s}function Qr(e,t){return null==(e=_o(e,t=si(t,e)))||delete e[Ao(No(t))]}function ei(e,t,n,r){return Hr(e,t,n(lr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Kr(e,r?0:o,r?o+1:i):Kr(e,r?o+1:0,r?i:o)}function ni(e,t){var n=e;return n instanceof Cn&&(n=n.value()),vt(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Xr(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=Qn(a[o]||s,e[u],t,n));return Xr(or(a,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}function oi(e){return za(e)?e:[]}function ai(e){return"function"==typeof e?e:Vs}function si(e,t){return Ra(e)?e:uo(e,t)?[e]:jo(ss(e))}var ui=Lr;function ci(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Kr(e,t,n)}var fi=Yt||function(e){return We.clearTimeout(e)};function li(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function di(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function pi(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function hi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Za(e),a=void 0!==t,s=null===t,u=t==t,c=Za(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function vi(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,c=t.length,f=an(a-s,0),l=r(c+f),d=!i;++u<c;)l[u]=t[u];for(;++o<s;)(d||o<a)&&(l[n[o]]=e[o]);for(;f--;)l[u++]=e[o++];return l}function _i(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,c=-1,f=t.length,l=an(a-u,0),d=r(l+f),p=!i;++o<l;)d[o]=e[o];for(var h=o;++c<f;)d[h+c]=t[c];for(;++s<u;)(p||o<a)&&(d[h+n[s]]=e[o++]);return d}function gi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function yi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Wn(n,s,u):Fn(n,s,u)}return n}function mi(e,t){return function(n,r){var i=Ra(n)?at:Kn,o=t?t():{};return i(n,e,Ji(r,2),o)}}function bi(e){return Lr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&so(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=ve(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function wi(e,t){return function(n,r){if(null==n)return n;if(!Ua(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=ve(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Oi(e){return function(t,n,r){for(var i=-1,o=ve(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Ei(e){return function(t){var n=Nt(t=ss(t))?Vt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ci(n,1).join(""):t.slice(1);return r[e]()+i}}function Si(e){return function(t){return vt(qs(Cs(t).replace(Ce,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Pn(e.prototype),r=e.apply(n,t);return Fa(r)?r:n}}function Ai(e){return function(t,n,r){var i=ve(t);if(!Ua(t)){var o=Ji(n,3);t=bs(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function Ii(e){return $i((function(t){var n=t.length,r=n,i=Mn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ye(o);if(i&&!s&&"wrapper"==Gi(a))var s=new Mn([],!0)}for(r=s?r:n;++r<n;){var u=Gi(a=t[r]),c="wrapper"==u?Wi(a):void 0;s=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Gi(c[0])].apply(s,c[3]):1==a.length&&co(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Ra(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function xi(e,t,n,i,o,a,s,u,c,f){var l=128&t,d=1&t,p=2&t,h=24&t,v=512&t,_=p?void 0:ji(e);return function g(){for(var y=arguments.length,m=r(y),b=y;b--;)m[b]=arguments[b];if(h)var w=Yi(g),O=Ut(m,w);if(i&&(m=vi(m,i,o,h)),a&&(m=_i(m,a,s,h)),y-=O,h&&y<f){var E=Bt(m,w);return Ui(e,t,xi,g.placeholder,n,m,E,u,c,f-y)}var S=d?n:this,j=p?S[e]:e;return y=m.length,u?m=go(m,u):v&&y>1&&m.reverse(),l&&c<y&&(m.length=c),this&&this!==We&&this instanceof g&&(j=_||ji(j)),j.apply(S,m)}}function Pi(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function ki(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=Jr(n),r=Jr(r)),i=e(n,r)}return i}}function Mi(e){return $i((function(t){return t=pt(t,kt(Ji())),Lr((function(n){var r=this;return e(t,(function(e){return ot(e,r,n)}))}))}))}function Ci(e,t){var n=(t=void 0===t?" ":Zr(t)).length;if(n<2)return n?Dr(t,e):t;var r=Dr(t,Xt(e/Kt(t)));return Nt(t)?ci(Vt(r),0,e).join(""):r.slice(0,e)}function Ri(e){return function(t,n,i){return i&&"number"!=typeof i&&so(t,n,i)&&(n=i=void 0),t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n,i){for(var o=-1,a=an(Xt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,i=void 0===i?t<n?1:-1:ns(i),e)}}function Ti(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=os(t),n=os(n)),e(t,n)}}function Ui(e,t,n,r,i,o,a,s,u,c){var f=8&t;t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4);var l=[e,t,i,f?o:void 0,f?a:void 0,f?void 0:o,f?void 0:a,s,u,c],d=n.apply(void 0,l);return co(e)&&mo(d,l),d.placeholder=r,Oo(d,e,t)}function zi(e){var t=he[e];return function(e,n){if(e=os(e),(n=null==n?0:sn(rs(n),292))&&nn(e)){var r=(ss(e)+"e").split("e");return+((r=(ss(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Di=vn&&1/Ft(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Zs;function Li(e){return function(t){var n=no(t);return n==v?qt(t):n==m?$t(t):function(e,t){return pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ni(e,t,n,i,s,u,c,f){var l=2&t;if(!l&&"function"!=typeof e)throw new ye(o);var d=i?i.length:0;if(d||(t&=-97,i=s=void 0),c=void 0===c?c:an(rs(c),0),f=void 0===f?f:rs(f),d-=s?s.length:0,64&t){var p=i,h=s;i=s=void 0}var v=l?void 0:Wi(e),_=[e,t,n,i,s,p,h,u,c,f];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?vi(c,u,t[4]):u,e[4]=c?Bt(e[3],a):t[4]}(u=t[5])&&(c=e[5],e[5]=c?_i(c,u,t[6]):u,e[6]=c?Bt(e[5],a):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(_,v),e=_[0],t=_[1],n=_[2],i=_[3],s=_[4],!(f=_[9]=void 0===_[9]?l?0:e.length:an(_[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,n){var i=ji(e);return function o(){for(var a=arguments.length,s=r(a),u=a,c=Yi(o);u--;)s[u]=arguments[u];var f=a<3&&s[0]!==c&&s[a-1]!==c?[]:Bt(s,c);if((a-=f.length)<n)return Ui(e,t,xi,o.placeholder,void 0,s,f,void 0,void 0,n-a);var l=this&&this!==We&&this instanceof o?i:e;return ot(l,this,s)}}(e,t,f):32!=t&&33!=t||s.length?xi.apply(void 0,_):function(e,t,n,i){var o=1&t,a=ji(e);return function t(){for(var s=-1,u=arguments.length,c=-1,f=i.length,l=r(f+u),d=this&&this!==We&&this instanceof t?a:e;++c<f;)l[c]=i[c];for(;u--;)l[c++]=arguments[++s];return ot(d,o?n:this,l)}}(e,t,n,i);else var g=function(e,t,n){var r=1&t,i=ji(e);return function t(){var o=this&&this!==We&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return Oo((v?Br:mo)(g,_),e,t)}function qi(e,t,n,r){return void 0===e||Pa(e,we[n])&&!Se.call(r,n)?t:e}function Hi(e,t,n,r,i,o){return Fa(e)&&Fa(t)&&(o.set(t,e),kr(e,t,void 0,Hi,o),o.delete(t)),e}function Bi(e){return Wa(e)?void 0:e}function Fi(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var f=-1,l=!0,d=2&n?new zn:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],h=t[f];if(r)var v=a?r(h,p,f,t,e,o):r(p,h,f,e,t,o);if(void 0!==v){if(v)continue;l=!1;break}if(d){if(!gt(t,(function(e,t){if(!Ct(d,t)&&(p===e||i(p,e,n,r,o)))return d.push(t)}))){l=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function $i(e){return wo(vo(e,void 0,To),e+"")}function Ki(e){return dr(e,bs,eo)}function Vi(e){return dr(e,ws,to)}var Wi=yn?function(e){return yn.get(e)}:Zs;function Gi(e){for(var t=e.name+"",n=mn[t],r=Se.call(mn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Yi(e){return(Se.call(xn,"placeholder")?xn:e).placeholder}function Ji(){var e=xn.iteratee||Ws;return e=e===Ws?Er:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Xi(e){for(var t=bs(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,po(i)]}return t}function Qi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Or(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=ve(e),ft(en(e),(function(t){return Ge.call(e,t)})))}:iu,to=en?function(e){for(var t=[];e;)ht(t,eo(e)),e=Ke(e);return t}:iu,no=pr;function ro(e,t,n){for(var r=-1,i=(t=si(t,e)).length,o=!1;++r<i;){var a=Ao(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ba(i)&&ao(a,i)&&(Ra(e)||Ca(e))}function io(e){return"function"!=typeof e.constructor||lo(e)?{}:Pn(Ke(e))}function oo(e){return Ra(e)||Ca(e)||!!(Ze&&e&&e[Ze])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,n){if(!Fa(n))return!1;var r=typeof t;return!!("number"==r?Ua(n)&&ao(t,n.length):"string"==r&&t in n)&&Pa(n[t],e)}function uo(e,t){if(Ra(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Za(e))||($.test(e)||!F.test(e)||null!=t&&e in ve(t))}function co(e){var t=Gi(e),n=xn[t];if("function"!=typeof n||!(t in Cn.prototype))return!1;if(e===n)return!0;var r=Wi(n);return!!r&&e===r[0]}(dn&&no(new dn(new ArrayBuffer(1)))!=S||pn&&no(new pn)!=v||hn&&"[object Promise]"!=no(hn.resolve())||vn&&no(new vn)!=m||_n&&no(new _n)!=O)&&(no=function(e){var t=pr(e),n=t==g?e.constructor:void 0,r=n?Io(n):"";if(r)switch(r){case bn:return S;case wn:return v;case On:return"[object Promise]";case En:return m;case Sn:return O}return t});var fo=Oe?qa:ou;function lo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||we)}function po(e){return e==e&&!Fa(e)}function ho(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ve(n)))}}function vo(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=an(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),ot(e,this,u)}}function _o(e,t){return t.length<2?e:lr(e,Kr(t,0,-1))}function go(e,t){for(var n=e.length,r=sn(t.length,n),i=gi(e);r--;){var o=t[r];e[r]=ao(o,n)?i[o]:void 0}return e}function yo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var mo=Eo(Br),bo=Zt||function(e,t){return We.setTimeout(e,t)},wo=Eo(Fr);function Oo(e,t,n){var r=t+"";return wo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Z,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!lt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(X);return t?t[1].split(Q):[]}(r),n)))}function Eo(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function So(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=zr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var jo=function(e){var t=Ea(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(K,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function Ao(e){if("string"==typeof e||Za(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Io(e){if(null!=e){try{return Ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function xo(e){if(e instanceof Cn)return e.clone();var t=new Mn(e.__wrapped__,e.__chain__);return t.__actions__=gi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Po=Lr((function(e,t){return za(e)?Qn(e,or(t,1,za,!0)):[]})),ko=Lr((function(e,t){var n=No(t);return za(n)&&(n=void 0),za(e)?Qn(e,or(t,1,za,!0),Ji(n,2)):[]})),Mo=Lr((function(e,t){var n=No(t);return za(n)&&(n=void 0),za(e)?Qn(e,or(t,1,za,!0),void 0,n):[]}));function Co(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=an(r+i,0)),bt(e,Ji(t,3),i)}function Ro(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=rs(n),i=n<0?an(r+i,0):sn(i,r-1)),bt(e,Ji(t,3),i,!0)}function To(e){return(null==e?0:e.length)?or(e,1):[]}function Uo(e){return e&&e.length?e[0]:void 0}var zo=Lr((function(e){var t=pt(e,oi);return t.length&&t[0]===e[0]?gr(t):[]})),Do=Lr((function(e){var t=No(e),n=pt(e,oi);return t===No(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?gr(n,Ji(t,2)):[]})),Lo=Lr((function(e){var t=No(e),n=pt(e,oi);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?gr(n,void 0,t):[]}));function No(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var qo=Lr(Ho);function Ho(e,t){return e&&e.length&&t&&t.length?Tr(e,t):e}var Bo=$i((function(e,t){var n=null==e?0:e.length,r=Gn(e,t);return Ur(e,pt(t,(function(e){return ao(e,n)?+e:e})).sort(hi)),r}));function Fo(e){return null==e?e:ln.call(e)}var $o=Lr((function(e){return Xr(or(e,1,za,!0))})),Ko=Lr((function(e){var t=No(e);return za(t)&&(t=void 0),Xr(or(e,1,za,!0),Ji(t,2))})),Vo=Lr((function(e){var t=No(e);return t="function"==typeof t?t:void 0,Xr(or(e,1,za,!0),void 0,t)}));function Wo(e){if(!e||!e.length)return[];var t=0;return e=ft(e,(function(e){if(za(e))return t=an(e.length,t),!0})),Pt(t,(function(t){return pt(e,jt(t))}))}function Go(e,t){if(!e||!e.length)return[];var n=Wo(e);return null==t?n:pt(n,(function(e){return ot(t,void 0,e)}))}var Yo=Lr((function(e,t){return za(e)?Qn(e,t):[]})),Jo=Lr((function(e){return ri(ft(e,za))})),Zo=Lr((function(e){var t=No(e);return za(t)&&(t=void 0),ri(ft(e,za),Ji(t,2))})),Xo=Lr((function(e){var t=No(e);return t="function"==typeof t?t:void 0,ri(ft(e,za),void 0,t)})),Qo=Lr(Wo);var ea=Lr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Go(e,n)}));function ta(e){var t=xn(e);return t.__chain__=!0,t}function na(e,t){return t(e)}var ra=$i((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Gn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Cn&&ao(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:na,args:[i],thisArg:void 0}),new Mn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ia=mi((function(e,t,n){Se.call(e,n)?++e[n]:Wn(e,n,1)}));var oa=Ai(Co),aa=Ai(Ro);function sa(e,t){return(Ra(e)?st:er)(e,Ji(t,3))}function ua(e,t){return(Ra(e)?ut:tr)(e,Ji(t,3))}var ca=mi((function(e,t,n){Se.call(e,n)?e[n].push(t):Wn(e,n,[t])}));var fa=Lr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ua(e)?r(e.length):[];return er(e,(function(e){a[++i]=o?ot(t,e,n):yr(e,t,n)})),a})),la=mi((function(e,t,n){Wn(e,n,t)}));function da(e,t){return(Ra(e)?pt:Ir)(e,Ji(t,3))}var pa=mi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ha=Lr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&so(e,t[0],t[1])?t=[]:n>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),Cr(e,or(t,1),[])})),va=Jt||function(){return We.Date.now()};function _a(e,t,n){return t=n?void 0:t,Ni(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ga(e,t){var n;if("function"!=typeof t)throw new ye(o);return e=rs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ya=Lr((function(e,t,n){var r=1;if(n.length){var i=Bt(n,Yi(ya));r|=32}return Ni(e,r,t,n,i)})),ma=Lr((function(e,t,n){var r=3;if(n.length){var i=Bt(n,Yi(ma));r|=32}return Ni(t,r,e,n,i)}));function ba(e,t,n){var r,i,a,s,u,c,f=0,l=!1,d=!1,p=!0;if("function"!=typeof e)throw new ye(o);function h(t){var n=r,o=i;return r=i=void 0,f=t,s=e.apply(o,n)}function v(e){return f=e,u=bo(g,t),l?h(e):s}function _(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-f>=a}function g(){var e=va();if(_(e))return y(e);u=bo(g,function(e){var n=t-(e-c);return d?sn(n,a-(e-f)):n}(e))}function y(e){return u=void 0,p&&r?h(e):(r=i=void 0,s)}function m(){var e=va(),n=_(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return v(c);if(d)return fi(u),u=bo(g,t),h(c)}return void 0===u&&(u=bo(g,t)),s}return t=os(t)||0,Fa(n)&&(l=!!n.leading,a=(d="maxWait"in n)?an(os(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),m.cancel=function(){void 0!==u&&fi(u),f=0,r=c=i=u=void 0},m.flush=function(){return void 0===u?s:y(va())},m}var wa=Lr((function(e,t){return Xn(e,1,t)})),Oa=Lr((function(e,t,n){return Xn(e,os(t)||0,n)}));function Ea(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ea.Cache||Un),n}function Sa(e){if("function"!=typeof e)throw new ye(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ea.Cache=Un;var ja=ui((function(e,t){var n=(t=1==t.length&&Ra(t[0])?pt(t[0],kt(Ji())):pt(or(t,1),kt(Ji()))).length;return Lr((function(r){for(var i=-1,o=sn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ot(e,this,r)}))})),Aa=Lr((function(e,t){return Ni(e,32,void 0,t,Bt(t,Yi(Aa)))})),Ia=Lr((function(e,t){return Ni(e,64,void 0,t,Bt(t,Yi(Ia)))})),xa=$i((function(e,t){return Ni(e,256,void 0,void 0,void 0,t)}));function Pa(e,t){return e===t||e!=e&&t!=t}var ka=Ti(hr),Ma=Ti((function(e,t){return e>=t})),Ca=mr(function(){return arguments}())?mr:function(e){return $a(e)&&Se.call(e,"callee")&&!Ge.call(e,"callee")},Ra=r.isArray,Ta=Qe?kt(Qe):function(e){return $a(e)&&pr(e)==E};function Ua(e){return null!=e&&Ba(e.length)&&!qa(e)}function za(e){return $a(e)&&Ua(e)}var Da=tn||ou,La=et?kt(et):function(e){return $a(e)&&pr(e)==l};function Na(e){if(!$a(e))return!1;var t=pr(e);return t==d||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Wa(e)}function qa(e){if(!Fa(e))return!1;var t=pr(e);return t==p||t==h||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ha(e){return"number"==typeof e&&e==rs(e)}function Ba(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Fa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $a(e){return null!=e&&"object"==typeof e}var Ka=tt?kt(tt):function(e){return $a(e)&&no(e)==v};function Va(e){return"number"==typeof e||$a(e)&&pr(e)==_}function Wa(e){if(!$a(e)||pr(e)!=g)return!1;var t=Ke(e);if(null===t)return!0;var n=Se.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ee.call(n)==xe}var Ga=nt?kt(nt):function(e){return $a(e)&&pr(e)==y};var Ya=rt?kt(rt):function(e){return $a(e)&&no(e)==m};function Ja(e){return"string"==typeof e||!Ra(e)&&$a(e)&&pr(e)==b}function Za(e){return"symbol"==typeof e||$a(e)&&pr(e)==w}var Xa=it?kt(it):function(e){return $a(e)&&Ba(e.length)&&!!qe[pr(e)]};var Qa=Ti(Ar),es=Ti((function(e,t){return e<=t}));function ts(e){if(!e)return[];if(Ua(e))return Ja(e)?Vt(e):gi(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=no(e);return(t==v?qt:t==m?Ft:Ps)(e)}function ns(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function rs(e){var t=ns(e),n=t%1;return t==t?n?t-n:t:0}function is(e){return e?Yn(rs(e),0,4294967295):0}function os(e){if("number"==typeof e)return e;if(Za(e))return NaN;if(Fa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Fa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(G,"");var n=oe.test(e);return n||se.test(e)?$e(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function as(e){return yi(e,ws(e))}function ss(e){return null==e?"":Zr(e)}var us=bi((function(e,t){if(lo(t)||Ua(t))yi(t,bs(t),e);else for(var n in t)Se.call(t,n)&&Fn(e,n,t[n])})),cs=bi((function(e,t){yi(t,ws(t),e)})),fs=bi((function(e,t,n,r){yi(t,ws(t),e,r)})),ls=bi((function(e,t,n,r){yi(t,bs(t),e,r)})),ds=$i(Gn);var ps=Lr((function(e,t){e=ve(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&so(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=ws(o),s=-1,u=a.length;++s<u;){var c=a[s],f=e[c];(void 0===f||Pa(f,we[c])&&!Se.call(e,c))&&(e[c]=o[c])}return e})),hs=Lr((function(e){return e.push(void 0,Hi),ot(Es,void 0,e)}));function vs(e,t,n){var r=null==e?void 0:lr(e,t);return void 0===r?n:r}function _s(e,t){return null!=e&&ro(e,t,_r)}var gs=Pi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),e[t]=n}),Fs(Vs)),ys=Pi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),Se.call(e,t)?e[t].push(n):e[t]=[n]}),Ji),ms=Lr(yr);function bs(e){return Ua(e)?Ln(e):Sr(e)}function ws(e){return Ua(e)?Ln(e,!0):jr(e)}var Os=bi((function(e,t,n){kr(e,t,n)})),Es=bi((function(e,t,n,r){kr(e,t,n,r)})),Ss=$i((function(e,t){var n={};if(null==e)return n;var r=!1;t=pt(t,(function(t){return t=si(t,e),r||(r=t.length>1),t})),yi(e,Vi(e),n),r&&(n=Jn(n,7,Bi));for(var i=t.length;i--;)Qr(n,t[i]);return n}));var js=$i((function(e,t){return null==e?{}:function(e,t){return Rr(e,t,(function(t,n){return _s(e,n)}))}(e,t)}));function As(e,t){if(null==e)return{};var n=pt(Vi(e),(function(e){return[e]}));return t=Ji(t),Rr(e,n,(function(e,n){return t(e,n[0])}))}var Is=Li(bs),xs=Li(ws);function Ps(e){return null==e?[]:Mt(e,bs(e))}var ks=Si((function(e,t,n){return t=t.toLowerCase(),e+(n?Ms(t):t)}));function Ms(e){return Ns(ss(e).toLowerCase())}function Cs(e){return(e=ss(e))&&e.replace(ce,zt).replace(Re,"")}var Rs=Si((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ts=Si((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Us=Ei("toLowerCase");var zs=Si((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ds=Si((function(e,t,n){return e+(n?" ":"")+Ns(t)}));var Ls=Si((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ns=Ei("toUpperCase");function qs(e,t,n){return e=ss(e),void 0===(t=n?void 0:t)?function(e){return De.test(e)}(e)?function(e){return e.match(Ue)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var Hs=Lr((function(e,t){try{return ot(e,void 0,t)}catch(e){return Na(e)?e:new de(e)}})),Bs=$i((function(e,t){return st(t,(function(t){t=Ao(t),Wn(e,t,ya(e[t],e))})),e}));function Fs(e){return function(){return e}}var $s=Ii(),Ks=Ii(!0);function Vs(e){return e}function Ws(e){return Er("function"==typeof e?e:Jn(e,1))}var Gs=Lr((function(e,t){return function(n){return yr(n,e,t)}})),Ys=Lr((function(e,t){return function(n){return yr(e,n,t)}}));function Js(e,t,n){var r=bs(t),i=fr(t,r);null!=n||Fa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=fr(t,bs(t)));var o=!(Fa(n)&&"chain"in n&&!n.chain),a=qa(e);return st(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Zs(){}var Xs=Mi(pt),Qs=Mi(ct),eu=Mi(gt);function tu(e){return uo(e)?jt(Ao(e)):function(e){return function(t){return lr(t,e)}}(e)}var nu=Ri(),ru=Ri(!0);function iu(){return[]}function ou(){return!1}var au=ki((function(e,t){return e+t}),0),su=zi("ceil"),uu=ki((function(e,t){return e/t}),1),cu=zi("floor");var fu,lu=ki((function(e,t){return e*t}),1),du=zi("round"),pu=ki((function(e,t){return e-t}),0);return xn.after=function(e,t){if("function"!=typeof t)throw new ye(o);return e=rs(e),function(){if(--e<1)return t.apply(this,arguments)}},xn.ary=_a,xn.assign=us,xn.assignIn=cs,xn.assignInWith=fs,xn.assignWith=ls,xn.at=ds,xn.before=ga,xn.bind=ya,xn.bindAll=Bs,xn.bindKey=ma,xn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ra(e)?e:[e]},xn.chain=ta,xn.chunk=function(e,t,n){t=(n?so(e,t,n):void 0===t)?1:an(rs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=r(Xt(i/t));o<i;)s[a++]=Kr(e,o,o+=t);return s},xn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},xn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ht(Ra(n)?gi(n):[n],or(t,1))},xn.cond=function(e){var t=null==e?0:e.length,n=Ji();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new ye(o);return[n(e[0]),e[1]]})):[],Lr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ot(i[0],this,n))return ot(i[1],this,n)}}))},xn.conforms=function(e){return function(e){var t=bs(e);return function(n){return Zn(n,e,t)}}(Jn(e,1))},xn.constant=Fs,xn.countBy=ia,xn.create=function(e,t){var n=Pn(e);return null==t?n:Vn(n,t)},xn.curry=function e(t,n,r){var i=Ni(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},xn.curryRight=function e(t,n,r){var i=Ni(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},xn.debounce=ba,xn.defaults=ps,xn.defaultsDeep=hs,xn.defer=wa,xn.delay=Oa,xn.difference=Po,xn.differenceBy=ko,xn.differenceWith=Mo,xn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,(t=n||void 0===t?1:rs(t))<0?0:t,r):[]},xn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,0,(t=r-(t=n||void 0===t?1:rs(t)))<0?0:t):[]},xn.dropRightWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!0,!0):[]},xn.dropWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!0):[]},xn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&so(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=rs(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:rs(r))<0&&(r+=i),r=n>r?0:is(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},xn.filter=function(e,t){return(Ra(e)?ft:ir)(e,Ji(t,3))},xn.flatMap=function(e,t){return or(da(e,t),1)},xn.flatMapDeep=function(e,t){return or(da(e,t),1/0)},xn.flatMapDepth=function(e,t,n){return n=void 0===n?1:rs(n),or(da(e,t),n)},xn.flatten=To,xn.flattenDeep=function(e){return(null==e?0:e.length)?or(e,1/0):[]},xn.flattenDepth=function(e,t){return(null==e?0:e.length)?or(e,t=void 0===t?1:rs(t)):[]},xn.flip=function(e){return Ni(e,512)},xn.flow=$s,xn.flowRight=Ks,xn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},xn.functions=function(e){return null==e?[]:fr(e,bs(e))},xn.functionsIn=function(e){return null==e?[]:fr(e,ws(e))},xn.groupBy=ca,xn.initial=function(e){return(null==e?0:e.length)?Kr(e,0,-1):[]},xn.intersection=zo,xn.intersectionBy=Do,xn.intersectionWith=Lo,xn.invert=gs,xn.invertBy=ys,xn.invokeMap=fa,xn.iteratee=Ws,xn.keyBy=la,xn.keys=bs,xn.keysIn=ws,xn.map=da,xn.mapKeys=function(e,t){var n={};return t=Ji(t,3),ur(e,(function(e,r,i){Wn(n,t(e,r,i),e)})),n},xn.mapValues=function(e,t){var n={};return t=Ji(t,3),ur(e,(function(e,r,i){Wn(n,r,t(e,r,i))})),n},xn.matches=function(e){return xr(Jn(e,1))},xn.matchesProperty=function(e,t){return Pr(e,Jn(t,1))},xn.memoize=Ea,xn.merge=Os,xn.mergeWith=Es,xn.method=Gs,xn.methodOf=Ys,xn.mixin=Js,xn.negate=Sa,xn.nthArg=function(e){return e=rs(e),Lr((function(t){return Mr(t,e)}))},xn.omit=Ss,xn.omitBy=function(e,t){return As(e,Sa(Ji(t)))},xn.once=function(e){return ga(2,e)},xn.orderBy=function(e,t,n,r){return null==e?[]:(Ra(t)||(t=null==t?[]:[t]),Ra(n=r?void 0:n)||(n=null==n?[]:[n]),Cr(e,t,n))},xn.over=Xs,xn.overArgs=ja,xn.overEvery=Qs,xn.overSome=eu,xn.partial=Aa,xn.partialRight=Ia,xn.partition=pa,xn.pick=js,xn.pickBy=As,xn.property=tu,xn.propertyOf=function(e){return function(t){return null==e?void 0:lr(e,t)}},xn.pull=qo,xn.pullAll=Ho,xn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Tr(e,t,Ji(n,2)):e},xn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Tr(e,t,void 0,n):e},xn.pullAt=Bo,xn.range=nu,xn.rangeRight=ru,xn.rearg=xa,xn.reject=function(e,t){return(Ra(e)?ft:ir)(e,Sa(Ji(t,3)))},xn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ji(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Ur(e,i),n},xn.rest=function(e,t){if("function"!=typeof e)throw new ye(o);return Lr(e,t=void 0===t?t:rs(t))},xn.reverse=Fo,xn.sampleSize=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:rs(t),(Ra(e)?qn:qr)(e,t)},xn.set=function(e,t,n){return null==e?e:Hr(e,t,n)},xn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Hr(e,t,n,r)},xn.shuffle=function(e){return(Ra(e)?Hn:$r)(e)},xn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&so(e,t,n)?(t=0,n=r):(t=null==t?0:rs(t),n=void 0===n?r:rs(n)),Kr(e,t,n)):[]},xn.sortBy=ha,xn.sortedUniq=function(e){return e&&e.length?Yr(e):[]},xn.sortedUniqBy=function(e,t){return e&&e.length?Yr(e,Ji(t,2)):[]},xn.split=function(e,t,n){return n&&"number"!=typeof n&&so(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ss(e))&&("string"==typeof t||null!=t&&!Ga(t))&&!(t=Zr(t))&&Nt(e)?ci(Vt(e),0,n):e.split(t,n):[]},xn.spread=function(e,t){if("function"!=typeof e)throw new ye(o);return t=null==t?0:an(rs(t),0),Lr((function(n){var r=n[t],i=ci(n,0,t);return r&&ht(i,r),ot(e,this,i)}))},xn.tail=function(e){var t=null==e?0:e.length;return t?Kr(e,1,t):[]},xn.take=function(e,t,n){return e&&e.length?Kr(e,0,(t=n||void 0===t?1:rs(t))<0?0:t):[]},xn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Kr(e,(t=r-(t=n||void 0===t?1:rs(t)))<0?0:t,r):[]},xn.takeRightWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!1,!0):[]},xn.takeWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3)):[]},xn.tap=function(e,t){return t(e),e},xn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ye(o);return Fa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ba(e,t,{leading:r,maxWait:t,trailing:i})},xn.thru=na,xn.toArray=ts,xn.toPairs=Is,xn.toPairsIn=xs,xn.toPath=function(e){return Ra(e)?pt(e,Ao):Za(e)?[e]:gi(jo(ss(e)))},xn.toPlainObject=as,xn.transform=function(e,t,n){var r=Ra(e),i=r||Da(e)||Xa(e);if(t=Ji(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Fa(e)&&qa(o)?Pn(Ke(e)):{}}return(i?st:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},xn.unary=function(e){return _a(e,1)},xn.union=$o,xn.unionBy=Ko,xn.unionWith=Vo,xn.uniq=function(e){return e&&e.length?Xr(e):[]},xn.uniqBy=function(e,t){return e&&e.length?Xr(e,Ji(t,2)):[]},xn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Xr(e,void 0,t):[]},xn.unset=function(e,t){return null==e||Qr(e,t)},xn.unzip=Wo,xn.unzipWith=Go,xn.update=function(e,t,n){return null==e?e:ei(e,t,ai(n))},xn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,ai(n),r)},xn.values=Ps,xn.valuesIn=function(e){return null==e?[]:Mt(e,ws(e))},xn.without=Yo,xn.words=qs,xn.wrap=function(e,t){return Aa(ai(t),e)},xn.xor=Jo,xn.xorBy=Zo,xn.xorWith=Xo,xn.zip=Qo,xn.zipObject=function(e,t){return ii(e||[],t||[],Fn)},xn.zipObjectDeep=function(e,t){return ii(e||[],t||[],Hr)},xn.zipWith=ea,xn.entries=Is,xn.entriesIn=xs,xn.extend=cs,xn.extendWith=fs,Js(xn,xn),xn.add=au,xn.attempt=Hs,xn.camelCase=ks,xn.capitalize=Ms,xn.ceil=su,xn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=os(n))==n?n:0),void 0!==t&&(t=(t=os(t))==t?t:0),Yn(os(e),t,n)},xn.clone=function(e){return Jn(e,4)},xn.cloneDeep=function(e){return Jn(e,5)},xn.cloneDeepWith=function(e,t){return Jn(e,5,t="function"==typeof t?t:void 0)},xn.cloneWith=function(e,t){return Jn(e,4,t="function"==typeof t?t:void 0)},xn.conformsTo=function(e,t){return null==t||Zn(e,t,bs(t))},xn.deburr=Cs,xn.defaultTo=function(e,t){return null==e||e!=e?t:e},xn.divide=uu,xn.endsWith=function(e,t,n){e=ss(e),t=Zr(t);var r=e.length,i=n=void 0===n?r:Yn(rs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},xn.eq=Pa,xn.escape=function(e){return(e=ss(e))&&N.test(e)?e.replace(D,Dt):e},xn.escapeRegExp=function(e){return(e=ss(e))&&W.test(e)?e.replace(V,"\\$&"):e},xn.every=function(e,t,n){var r=Ra(e)?ct:nr;return n&&so(e,t,n)&&(t=void 0),r(e,Ji(t,3))},xn.find=oa,xn.findIndex=Co,xn.findKey=function(e,t){return mt(e,Ji(t,3),ur)},xn.findLast=aa,xn.findLastIndex=Ro,xn.findLastKey=function(e,t){return mt(e,Ji(t,3),cr)},xn.floor=cu,xn.forEach=sa,xn.forEachRight=ua,xn.forIn=function(e,t){return null==e?e:ar(e,Ji(t,3),ws)},xn.forInRight=function(e,t){return null==e?e:sr(e,Ji(t,3),ws)},xn.forOwn=function(e,t){return e&&ur(e,Ji(t,3))},xn.forOwnRight=function(e,t){return e&&cr(e,Ji(t,3))},xn.get=vs,xn.gt=ka,xn.gte=Ma,xn.has=function(e,t){return null!=e&&ro(e,t,vr)},xn.hasIn=_s,xn.head=Uo,xn.identity=Vs,xn.includes=function(e,t,n,r){e=Ua(e)?e:Ps(e),n=n&&!r?rs(n):0;var i=e.length;return n<0&&(n=an(i+n,0)),Ja(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&wt(e,t,n)>-1},xn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:rs(n);return i<0&&(i=an(r+i,0)),wt(e,t,i)},xn.inRange=function(e,t,n){return t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n){return e>=sn(t,n)&&e<an(t,n)}(e=os(e),t,n)},xn.invoke=ms,xn.isArguments=Ca,xn.isArray=Ra,xn.isArrayBuffer=Ta,xn.isArrayLike=Ua,xn.isArrayLikeObject=za,xn.isBoolean=function(e){return!0===e||!1===e||$a(e)&&pr(e)==f},xn.isBuffer=Da,xn.isDate=La,xn.isElement=function(e){return $a(e)&&1===e.nodeType&&!Wa(e)},xn.isEmpty=function(e){if(null==e)return!0;if(Ua(e)&&(Ra(e)||"string"==typeof e||"function"==typeof e.splice||Da(e)||Xa(e)||Ca(e)))return!e.length;var t=no(e);if(t==v||t==m)return!e.size;if(lo(e))return!Sr(e).length;for(var n in e)if(Se.call(e,n))return!1;return!0},xn.isEqual=function(e,t){return br(e,t)},xn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?br(e,t,void 0,n):!!r},xn.isError=Na,xn.isFinite=function(e){return"number"==typeof e&&nn(e)},xn.isFunction=qa,xn.isInteger=Ha,xn.isLength=Ba,xn.isMap=Ka,xn.isMatch=function(e,t){return e===t||wr(e,t,Xi(t))},xn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,wr(e,t,Xi(t),n)},xn.isNaN=function(e){return Va(e)&&e!=+e},xn.isNative=function(e){if(fo(e))throw new de("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},xn.isNil=function(e){return null==e},xn.isNull=function(e){return null===e},xn.isNumber=Va,xn.isObject=Fa,xn.isObjectLike=$a,xn.isPlainObject=Wa,xn.isRegExp=Ga,xn.isSafeInteger=function(e){return Ha(e)&&e>=-9007199254740991&&e<=9007199254740991},xn.isSet=Ya,xn.isString=Ja,xn.isSymbol=Za,xn.isTypedArray=Xa,xn.isUndefined=function(e){return void 0===e},xn.isWeakMap=function(e){return $a(e)&&no(e)==O},xn.isWeakSet=function(e){return $a(e)&&"[object WeakSet]"==pr(e)},xn.join=function(e,t){return null==e?"":rn.call(e,t)},xn.kebabCase=Rs,xn.last=No,xn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=rs(n))<0?an(r+i,0):sn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):bt(e,Et,i,!0)},xn.lowerCase=Ts,xn.lowerFirst=Us,xn.lt=Qa,xn.lte=es,xn.max=function(e){return e&&e.length?rr(e,Vs,hr):void 0},xn.maxBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),hr):void 0},xn.mean=function(e){return St(e,Vs)},xn.meanBy=function(e,t){return St(e,Ji(t,2))},xn.min=function(e){return e&&e.length?rr(e,Vs,Ar):void 0},xn.minBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),Ar):void 0},xn.stubArray=iu,xn.stubFalse=ou,xn.stubObject=function(){return{}},xn.stubString=function(){return""},xn.stubTrue=function(){return!0},xn.multiply=lu,xn.nth=function(e,t){return e&&e.length?Mr(e,rs(t)):void 0},xn.noConflict=function(){return We._===this&&(We._=Pe),this},xn.noop=Zs,xn.now=va,xn.pad=function(e,t,n){e=ss(e);var r=(t=rs(t))?Kt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ci(Qt(i),n)+e+Ci(Xt(i),n)},xn.padEnd=function(e,t,n){e=ss(e);var r=(t=rs(t))?Kt(e):0;return t&&r<t?e+Ci(t-r,n):e},xn.padStart=function(e,t,n){e=ss(e);var r=(t=rs(t))?Kt(e):0;return t&&r<t?Ci(t-r,n)+e:e},xn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(ss(e).replace(Y,""),t||0)},xn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&so(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ns(e),void 0===t?(t=e,e=0):t=ns(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=fn();return sn(e+i*(t-e+Fe("1e-"+((i+"").length-1))),t)}return zr(e,t)},xn.reduce=function(e,t,n){var r=Ra(e)?vt:It,i=arguments.length<3;return r(e,Ji(t,4),n,i,er)},xn.reduceRight=function(e,t,n){var r=Ra(e)?_t:It,i=arguments.length<3;return r(e,Ji(t,4),n,i,tr)},xn.repeat=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:rs(t),Dr(ss(e),t)},xn.replace=function(){var e=arguments,t=ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},xn.result=function(e,t,n){var r=-1,i=(t=si(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Ao(t[r])];void 0===o&&(r=i,o=n),e=qa(o)?o.call(e):o}return e},xn.round=du,xn.runInContext=e,xn.sample=function(e){return(Ra(e)?Nn:Nr)(e)},xn.size=function(e){if(null==e)return 0;if(Ua(e))return Ja(e)?Kt(e):e.length;var t=no(e);return t==v||t==m?e.size:Sr(e).length},xn.snakeCase=zs,xn.some=function(e,t,n){var r=Ra(e)?gt:Vr;return n&&so(e,t,n)&&(t=void 0),r(e,Ji(t,3))},xn.sortedIndex=function(e,t){return Wr(e,t)},xn.sortedIndexBy=function(e,t,n){return Gr(e,t,Ji(n,2))},xn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Wr(e,t);if(r<n&&Pa(e[r],t))return r}return-1},xn.sortedLastIndex=function(e,t){return Wr(e,t,!0)},xn.sortedLastIndexBy=function(e,t,n){return Gr(e,t,Ji(n,2),!0)},xn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Wr(e,t,!0)-1;if(Pa(e[n],t))return n}return-1},xn.startCase=Ds,xn.startsWith=function(e,t,n){return e=ss(e),n=null==n?0:Yn(rs(n),0,e.length),t=Zr(t),e.slice(n,n+t.length)==t},xn.subtract=pu,xn.sum=function(e){return e&&e.length?xt(e,Vs):0},xn.sumBy=function(e,t){return e&&e.length?xt(e,Ji(t,2)):0},xn.template=function(e,t,n){var r=xn.templateSettings;n&&so(e,t,n)&&(t=void 0),e=ss(e),t=fs({},t,r,qi);var i,o,a=fs({},t.imports,r.imports,qi),s=bs(a),u=Mt(a,s),c=0,f=t.interpolate||fe,l="__p += '",d=_e((t.escape||fe).source+"|"+f.source+"|"+(f===B?ne:fe).source+"|"+(t.evaluate||fe).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ne+"]")+"\n";e.replace(d,(function(t,n,r,a,s,u){return r||(r=a),l+=e.slice(c,u).replace(le,Lt),n&&(i=!0,l+="' +\n__e("+n+") +\n'"),s&&(o=!0,l+="';\n"+s+";\n__p += '"),r&&(l+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),l+="';\n";var h=Se.call(t,"variable")&&t.variable;h||(l="with (obj) {\n"+l+"\n}\n"),l=(o?l.replace(R,""):l).replace(T,"$1").replace(U,"$1;"),l="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var v=Hs((function(){return pe(s,p+"return "+l).apply(void 0,u)}));if(v.source=l,Na(v))throw v;return v},xn.times=function(e,t){if((e=rs(e))<1||e>9007199254740991)return[];var n=4294967295,r=sn(e,4294967295);e-=4294967295;for(var i=Pt(r,t=Ji(t));++n<e;)t(n);return i},xn.toFinite=ns,xn.toInteger=rs,xn.toLength=is,xn.toLower=function(e){return ss(e).toLowerCase()},xn.toNumber=os,xn.toSafeInteger=function(e){return e?Yn(rs(e),-9007199254740991,9007199254740991):0===e?e:0},xn.toString=ss,xn.toUpper=function(e){return ss(e).toUpperCase()},xn.trim=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(G,"");if(!e||!(t=Zr(t)))return e;var r=Vt(e),i=Vt(t);return ci(r,Rt(r,i),Tt(r,i)+1).join("")},xn.trimEnd=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(J,"");if(!e||!(t=Zr(t)))return e;var r=Vt(e);return ci(r,0,Tt(r,Vt(t))+1).join("")},xn.trimStart=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Zr(t)))return e;var r=Vt(e);return ci(r,Rt(r,Vt(t))).join("")},xn.truncate=function(e,t){var n=30,r="...";if(Fa(t)){var i="separator"in t?t.separator:i;n="length"in t?rs(t.length):n,r="omission"in t?Zr(t.omission):r}var o=(e=ss(e)).length;if(Nt(e)){var a=Vt(e);o=a.length}if(n>=o)return e;var s=n-Kt(r);if(s<1)return r;var u=a?ci(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ga(i)){if(e.slice(s).search(i)){var c,f=u;for(i.global||(i=_e(i.source,ss(re.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var l=c.index;u=u.slice(0,void 0===l?s:l)}}else if(e.indexOf(Zr(i),s)!=s){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+r},xn.unescape=function(e){return(e=ss(e))&&L.test(e)?e.replace(z,Wt):e},xn.uniqueId=function(e){var t=++je;return ss(e)+t},xn.upperCase=Ls,xn.upperFirst=Ns,xn.each=sa,xn.eachRight=ua,xn.first=Uo,Js(xn,(fu={},ur(xn,(function(e,t){Se.call(xn.prototype,t)||(fu[t]=e)})),fu),{chain:!1}),xn.VERSION="4.17.15",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){xn[e].placeholder=xn})),st(["drop","take"],(function(e,t){Cn.prototype[e]=function(n){n=void 0===n?1:an(rs(n),0);var r=this.__filtered__&&!t?new Cn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Cn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Cn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ji(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Cn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Cn.prototype[e]=function(){return this.__filtered__?new Cn(this):this[n](1)}})),Cn.prototype.compact=function(){return this.filter(Vs)},Cn.prototype.find=function(e){return this.filter(e).head()},Cn.prototype.findLast=function(e){return this.reverse().find(e)},Cn.prototype.invokeMap=Lr((function(e,t){return"function"==typeof e?new Cn(this):this.map((function(n){return yr(n,e,t)}))})),Cn.prototype.reject=function(e){return this.filter(Sa(Ji(e)))},Cn.prototype.slice=function(e,t){e=rs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Cn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=rs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Cn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Cn.prototype.toArray=function(){return this.take(4294967295)},ur(Cn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=xn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(xn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof Cn,u=a[0],c=s||Ra(t),f=function(e){var t=i.apply(xn,ht([e],a));return r&&l?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var l=this.__chain__,d=!!this.__actions__.length,p=o&&!l,h=s&&!d;if(!o&&c){t=h?t:new Cn(this);var v=e.apply(t,a);return v.__actions__.push({func:na,args:[f],thisArg:void 0}),new Mn(v,l)}return p&&h?e.apply(this,a):(v=this.thru(f),p?r?v.value()[0]:v.value():v)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=me[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);xn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ra(i)?i:[],e)}return this[n]((function(n){return t.apply(Ra(n)?n:[],e)}))}})),ur(Cn.prototype,(function(e,t){var n=xn[t];if(n){var r=n.name+"";Se.call(mn,r)||(mn[r]=[]),mn[r].push({name:t,func:n})}})),mn[xi(void 0,2).name]=[{name:"wrapper",func:void 0}],Cn.prototype.clone=function(){var e=new Cn(this.__wrapped__);return e.__actions__=gi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gi(this.__views__),e},Cn.prototype.reverse=function(){if(this.__filtered__){var e=new Cn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Cn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ra(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=sn(t,e+a);break;case"takeRight":e=an(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,f=this.__iteratees__,l=f.length,d=0,p=sn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return ni(e,this.__actions__);var h=[];e:for(;u--&&d<p;){for(var v=-1,_=e[c+=t];++v<l;){var g=f[v],y=g.iteratee,m=g.type,b=y(_);if(2==m)_=b;else if(!b){if(1==m)continue e;break e}}h[d++]=_}return h},xn.prototype.at=ra,xn.prototype.chain=function(){return ta(this)},xn.prototype.commit=function(){return new Mn(this.value(),this.__chain__)},xn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},xn.prototype.plant=function(e){for(var t,n=this;n instanceof kn;){var r=xo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},xn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Cn){var t=e;return this.__actions__.length&&(t=new Cn(this)),(t=t.reverse()).__actions__.push({func:na,args:[Fo],thisArg:void 0}),new Mn(t,this.__chain__)}return this.thru(Fo)},xn.prototype.toJSON=xn.prototype.valueOf=xn.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},xn.prototype.first=xn.prototype.head,Xe&&(xn.prototype[Xe]=function(){return this}),xn}();We._=Gt,void 0===(i=function(){return Gt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(102),n(103)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r={},i=new Array(64),o=0,a="A".charCodeAt(0),s="Z".charCodeAt(0);o+a<=s;o++){var u=String.fromCharCode(o+a);r[u]=o,i[o]=u}for(o=0,a="a".charCodeAt(0),s="z".charCodeAt(0);o+a<=s;o++){u=String.fromCharCode(o+a);var c=o+26;r[u]=c,i[c]=u}for(o=0;o<10;o++){r[o.toString(10)]=o+52;u=o.toString(10),c=o+52;r[u]=c,i[c]=u}r["+"]=62,i[62]="+",r["/"]=63,i[63]="/";t.fromBase64=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),i=new DataView(n),o=0;o<e.length;o+=4){for(var a=0,s=0,u=o,c=o+3;u<=c;u++)"="!==e[u]?(a|=r[e[u]]<<6*(c-u),s+=6):a>>=6;var f=o/4*3;a>>=s%8;for(var l=Math.floor(s/8),d=0;d<l;d++){var p=8*(l-d-1);i.setUint8(f+d,(a&255<<p)>>p)}}return new Uint8Array(n)},t.toBase64=function(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,o=0,a=n,s=Math.min(n+3,e.length);a<s;a++)r|=e[a]<<8*(s-a-1),o+=8;var u=Math.ceil(o/6);r<<=6*u-o;for(var c=1;c<=u;c++){var f=6*(u-c);t+=i[(r&63<<f)>>f]}t+="==".slice(0,4-u)}return t}},function(e,t,n){var r=n(51),i=n(52),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(32),t),r.__exportStar(n(33),t),r.__exportStar(n(53),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(67),t),r.__exportStar(n(68),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2);t.resolveHostHeaderConfig=function(e){return e},t.hostHeaderMiddleware=function(e){return function(t){return function(n){return r.__awaiter(void 0,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(r){return i.HttpRequest.isInstance(n.request)?(o=n.request,a=(e.requestHandler.metadata||{}).handlerProtocol,(void 0===a?"":a).indexOf("h2")>=0&&!o.headers[":authority"]?(delete o.headers.host,o.headers[":authority"]=""):o.headers.host||(o.headers.host=o.hostname),[2,t(n)]):[2,t(n)]}))}))}}},t.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",tags:["HOST"]},t.getHostHeaderPlugin=function(e){return{applyToStack:function(n){n.add(t.hostHeaderMiddleware(e),t.hostHeaderMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(69),t),r.__exportStar(n(35),t),r.__exportStar(n(71),t),r.__exportStar(n(36),t),r.__exportStar(n(37),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(72),t),r.__exportStar(n(74),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(75),t),r.__exportStar(n(76),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(87),t),r.__exportStar(n(90),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invalidFunction=function(e){return function(){throw new Error(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r={},i={},o=0;o<256;o++){var a=o.toString(16).toLowerCase();1===a.length&&(a="0"+a),r[o]=a,i[a]=o}t.fromHex=function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in i))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=i[r]}return t},t.toHex=function(e){for(var t="",n=0;n<e.byteLength;n++)t+=r[e[n]];return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2);function o(e){var t=this;return function(n){return function(o){return r.__awaiter(t,void 0,void 0,(function(){var t,a,s,u,c;return r.__generator(this,(function(f){return t=o.request,i.HttpRequest.isInstance(t)&&(a=t.body,s=t.headers,a&&-1===Object.keys(s).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(u=e(a))&&(t.headers=r.__assign(r.__assign({},t.headers),((c={})["content-length"]=String(u),c)))),[2,n(r.__assign(r.__assign({},o),{request:t}))]}))}))}}}t.contentLengthMiddleware=o,t.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},t.getContentLengthPlugin=function(e){return{applyToStack:function(n){n.add(o(e.bodyLengthChecker),t.contentLengthMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(77),t);var r=n(40);t.Ie11Sha256=r.Sha256;var i=n(43);t.WebCryptoSha256=i.Sha256},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91);t.parseUrl=function(e){var t,n=new URL(e),i=n.hostname,o=n.pathname,a=n.port,s=n.protocol,u=n.search;return u&&(t=r.parseQueryString(u)),{hostname:i,port:a?parseInt(a):void 0,protocol:s,path:o,query:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBodyLength=function(e){return"string"==typeof e?new Blob([e]).size:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUserAgent=function(e,t){return"aws-sdk-js-v3-"+e+"/"+t+" "+("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(39),t),r.__exportStar(n(73),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_DELAY_BASE=100,t.MAXIMUM_RETRY_DELAY=2e4,t.RETRYABLE_STATUS_CODES=new Set,[429,500,502,503,504,509].forEach((function(e){return t.RETRYABLE_STATUS_CODES.add(e)})),t.THROTTLING_RETRY_DELAY_BASE=500},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};t.locateWindow=function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:n}},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-pinpoint","b":"1.0.0-gamma.2"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-kinesis","b":"1.0.0-gamma.2"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-firehose","b":"1.0.0-gamma.2"}')},function(e){e.exports=JSON.parse('{"a":"@aws-sdk/client-personalize-events","b":"1.0.0-gamma.2"}')},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.deserializerMiddleware=function(e,t){return n=>i=>r.__awaiter(this,void 0,void 0,(function*(){const{response:r}=yield n(i);return{response:r,output:yield t(r,e)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.serializerMiddleware=function(e,t){return n=>i=>r.__awaiter(this,void 0,void 0,(function*(){const r=yield t(i.input,e);return n(Object.assign(Object.assign({},i),{request:r}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(55),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(24),o=n(36),a=n(37),s=n(38),u=function(){function e(e,t,n){void 0===t&&(t=a.defaultRetryDecider),void 0===n&&(n=o.defaultDelayDecider),this.maxRetries=e,this.retryDecider=t,this.delayDecider=n}return e.prototype.shouldRetry=function(e,t){return t<this.maxRetries&&this.retryDecider(e)},e.prototype.retry=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,o,a,u,c;return r.__generator(this,(function(f){switch(f.label){case 0:n=0,o=0,a=function(){var a,c,f,l,d;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,5]),[4,e(t)];case 1:return a=r.sent(),c=a.response,(f=a.output).$metadata.retries=n,f.$metadata.totalRetryDelay=o,[2,{value:{response:c,output:f}}];case 2:return l=r.sent(),u.shouldRetry(l,n)?(d=u.delayDecider(s.isThrottlingError(l)?i.THROTTLING_RETRY_DELAY_BASE:i.DEFAULT_RETRY_DELAY_BASE,n++),o+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return r.sent(),[2,"continue"];case 4:throw l.$metadata||(l.$metadata={}),l.$metadata.retries=n,l.$metadata.totalRetryDelay=o,l;case 5:return[2]}}))},u=this,f.label=1;case 1:return[5,a()];case 2:return"object"==typeof(c=f.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},e}();t.ExponentialBackOffStrategy=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.defaultDelayDecider=function(e,t){return Math.floor(Math.min(r.MAXIMUM_RETRY_DELAY,Math.random()*Math.pow(2,t)*e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(38);t.defaultRetryDecider=function(e){return!!e&&(!!e.connectionError||(!!(function(e){return null==e?void 0:e.$metadata}(e)&&e.$metadata.httpStatusCode&&r.RETRYABLE_STATUS_CODES.has(e.$metadata.httpStatusCode))||(i.isStillProcessingError(e)||i.isThrottlingError(e)||i.isClockSkewError(e))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(70);t.isClockSkewError=function(e){return e.name in r.CLOCK_SKEW_ERROR_CODES},t.isStillProcessingError=function(e){return e.name in r.STILL_PROCESSING_ERROR_CODES},t.isThrottlingError=function(e){return e.name in r.THROTTLING_ERROR_CODES}},function(e,t,n){"use strict";function r(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUri=function(e){var t=encodeURIComponent(e);return t=t.replace(/[!'()*]/g,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(42),o=n(4),a=n(25),s=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=a.locateWindow().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n("ImportKey completed without importing key.")},r.onerror=function(){n("ImportKey failed to import key.")}}))}(e).then((function(e){return a.locateWindow().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(a.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;r.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n("Error encountered finalizing hash")},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n("Error encountered finalizing hash")},e.finish()}))}))},e}();function u(e){return"string"==typeof e?o.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(41),o=n(42),a=n(25),s=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){a.locateWindow().crypto.subtle.importKey("raw",u(e),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!i.isEmptyData(e)){var t=u(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return a.locateWindow().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):i.isEmptyData(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return a.locateWindow().crypto.subtle.digest(o.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function u(e){return"string"==typeof e?r.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&o(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&o(e),parseInt(r.toHex(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function o(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}t.Int64=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.crc32=function(e){return(new i).update(e).digest()};var i=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=r.__values(e),a=i.next();!a.done;a=i.next()){var s=a.value;this.checksum=this.checksum>>>8^o[255&(this.checksum^s)]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=i;var o=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayBuffer=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveEventStreamSerdeConfig=function(e){return Object.assign(Object.assign({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(Object.assign({},e))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(92),t)},,function(e,t,n){var r,i,o=n(30),a=n(31),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,f=t||[],l=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==d){var p=o();null==l&&(l=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,_=h-s+(v-u)/1e4;if(_<0&&void 0===e.clockseq&&(d=d+1&16383),(_<0||h>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,u=v,i=d;var g=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;f[c++]=g>>>24&255,f[c++]=g>>>16&255,f[c++]=g>>>8&255,f[c++]=255&g;var y=h/4294967296*1e4&268435455;f[c++]=y>>>8&255,f[c++]=255&y,f[c++]=y>>>24&15|16,f[c++]=y>>>16&255,f[c++]=d>>>8|128,f[c++]=255&d;for(var m=0;m<6;++m)f[c+m]=l[m];return t||a(f)}},function(e,t,n){var r=n(30),i=n(31);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(33);t.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},t.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]},t.getSerdePlugin=function(e,n,o){return{applyToStack:a=>{a.add(r.deserializerMiddleware(e,o),t.deserializerMiddlewareOption),a.add(i.serializerMiddleware(e,n),t.serializerMiddlewareOption)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),i=function(){function e(e){this.middlewareStack=new r.MiddlewareStack,this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}();t.Client=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){this.absoluteEntries=[],this.relativeEntries=[],this.entriesNameMap={}}return e.prototype.add=function(e,t){void 0===t&&(t={});var n=t.name,r=t.step,i=void 0===r?"initialize":r,o=t.tags,a=t.priority,s={name:n,step:i,tags:o,priority:void 0===a?"normal":a,middleware:e};if(n){if(Object.prototype.hasOwnProperty.call(this.entriesNameMap,n))throw new Error("Duplicated middleware name '"+n+"'");this.entriesNameMap[n]=s}this.absoluteEntries.push(s)},e.prototype.addRelativeTo=function(e,t){var n=t.step,r=void 0===n?"initialize":n,i=t.name,o=t.tags,a=t.relation,s=t.toMiddleware,u={middleware:e,step:r,name:i,tags:o,next:"before"===a?s:void 0,prev:"after"===a?s:void 0};if(i){if(Object.prototype.hasOwnProperty.call(this.entriesNameMap,i))throw new Error("Duplicated middleware name '"+i+"'");this.entriesNameMap[i]=u}this.relativeEntries.push(u)},e.prototype.sort=function(e){return e.sort((function(e,t){return o[t.step]-o[e.step]||a[t.priority||"normal"]-a[e.priority||"normal"]}))},e.prototype.clone=function(){var t,n,i=new e;return(t=i.absoluteEntries).push.apply(t,this.absoluteEntries),(n=i.relativeEntries).push.apply(n,this.relativeEntries),i.entriesNameMap=r.__assign({},this.entriesNameMap),i},e.prototype.concat=function(t){var n,i,o=new e;o.entriesNameMap=r.__assign({},this.entriesNameMap);var a=t;for(var s in a.entriesNameMap){if(o.entriesNameMap[s])throw new Error("Duplicated middleware name '"+s+"'");o.entriesNameMap[s]=a.entriesNameMap[s]}return(n=o.absoluteEntries).push.apply(n,r.__spreadArrays(this.absoluteEntries,a.absoluteEntries)),(i=o.relativeEntries).push.apply(i,r.__spreadArrays(this.relativeEntries,a.relativeEntries)),o},e.prototype.remove=function(e){return"string"==typeof e?this.removeByName(e):this.removeByReference(e)},e.prototype.removeByName=function(e){for(var t=this.absoluteEntries.length-1;t>=0;t--)if(this.absoluteEntries[t].name&&this.absoluteEntries[t].name===e)return this.absoluteEntries.splice(t,1),delete this.entriesNameMap[e],!0;for(t=this.relativeEntries.length-1;t>=0;t--)if(this.relativeEntries[t].name&&this.relativeEntries[t].name===e)return this.relativeEntries.splice(t,1),delete this.entriesNameMap[e],!0;return!1},e.prototype.removeByReference=function(e){for(var t=this.absoluteEntries.length-1;t>=0;t--){if(this.absoluteEntries[t].middleware===e)return(n=this.absoluteEntries[t].name)&&delete this.entriesNameMap[n],this.absoluteEntries.splice(t,1),!0}for(t=this.relativeEntries.length-1;t>=0;t--){var n;if(this.relativeEntries[t].middleware===e)return(n=this.relativeEntries[t].name)&&delete this.entriesNameMap[n],this.relativeEntries.splice(t,1),!0}return!1},e.prototype.removeByTag=function(e){for(var t=!1,n=this.absoluteEntries.length-1;n>=0;n--){var r=this.absoluteEntries[n],i=r.tags,o=r.name;i&&i.indexOf(e)>-1&&(this.absoluteEntries.splice(n,1),o&&delete this.entriesNameMap[o],t=!0)}for(n=this.relativeEntries.length-1;n>=0;n--){var a=this.relativeEntries[n];i=a.tags,o=a.name;i&&i.indexOf(e)>-1&&(this.relativeEntries.splice(n,1),o&&delete this.entriesNameMap[o],t=!0)}return t},e.prototype.use=function(e){e.applyToStack(this)},e.prototype.normalizeRelativeEntries=function(){for(var e=this.absoluteEntries.filter((function(e){return e.name})).reduce((function(e,t){return e[t.name]=t,e}),{}),t=this.relativeEntries.map((function(e){return r.__assign(r.__assign({},e),{priority:null,next:void 0,prev:void 0})})),n=t.filter((function(e){return e.name})).reduce((function(e,t){return e[t.name]=t,e}),{}),i={},o=0;o<this.relativeEntries.length;o++){var a=this.relativeEntries[o],s=a.prev,u=a.next,c=t[o];if(s){if(e[s]&&e[s].step===c.step)i[s]||(i[s]={}),c.next=i[s].next,i[s].next&&(i[s].next.prev=c),i[s].next=c;else if(n[s]&&n[s].step===c.step){var f=n[s];if(f.next===c)continue;c.next=f.next,f.next=c,c.next&&(c.next.prev=c),c.prev=f}}else if(u)if(e[u]&&e[u].step===c.step)i[u]||(i[u]={}),c.prev=i[u].prev,i[u].prev&&(i[u].prev.next=c),i[u].prev=c;else if(n[u]&&n[u].step===c.step){var l=n[u];if(l.prev===c)continue;c.prev=l.prev,l.prev=c,c.prev&&(c.prev.next=c),c.next=l}}for(var d=[],p=new WeakSet,h=0,v=Object.keys(i);h<v.length;h++){var _=i[v[h]];for(s=_.prev,u=_.next;s;)p.add(s),s=s.prev;for(;u;)p.add(u),u=u.next}for(o=0;o<t.length;o++){var g=t[o];if(!p.has(g))for(g.prev||d.push(g);g&&!p.has(g);)p.add(g),g=g.next}return[d,i]},e.prototype.getMiddlewareList=function(){for(var e=[],t=this.normalizeRelativeEntries(),n=t[0],i=t[1],o=r.__spreadArrays(this.absoluteEntries,n),a=0,s=o=this.sort(o);a<s.length;a++){for(var u=s[a],c={prev:void 0,next:void 0},f=u.name&&i[u.name]||c,l=f.prev,d=f.next,p=l;null==p?void 0:p.prev;)p=p.prev;for(;p;)e.push(p.middleware),p=p.next;e.push(u.middleware);for(var h=u;h.next;)e.push(h.next.middleware),h=h.next;for(p=d;p;)e.push(p.middleware),p=p.next}return e.reverse()},e.prototype.resolve=function(e,t){for(var n=0,r=this.getMiddlewareList();n<r.length;n++){e=(0,r[n])(e,t)}return e},e}();t.MiddlewareStack=i;var o={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},a={high:3,normal:2,low:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),i=function(){this.middlewareStack=new r.MiddlewareStack};t.Command=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendedEncodeURIComponent=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArrayIfSingleItem=function(e){return Array.isArray(e)?e:[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValueFromTextNode=function(e){for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]["#text"]?e[n]=e[n]["#text"]:"object"==typeof e[n]&&null!==e[n]&&(e[n]=t.getValueFromTextNode(e[n]));return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isa=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"object"==typeof e&&("__type"in e&&t.indexOf(e.__type)>-1||"name"in e&&t.indexOf(e.name)>-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.StringWrapper=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,r.__spread([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n},t.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:t.StringWrapper,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t.StringWrapper,String);var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(t.StringWrapper);t.LazyJsonString=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.dateToUtcString=function(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),o=e.getUTCDay(),a=e.getUTCDate(),s=e.getUTCHours(),u=e.getUTCMinutes(),c=e.getUTCSeconds();return r[o]+", "+(a<10?"0"+a:""+a)+" "+i[n]+" "+t+" "+(s<10?"0"+s:""+s)+":"+(u<10?"0"+u:""+u)+":"+(c<10?"0"+c:""+c)+" GMT"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitEvery=function(e,t,n){if(n<=0||!Number.isInteger(n))throw new Error("Invalid number of delimiters ("+n+") for splitEvery.");var r=e.split(t);if(1===n)return r;for(var i=[],o="",a=0;a<r.length;a++)""===o?o=r[a]:o+=t+r[a],(a+1)%n==0&&(i.push(o),o="");return""!==o&&i.push(o),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}();t.HttpResponse=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(r.__assign(r.__assign({},this),{headers:r.__assign({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var i,o=t[n];return r.__assign(r.__assign({},e),((i={})[n]=Array.isArray(o)?r.__spread(o):o,i))}),{}))),n},e}();t.HttpRequest=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidHostname=function(e){return/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/.test(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e,t){if("string"==typeof e){var n=Promise.resolve(t(e));return function(){return n}}if("object"==typeof e){var r=Promise.resolve(e);return function(){return r}}return e}t.normalizeEndpoint=i,t.resolveEndpointsConfig=function(e){var t=this,n=void 0===e.tls||e.tls,o=e.endpoint?i(e.endpoint,e.urlParser):function(){return e.region().then((function(i){return r.__awaiter(t,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.regionInfoProvider(i)];case 1:if(!(t=(r.sent()||{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+t)]}}))}))}))};return r.__assign(r.__assign({},e),{endpoint:o,tls:n})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}t.resolveRegionConfig=function(e){var t=e.region||e.regionDefaultProvider(e);return r.__assign(r.__assign({},e),{region:i(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function i(e){var t=this;return function(n){return function(i){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,e.retryStrategy.retry(n,i)]}))}))}}}t.retryMiddleware=i,t.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},t.getRetryPlugin=function(e){return{applyToStack:function(n){e.maxRetries>0&&n.add(i(e),t.retryMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLOCK_SKEW_ERROR_CODES={AuthFailure:!0,InvalidSignatureException:!0,RequestExpired:!0,RequestInTheFuture:!0,RequestTimeTooSkewed:!0,SignatureDoesNotMatch:!0},t.STILL_PROCESSING_ERROR_CODES={PriorRequestNotComplete:!0},t.THROTTLING_ERROR_CODES={BandwidthLimitExceeded:!0,ProvisionedThroughputExceededException:!0,RequestLimitExceeded:!0,RequestThrottled:!0,RequestThrottledException:!0,SlowDown:!0,ThrottledException:!0,Throttling:!0,ThrottlingException:!0,TooManyRequestsException:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(35);t.resolveRetryConfig=function(e){var t=void 0===e.maxRetries?3:e.maxRetries;return r.__assign(r.__assign({},e),{maxRetries:t,retryStrategy:e.retryStrategy||new i.ExponentialBackOffStrategy(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(105);function o(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}t.resolveAwsAuthConfig=function(e){var t,n=this,a=o(e.credentials||e.credentialDefaultProvider(e)),s=e.signingEscapePath,u=void 0===s||s,c=e.systemClockOffset,f=void 0===c?e.systemClockOffset||0:c,l=e.sha256;return t=e.signer?o(e.signer):function(){return o(e.region)().then((function(t){return r.__awaiter(n,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=r.__read(t,2),o=n[0],s=n[1],c=o.signingRegion,f=void 0===c?e.signingRegion:c,d=o.signingService,p=void 0===d?e.signingName:d;return e.signingRegion=e.signingRegion||f||s,e.signingName=e.signingName||p,new i.SignatureV4({credentials:a,region:e.signingRegion,service:e.signingName,sha256:l,uriEscapePath:u})}))},r.__assign(r.__assign({},e),{systemClockOffset:f,signingEscapePath:u,credentials:a,signer:t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(39);t.escapeUriPath=function(e){var t,n,o=[];try{for(var a=r.__values(e.split("/")),s=a.next();!s.done;s=a.next()){var u=s.value;o.push(i.escapeUri(u))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.join("/")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2),o=function(e){return new Date(Date.now()+e)};function a(e){return function(t){return function(n){return r.__awaiter(this,void 0,void 0,(function(){var a,s,u,c,f,l,d,p,h;return r.__generator(this,(function(v){switch(v.label){case 0:return i.HttpRequest.isInstance(n.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(n)];case 1:return s=v.sent(),[3,3];case 2:s=e.signer,v.label=3;case 3:return a=s,c=t,f=[r.__assign({},n)],l={},[4,a.sign(n.request,{signingDate:new Date(Date.now()+e.systemClockOffset)})];case 4:return[4,c.apply(void 0,[r.__assign.apply(void 0,f.concat([(l.request=v.sent(),l)]))])];case 5:return u=v.sent(),d=u.response.headers,(p=d&&(d.date||d.Date))&&(h=Date.parse(p),_=h,g=e.systemClockOffset,Math.abs(o(g).getTime()-_)>=3e5&&(e.systemClockOffset=h-Date.now())),[2,u]}var _,g}))}))}}}t.awsAuthMiddleware=a,t.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",step:"finalizeRequest",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"},t.getAwsAuthPlugin=function(e){return{applyToStack:function(n){n.addRelativeTo(a(e),t.awsAuthMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveUserAgentConfig=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2);function o(e){return function(t){return function(n){var o=n.request;if(!i.HttpRequest.isInstance(o))return t(n);var a=o.headers,s="node"===e.runtime?"user-agent":"x-amz-user-agent";return a[s]?a[s]+=" "+e.defaultUserAgent:a[s]=""+e.defaultUserAgent,e.customUserAgent&&(a[s]+=" "+e.customUserAgent),t(r.__assign(r.__assign({},n),{request:o}))}}}t.userAgentMiddleware=o,t.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},t.getUserAgentPlugin=function(e){return{applyToStack:function(n){n.add(o(e),t.getUserAgentMiddlewareOptions)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),i=n(43),o=n(80),a=n(83),s=n(85),u=n(25),c=function(){function e(e){a.supportsWebCrypto(u.locateWindow())?this.hash=new i.Sha256(e):s.isMsWindow(u.locateWindow())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromUtf8=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)},t.toUtf8=function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var a="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromUtf8=function(e){return(new TextEncoder).encode(e)},t.toUtf8=function(e){return new TextDecoder("utf-8").decode(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(81),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(44),o=n(82),a=n(4),s=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=u(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(u(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function u(e){return"string"==typeof e?a.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=0;l<r.BLOCK_SIZE;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var d=this.temp[l-2],p=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,h=((d=this.temp[l-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[l]=(p+this.temp[l-7]|0)+(h+this.temp[l-16]|0)}var v=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&u^~s&c)|0)+(f+(r.KEY[l]+this.temp[l]|0)|0)|0,_=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;f=c,c=u,u=s,s=a+v|0,a=o,o=i,i=n,n=v+_|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=a,t[4]+=s,t[5]+=u,t[6]+=c,t[7]+=f},e}();t.RawSha256=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(84),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function a(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&a(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=a,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!a(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(86),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,n=t.getRandomValues,i=t.subtle;return r.map((function(e){return i[e]})).concat(n).every((function(e){return"function"==typeof e}))}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(88),a=n(89),s=function(){function e(e){void 0===e&&(e={}),this.httpOptions=e}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=null==t?void 0:t.abortSignal,s=this.httpOptions.requestTimeout;if(null==n?void 0:n.aborted){var u=new Error("Request aborted");return u.name="AbortError",Promise.reject(u)}var c=e.path;if(e.query){var f=a.buildQueryString(e.query);f&&(c+="?"+f)}var l=e.port,d=e.protocol+"//"+e.hostname+(l?":"+l:"")+c,p={body:e.body,headers:new Headers(e.headers),method:e.method,mode:"cors"};"undefined"!=typeof AbortController&&(p.signal=n);var h=new Request(d,p),v=[fetch(h).then((function(e){var t,n,o=e.headers,a={};try{for(var s=r.__values(o.entries()),u=s.next();!u.done;u=s.next()){var c=u.value;a[c[0]]=c[1]}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new i.HttpResponse({headers:a,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new i.HttpResponse({headers:a,statusCode:e.status,body:t})}}))})),o.requestTimeout(s)];return n&&v.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(v)},e}();t.FetchHttpHandler=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTimeout=function(e){return void 0===e&&(e=0),new Promise((function(t,n){e&&setTimeout((function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",n(t)}),e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(23);t.buildQueryString=function(e){var t,n,o=[];try{for(var a=r.__values(Object.keys(e).sort()),s=a.next();!s.done;s=a.next()){var u=s.value,c=e[u];if(u=i.escapeUri(u),Array.isArray(c))for(var f=0,l=c.length;f<l;f++)o.push(u+"="+i.escapeUri(c[f]));else{var d=u;(c||"string"==typeof c)&&(d+="="+i.escapeUri(c)),o.push(d)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.join("&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(6);function o(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),a=o>-1?o+1:i.length;t(i.substring(a))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}t.streamCollector=function(e){return e instanceof Blob?function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,o(e)];case 1:return t=r.sent(),n=i.fromBase64(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:t=new Uint8Array(0),n=e.getReader(),i=!1,r.label=1;case 1:return i?[3,3]:[4,n.read()];case 2:return o=r.sent(),a=o.done,(s=o.value)&&(u=t,(t=new Uint8Array(u.length+s.length)).set(u),t.set(s,u.length)),i=a,[3,1];case 3:return[2,t]}}))}))}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.parseQueryString=function(e){var t,n,i={};if(e=e.replace(/^\?/,""))try{for(var o=r.__values(e.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value,u=r.__read(s.split("="),2),c=u[0],f=u[1],l=void 0===f?null:f;c=decodeURIComponent(c),l&&(l=decodeURIComponent(l)),c in i?Array.isArray(i[c])?i[c].push(l):i[c]=[i[c],l]:i[c]=l}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93);t.eventStreamSerdeProvider=function(e){return new r.EventStreamMarshaller(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(94),i=n(98),o=n(99),a=n(100),s=n(101),u=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new r.EventStreamMarshaller(t,n)}return e.prototype.deserialize=function(e,t){var n=o.getChunkedStream(e),r=a.getEventMessageStream(n,this.eventMarshaller),u=s.getDeserializingStream(r,t);return i.ReadableStreamtoIterable(u)},e.prototype.serialize=function(e,t){throw new Error("event stream request in browser is not supported\nReference: https://bugs.chromium.org/p/chromium/issues/detail?id=688906")},e}();t.EventStreamMarshaller=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(95),t),r.__exportStar(n(45),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),i=n(97),o=n(46),a=function(){function e(e,t){this.headerMarshaller=new r.HeaderMarshaller(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,a=new Uint8Array(i),s=new DataView(a.buffer,a.byteOffset,a.byteLength),u=new o.Crc32;return s.setUint32(0,i,!1),s.setUint32(4,r.byteLength,!1),s.setUint32(8,u.update(a.subarray(0,8)).digest(),!1),a.set(r,12),a.set(n,r.byteLength+12),s.setUint32(i-4,u.update(a.subarray(8,i-4)).digest(),!1),a},e.prototype.unmarshall=function(e){var t=i.splitMessage(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();t.EventStreamMarshaller=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(16),o=n(45),a=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,i,o,a=[];try{for(var s=r.__values(Object.keys(e)),u=s.next();!u.done;u=s.next()){var c=u.value,f=this.fromUtf8(c);a.push(Uint8Array.from([f.byteLength]),f,this.formatHeaderValue(e[c]))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(a.reduce((function(e,t){return e+t.byteLength}),0)),d=0;try{for(var p=r.__values(a),h=p.next();!h.done;h=p.next()){var v=h.value;l.set(v,d),d+=v.byteLength}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}return l},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);var s=new Uint8Array(a.buffer);return s.set(e.value,3),s;case"string":var u=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+u.byteLength));c.setUint8(0,7),c.setUint16(1,u.byteLength,!1);var f=new Uint8Array(c.buffer);return f.set(u,3),f;case"timestamp":var l=new Uint8Array(9);return l[0]=8,l.set(o.Int64.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!_.test(e.value))throw new Error("Invalid UUID received: "+e.value);var d=new Uint8Array(17);return d[0]=9,d.set(i.fromHex(e.value.replace(/\-/g,"")),1),d}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),a=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[a]={type:s,value:!0};break;case 1:t[a]={type:s,value:!1};break;case 2:t[a]={type:u,value:e.getInt8(n++)};break;case 3:t[a]={type:c,value:e.getInt16(n,!1)},n+=2;break;case 4:t[a]={type:f,value:e.getInt32(n,!1)},n+=4;break;case 5:t[a]={type:l,value:new o.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var _=e.getUint16(n,!1);n+=2,t[a]={type:d,value:new Uint8Array(e.buffer,e.byteOffset+n,_)},n+=_;break;case 7:var g=e.getUint16(n,!1);n+=2,t[a]={type:p,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,g))},n+=g;break;case 8:t[a]={type:h,value:new Date(new o.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var y=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[a]={type:v,value:i.toHex(y.subarray(0,4))+"-"+i.toHex(y.subarray(4,6))+"-"+i.toHex(y.subarray(6,8))+"-"+i.toHex(y.subarray(8,10))+"-"+i.toHex(y.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();t.HeaderMarshaller=a;var s="boolean",u="byte",c="short",f="integer",l="long",d="binary",p="string",h="timestamp",v="uuid",_=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46);t.splitMessage=function(e){var t=e.byteLength,n=e.byteOffset,i=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=new DataView(i,n,t),a=o.getUint32(0,!1);if(t!==a)throw new Error("Reported message length does not match received message length");var s=o.getUint32(4,!1),u=o.getUint32(8,!1),c=o.getUint32(t-4,!1),f=(new r.Crc32).update(new Uint8Array(i,n,8));if(u!==f.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+f.digest()+")");if(f.update(new Uint8Array(i,n+8,t-12)),c!==f.digest())throw new Error("The message checksum ("+f.digest()+") did not match the expected value of "+c);return{headers:new DataView(i,n+8+4,s),body:new Uint8Array(i,n+8+4+s,a-s-16)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.ReadableStreamtoIterable=function(e){return r.__asyncGenerator(this,arguments,(function(){var t,n,i,o,a;return r.__generator(this,(function(s){switch(s.label){case 0:t=e.getReader(),n=!1,s.label=1;case 1:return n?[3,6]:[4,r.__await(t.read())];case 2:return i=s.sent(),o=i.done,a=i.value,o?(n=!0,[3,6]):a?[4,r.__await(a)]:[3,5];case 3:return[4,s.sent()];case 4:s.sent(),s.label=5;case 5:return[3,1];case 6:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChunkedStream=function(e){var t=e.getReader(),n=0,r=0,i=null,o=null,a=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);n=e,r=4,i=new Uint8Array(e),new DataView(i.buffer).setUint32(0,e,!1)};return new ReadableStream({start:function(e){!function s(){return t.read().then((function(t){var u=t.done,c=t.value;if(u){if(n){if(n!==r)throw new Error("Truncated event message received.");e.enqueue(i)}e.close()}else{for(var f=c.length,l=0;l<f;){if(!i){var d=f-l;o||(o=new Uint8Array(4));var p=Math.min(4-r,d);if(o.set(c.slice(l,l+p),r),l+=p,(r+=p)<4)break;a(new DataView(o.buffer).getUint32(0,!1)),o=null}var h=Math.min(n-r,f-l);i.set(c.slice(l,l+h),r),r+=h,l+=h,n&&n===r&&(e.enqueue(i),i=null,n=0,r=0)}s()}}))}()}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventMessageStream=function(e,t){var n=e.getReader();return new ReadableStream({start:function(e){!function r(){n.read().then((function(n){var i,o,a=n.done,s=n.value;if(a)e.close();else{var u=t.unmarshall(s),c=u.headers[":message-type"].value;if("error"===c){var f=new Error(u.headers[":error-message"].value||"UnknownError");f.name=u.headers[":error-code"].value,e.error(f)}else"exception"===c?e.enqueue(((i={})[u.headers[":exception-type"].value]=u,i)):"event"===c?e.enqueue(((o={})[u.headers[":event-type"].value]=u,o)):e.error(new Error("Unrecognizable event type: "+u.headers[":event-type"].value));r()}}))}()}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.getDeserializingStream=function(e,t){var n=e.getReader();return new ReadableStream({start:function(e){!function i(){var o=this;n.read().then((function(n){var a=n.done,s=n.value;return r.__awaiter(o,void 0,void 0,(function(){var n,o,u;return r.__generator(this,(function(r){switch(r.label){case 0:if(a)return e.close(),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),o=(n=e).enqueue,[4,t(s)];case 2:return o.apply(n,[r.sent()]),i(),[3,4];case 3:return u=r.sent(),e.error(u),[3,4];case 4:return[2]}}))}))}))}()}})}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"Analytics",(function(){return Lt})),n.d(t,"AWSPinpointProvider",(function(){return Be})),n.d(t,"AWSKinesisProvider",(function(){return xn})),n.d(t,"AWSKinesisFirehoseProvider",(function(){return or})),n.d(t,"AmazonPersonalizeProvider",(function(){return Pr}));var r=n(3),i=n(0),o=n(2),a=n(1),s=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,c,_,g,y,m,b,w;return Object(i.__generator)(this,(function(O){switch(O.label){case 0:return r=[Object(i.__assign)({},e)],o={},[4,K(e.body,t)];case 1:switch(n=i.__assign.apply(void 0,r.concat([(o.body=O.sent(),o)])),s="UnknownError",s=V(e,n.body),s){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return u=[{}],[4,f(n,t)];case 3:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,u.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 4:return c=[{}],[4,l(n,t)];case 5:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,c.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 6:return _=[{}],[4,d(n,t)];case 7:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,_.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 8:return g=[{}],[4,p(n,t)];case 9:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,g.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 10:return y=[{}],[4,h(n,t)];case 11:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,y.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 12:return m=[{}],[4,v(n,t)];case 13:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,m.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 14:b=n.body,s=b.code||b.Code||s,a=Object(i.__assign)(Object(i.__assign)({},b),{name:""+s,message:b.message||b.Message||s,$fault:"client",$metadata:F(e)}),O.label=15;case 15:return w=a.message||a.Message||s,a.message=w,delete a.Message,[2,Promise.reject(Object.assign(new Error(w),a))]}}))}))},u=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,c,_,g,y,m,b,w;return Object(i.__generator)(this,(function(O){switch(O.label){case 0:return r=[Object(i.__assign)({},e)],o={},[4,K(e.body,t)];case 1:switch(n=i.__assign.apply(void 0,r.concat([(o.body=O.sent(),o)])),s="UnknownError",s=V(e,n.body),s){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return u=[{}],[4,f(n,t)];case 3:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,u.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 4:return c=[{}],[4,l(n,t)];case 5:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,c.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 6:return _=[{}],[4,d(n,t)];case 7:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,_.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 8:return g=[{}],[4,p(n,t)];case 9:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,g.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 10:return y=[{}],[4,h(n,t)];case 11:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,y.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 12:return m=[{}],[4,v(n,t)];case 13:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,m.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 14:b=n.body,s=b.code||b.Code||s,a=Object(i.__assign)(Object(i.__assign)({},b),{name:""+s,message:b.message||b.Message||s,$fault:"client",$metadata:F(e)}),O.label=15;case 15:return w=a.message||a.Message||s,a.message=w,delete a.Message,[2,Promise.reject(Object.assign(new Error(w),a))]}}))}))},c=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,c,_,g,y,m,b,w;return Object(i.__generator)(this,(function(O){switch(O.label){case 0:return r=[Object(i.__assign)({},e)],o={},[4,K(e.body,t)];case 1:switch(n=i.__assign.apply(void 0,r.concat([(o.body=O.sent(),o)])),s="UnknownError",s=V(e,n.body),s){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return u=[{}],[4,f(n,t)];case 3:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,u.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 4:return c=[{}],[4,l(n,t)];case 5:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,c.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 6:return _=[{}],[4,d(n,t)];case 7:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,_.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 8:return g=[{}],[4,p(n,t)];case 9:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,g.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 10:return y=[{}],[4,h(n,t)];case 11:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,y.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 12:return m=[{}],[4,v(n,t)];case 13:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,m.concat([O.sent()])),{name:s,$metadata:F(e)}]),[3,15];case 14:b=n.body,s=b.code||b.Code||s,a=Object(i.__assign)(Object(i.__assign)({},b),{name:""+s,message:b.message||b.Message||s,$fault:"client",$metadata:F(e)}),O.label=15;case 15:return w=a.message||a.Message||s,a.message=w,delete a.Message,[2,Promise.reject(Object.assign(new Error(w),a))]}}))}))},f=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:F(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},l=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"ForbiddenException",$fault:"client",$metadata:F(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},d=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"InternalServerErrorException",$fault:"server",$metadata:F(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},p=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:F(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},h=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:F(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},v=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"TooManyRequestsException",$fault:"client",$metadata:F(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},_=function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})},g=function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})},y=function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:S(e.Attributes,t)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:_(e.Demographic,t)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:g(e.Location,t)}),void 0!==e.Metrics&&{Metrics:j(e.Metrics,t)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:m(e.User,t)})},m=function(e,t){return Object(i.__assign)(Object(i.__assign)({},void 0!==e.UserAttributes&&{UserAttributes:S(e.UserAttributes,t)}),void 0!==e.UserId&&{UserId:e.UserId})},b=function(e,t){return Object(i.__assign)({},void 0!==e.BatchItem&&{BatchItem:E(e.BatchItem,t)})},w=function(e,t){return e.map((function(e){return e}))},O=function(e,t){return Object.entries(e).reduce((function(e,n){var r,o=Object(i.__read)(n,2),a=o[0],s=o[1];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[a]=function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.AppPackageName&&{AppPackageName:e.AppPackageName}),void 0!==e.AppTitle&&{AppTitle:e.AppTitle}),void 0!==e.AppVersionCode&&{AppVersionCode:e.AppVersionCode}),void 0!==e.Attributes&&{Attributes:A(e.Attributes,t)}),void 0!==e.ClientSdkVersion&&{ClientSdkVersion:e.ClientSdkVersion}),void 0!==e.EventType&&{EventType:e.EventType}),void 0!==e.Metrics&&{Metrics:j(e.Metrics,t)}),void 0!==e.SdkName&&{SdkName:e.SdkName}),void 0!==e.Session&&{Session:x(e.Session,t)}),void 0!==e.Timestamp&&{Timestamp:e.Timestamp})}(s,t),r))}),{})},E=function(e,t){return Object.entries(e).reduce((function(e,n){var r,o=Object(i.__read)(n,2),a=o[0],s=o[1];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[a]=function(e,t){return Object(i.__assign)(Object(i.__assign)({},void 0!==e.Endpoint&&{Endpoint:I(e.Endpoint,t)}),void 0!==e.Events&&{Events:O(e.Events,t)})}(s,t),r))}),{})},S=function(e,t){return Object.entries(e).reduce((function(e,n){var r,o=Object(i.__read)(n,2),a=o[0],s=o[1];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[a]=w(s,t),r))}),{})},j=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Object(i.__read)(t,2),o=r[0],a=r[1];return Object(i.__assign)(Object(i.__assign)({},e),((n={})[o]=a,n))}),{})},A=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Object(i.__read)(t,2),o=r[0],a=r[1];return Object(i.__assign)(Object(i.__assign)({},e),((n={})[o]=a,n))}),{})},I=function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:S(e.Attributes,t)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:_(e.Demographic,t)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:g(e.Location,t)}),void 0!==e.Metrics&&{Metrics:j(e.Metrics,t)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:m(e.User,t)})},x=function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},P=function(e,t){return{__type:"EndpointDemographic",AppVersion:void 0!==e.AppVersion&&null!==e.AppVersion?e.AppVersion:void 0,Locale:void 0!==e.Locale&&null!==e.Locale?e.Locale:void 0,Make:void 0!==e.Make&&null!==e.Make?e.Make:void 0,Model:void 0!==e.Model&&null!==e.Model?e.Model:void 0,ModelVersion:void 0!==e.ModelVersion&&null!==e.ModelVersion?e.ModelVersion:void 0,Platform:void 0!==e.Platform&&null!==e.Platform?e.Platform:void 0,PlatformVersion:void 0!==e.PlatformVersion&&null!==e.PlatformVersion?e.PlatformVersion:void 0,Timezone:void 0!==e.Timezone&&null!==e.Timezone?e.Timezone:void 0}},k=function(e,t){return{__type:"EndpointItemResponse",Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}},M=function(e,t){return{__type:"EndpointLocation",City:void 0!==e.City&&null!==e.City?e.City:void 0,Country:void 0!==e.Country&&null!==e.Country?e.Country:void 0,Latitude:void 0!==e.Latitude&&null!==e.Latitude?e.Latitude:void 0,Longitude:void 0!==e.Longitude&&null!==e.Longitude?e.Longitude:void 0,PostalCode:void 0!==e.PostalCode&&null!==e.PostalCode?e.PostalCode:void 0,Region:void 0!==e.Region&&null!==e.Region?e.Region:void 0}},C=function(e,t){return{__type:"EndpointResponse",Address:void 0!==e.Address&&null!==e.Address?e.Address:void 0,ApplicationId:void 0!==e.ApplicationId&&null!==e.ApplicationId?e.ApplicationId:void 0,Attributes:void 0!==e.Attributes&&null!==e.Attributes?q(e.Attributes,t):void 0,ChannelType:void 0!==e.ChannelType&&null!==e.ChannelType?e.ChannelType:void 0,CohortId:void 0!==e.CohortId&&null!==e.CohortId?e.CohortId:void 0,CreationDate:void 0!==e.CreationDate&&null!==e.CreationDate?e.CreationDate:void 0,Demographic:void 0!==e.Demographic&&null!==e.Demographic?P(e.Demographic):void 0,EffectiveDate:void 0!==e.EffectiveDate&&null!==e.EffectiveDate?e.EffectiveDate:void 0,EndpointStatus:void 0!==e.EndpointStatus&&null!==e.EndpointStatus?e.EndpointStatus:void 0,Id:void 0!==e.Id&&null!==e.Id?e.Id:void 0,Location:void 0!==e.Location&&null!==e.Location?M(e.Location):void 0,Metrics:void 0!==e.Metrics&&null!==e.Metrics?H(e.Metrics,t):void 0,OptOut:void 0!==e.OptOut&&null!==e.OptOut?e.OptOut:void 0,RequestId:void 0!==e.RequestId&&null!==e.RequestId?e.RequestId:void 0,User:void 0!==e.User&&null!==e.User?R(e.User,t):void 0}},R=function(e,t){return{__type:"EndpointUser",UserAttributes:void 0!==e.UserAttributes&&null!==e.UserAttributes?q(e.UserAttributes,t):void 0,UserId:void 0!==e.UserId&&null!==e.UserId?e.UserId:void 0}},T=function(e,t){return{__type:"EndpointsResponse",Item:void 0!==e.Item&&null!==e.Item?z(e.Item,t):void 0}},U=function(e,t){return{__type:"EventsResponse",Results:void 0!==e.Results&&null!==e.Results?N(e.Results,t):void 0}},z=function(e,t){return(e||[]).map((function(e){return C(e,t)}))},D=function(e,t){return(e||[]).map((function(e){return e}))},L=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Object(i.__read)(t,2),o=r[0],a=r[1];return Object(i.__assign)(Object(i.__assign)({},e),((n={})[o]=function(e,t){return{__type:"EventItemResponse",Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}}(a),n))}),{})},N=function(e,t){return Object.entries(e).reduce((function(e,n){var r,o=Object(i.__read)(n,2),a=o[0],s=o[1];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[a]=function(e,t){return{__type:"ItemResponse",EndpointItemResponse:void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse?k(e.EndpointItemResponse):void 0,EventsItemResponse:void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse?L(e.EventsItemResponse,t):void 0}}(s,t),r))}),{})},q=function(e,t){return Object.entries(e).reduce((function(e,n){var r,o=Object(i.__read)(n,2),a=o[0],s=o[1];return Object(i.__assign)(Object(i.__assign)({},e),((r={})[a]=D(s,t),r))}),{})},H=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=Object(i.__read)(t,2),o=r[0],a=r[1];return Object(i.__assign)(Object(i.__assign)({},e),((n={})[o]=a,n))}),{})},B=function(e,t){return{__type:"MessageBody",Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}},F=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},$=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},K=function(e,t){return function(e,t){return $(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},V=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},W=n(8),G=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(i.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(W.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,s,u,c,f,l,d,p;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",Object(a.extendedEncodeURIComponent)(s)),void 0!==e.EventsRequest&&(u=b(e.EventsRequest,t)),void 0===u&&(u={}),u=JSON.stringify(u),[4,t.endpoint()];case 1:return c=i.sent(),f=c.hostname,l=c.protocol,d=void 0===l?"https":l,p=c.port,[2,new o.HttpRequest({protocol:d,hostname:f,port:p,method:"POST",headers:n,path:r,body:u})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=400?[2,u(e,t)]:(n={$metadata:F(e),__type:"PutEventsResponse",EventsResponse:void 0},[4,K(e.body,t)]);case 1:return r=i.sent(),n.EventsResponse=U(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(a.Command),Y=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(i.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(W.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,s,u,c,f,l,d,p;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Object(a.extendedEncodeURIComponent)(s)),void 0===e.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((s=e.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",Object(a.extendedEncodeURIComponent)(s)),void 0!==e.EndpointRequest&&(u=y(e.EndpointRequest,t)),void 0===u&&(u={}),u=JSON.stringify(u),[4,t.endpoint()];case 1:return c=i.sent(),f=c.hostname,l=c.protocol,d=void 0===l?"https":l,p=c.port,[2,new o.HttpRequest({protocol:d,hostname:f,port:p,method:"PUT",headers:n,path:r,body:u})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=400?[2,c(e,t)]:(n={$metadata:F(e),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,K(e.body,t)]);case 1:return r=i.sent(),n.MessageBody=B(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(a.Command),J=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(i.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(W.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,s,u,c,f,l,d;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(n={"Content-Type":""},r="/v1/apps/{ApplicationId}/users/{UserId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((s=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Object(a.extendedEncodeURIComponent)(s)),void 0===e.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((s=e.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return r=r.replace("{UserId}",Object(a.extendedEncodeURIComponent)(s)),[4,t.endpoint()];case 1:return u=i.sent(),c=u.hostname,f=u.protocol,l=void 0===f?"https":f,d=u.port,[2,new o.HttpRequest({protocol:l,hostname:c,port:d,method:"GET",headers:n,path:r,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,s(e,t)]:(n={$metadata:F(e),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,K(e.body,t)]);case 1:return r=i.sent(),n.EndpointsResponse=T(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(a.Command),Z=n(26),X=n(18),Q=n(14),ee=n(15),te=n(19),ne=n(6),re=n(20),ie=n(21),oe=n(4),ae=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),se=new Set(["cn-north-1","cn-northwest-1"]),ue=new Set(["us-iso-east-1"]),ce=new Set(["us-isob-east-1"]),fe=new Set(["us-gov-west-1","us-gov-east-1"]),le={apiVersion:"2016-12-01",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",signingService:"mobiletargeting"};break;default:ae.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),signingService:"mobiletargeting"}),se.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e)}),ue.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e)}),ce.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e)}),fe.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"},de=Object(i.__assign)(Object(i.__assign)({},le),{runtime:"browser",base64Decoder:ne.fromBase64,base64Encoder:ne.toBase64,bodyLengthChecker:re.calculateBodyLength,credentialDefaultProvider:Object(ee.invalidFunction)("Credential is missing"),defaultUserAgent:Object(ie.defaultUserAgent)(Z.a,Z.b),regionDefaultProvider:Object(ee.invalidFunction)("Region is missing"),requestHandler:new Q.FetchHttpHandler,sha256:X.Sha256,streamCollector:Q.streamCollector,urlParser:te.parseUrl,utf8Decoder:oe.fromUtf8,utf8Encoder:oe.toUtf8}),pe=n(9),he=n(17),ve=n(10),_e=n(11),ge=n(12),ye=n(13),me=function(e){function t(t){var n=this,r=Object(i.__assign)(Object(i.__assign)({},de),t),o=Object(pe.resolveRegionConfig)(r),a=Object(pe.resolveEndpointsConfig)(o),s=Object(ge.resolveAwsAuthConfig)(a),u=Object(_e.resolveRetryConfig)(s),c=Object(ye.resolveUserAgentConfig)(u),f=Object(ve.resolveHostHeaderConfig)(c);return(n=e.call(this,f)||this).config=f,n.middlewareStack.use(Object(ge.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(_e.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(ye.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(he.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(ve.getHostHeaderPlugin)(n.config)),n}return Object(i.__extends)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(a.Client),be=n(22),we=n.n(be),Oe=n(7),Ee=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Se=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},je=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Ae=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(je(arguments[t]));return e},Ie=new r.ConsoleLogger("EventsBuffer"),xe=[429,500],Pe=[202],ke=function(){function e(e,t){this._pause=!1,this._flush=!1,Ie.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return Ie.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.updateClient=function(e){this._client=e},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),r=this._buffer.splice(0,n);this._putEvents(r)}},e.prototype._putEvents=function(e){return Ee(this,void 0,void 0,(function(){var t,n,r,i,o;return Se(this,(function(a){switch(a.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),a.label=1;case 1:return a.trys.push([1,3,,4]),r=new G(n),[4,this._client.send(r)];case 2:return i=a.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return o=a.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}}))}))},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach((function(e){var n=e.params,r=n.event,i=n.timestamp,o=n.config,a=r.name,s=r.attributes,u=r.metrics,c=r.eventId,f=r.session,l=o.appId,d=o.endpointId,p=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||l,p[d]||(p[d]={Endpoint:{},Events:{}}),p[d].Events[c]={EventType:a,Timestamp:new Date(i).toISOString(),Attributes:s,Metrics:u,Session:f}})),t},e.prototype._handlePutEventsFailure=function(e,t){Ie.debug("_putEvents Failed: ",e);var n=e.$metadata&&e.$metadata.httpStatusCode;if(xe.includes(n)){var r=Object.values(t);this._retry(r)}else;},e.prototype._processPutEventsSuccessResponse=function(e,t){var n=e.EventsResponse.Results,r=[];Object.entries(n).forEach((function(e){var n=je(e,2),i=n[0],o=n[1].EventsItemResponse;Object.entries(o).forEach((function(e){var n,o,a=je(e,2),s=a[0],u=a[1],c=u.StatusCode,f=u.Message,l=t[s],d={EventsResponse:{Results:(n={},n[i]={EventsItemResponse:(o={},o[s]={StatusCode:c,Message:f},o)},n)}};if(Pe.includes(c))l.handlers.resolve(d);else{if(!xe.includes(c)){var p=l.params.event.name;return Ie.error("event "+s+" : "+p+" failed with error: "+f),l.handlers.reject(d)}r.push(l)}}))})),r.length&&this._retry(r)},e.prototype._retry=function(e){var t,n=[];e.forEach((function(e){var t,r=e.params,i=r.event,o=i.eventId,a=i.name;if(r.resendLimit-- >0)return Ie.debug("resending event "+o+" : "+a+" with "+r.resendLimit+" retry attempts remaining"),void n.push((t={},t[o]=e,t));Ie.debug("no retry attempts remaining for event "+o+" : "+a)})),(t=this._buffer).unshift.apply(t,Ae(n))},e.prototype._bufferToMap=function(e){return e.reduce((function(e,t){var n=je(Object.entries(t),1),r=je(n[0],2),i=r[0],o=r[1];return e[i]=o,e}),{})},e}();function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ce=function(){return(Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Re=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Te=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ze="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",De=function(e,t){r.Hub.dispatch("analytics",{event:e,data:t},"Analytics",ze)},Le=new r.ConsoleLogger("AWSPinpointProvider"),Ne=[429,500],qe=[202],He="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Be=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=r.ClientDevice.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;Le.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._config.appId&&!this._config.disabled)if(this._config.endpointId)De("pinpointProvider_configured",null);else{var r=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(r).then((function(e){Le.debug("setting endpoint id from the cache",e),t._config.endpointId=e,De("pinpointProvider_configured",null)})).catch((function(e){Le.debug("Failed to generate endpointId",e)}))}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return Re(this,void 0,void 0,(function(){var n,r;return Te(this,(function(i){switch(i.label){case 0:return Le.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._initClients(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=Object(Oe.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(Le.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}}))}))},e.prototype._sendEndpointUpdate=function(e){return Re(this,void 0,void 0,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}}))}))},e.prototype._putToBuffer=function(e,t){"_update_endpoint"!==e.event.name?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||Object(Oe.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=Object(Oe.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case"_session.stop":var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Oe.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||Object(Oe.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return Re(this,void 0,void 0,(function(){return Te(this,(function(n){switch(e.event.name){case"_update_endpoint":return[2,this._updateEndpoint({params:e,handlers:t})];case"_session.stop":return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]}))}))},e.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,i=e.config,o=n.name,a=n.attributes,s=n.metrics,u=n.eventId,c=n.session,f=i.appId,l=i.endpointId,d={ApplicationId:f,EventsRequest:{BatchItem:{}}},p={Endpoint:{}};return p.Events=((t={})[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:a,Metrics:s,Session:c},t),d.EventsRequest.BatchItem[l]=p,d},e.prototype._pinpointPutEvents=function(e,t){return Re(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,f,l,d;return Te(this,(function(p){switch(p.label){case 0:n=e.event.eventId,r=e.config.endpointId,i=this._generateBatchItemContext(e),o=new G(i),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return a=p.sent(),s=r,u=n,c=a.EventsResponse.Results[s].EventsItemResponse[u],f=c.StatusCode,l=c.Message,qe.includes(f)?(Le.debug("record event success. ",a),[2,t.resolve(a)]):Ne.includes(f)?(this._retry(e,t),[3,4]):(Le.error("Event "+n+" is not accepted, the error is "+l),[2,t.reject(a)]);case 3:return d=p.sent(),this._eventError(d),[2,t.reject(d)];case 4:return[2]}}))}))},e.prototype._pinpointSendStopSession=function(e,t){if(He){var n=this._generateBatchItemContext(e),i=this._config.region,o=n.ApplicationId,a=n.EventsRequest,s={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},u="https://pinpoint."+i+".amazonaws.com/v1/apps/"+o+"/events/legacy",c=JSON.stringify(a),f={url:u,body:c,method:"POST"},l={region:i,service:"mobiletargeting"},d=r.Signer.signUrl(f,s,l,null);return navigator.sendBeacon(d,c)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,e.resendLimit-- >0?(Le.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Le.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return Re(this,void 0,void 0,(function(){var t,n,i,o,a,s,u,c,f,l,d,p;return Te(this,(function(h){switch(h.label){case 0:t=e.params,n=e.handlers,i=t.config,o=t.event,a=i.appId,s=i.endpointId,u=this._endpointRequest(i,r.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),c={ApplicationId:a,EndpointId:s,EndpointRequest:u},h.label=1;case 1:return h.trys.push([1,3,,4]),f=new Y(c),[4,this.pinpointClient.send(f)];case 2:return l=h.sent(),Le.debug("updateEndpoint success",l),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(l),[2];case 3:return d=h.sent(),p={err:d,update_params:c,endpointObject:e},[2,this._handleEndpointUpdateFailure(p)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateFailure=function(e){return Re(this,void 0,void 0,(function(){var t,n,r;return Te(this,(function(i){switch(t=e.err,n=e.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Le.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(e)];case 403:return[2,this._handleEndpointUpdateForbidden(e)];default:if(Ne.includes(r))return!0,[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]}))}))},e.prototype._handleEndpointUpdateBadRequest=function(e){return Re(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return Te(this,(function(u){switch(u.label){case 0:if(t=e.err,n=e.update_params,r=e.endpointObject,i=t.message,o=n.ApplicationId,a=n.EndpointRequest,!String(i).startsWith("Exceeded maximum endpoint per user count"))return[2,r.handlers.reject(t)];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(o,a.User.UserId)];case 2:return u.sent(),Le.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(r),[3,4];case 3:return s=u.sent(),Le.warn("Failed to remove unused endpoints with error: "+s),Le.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,r.handlers.reject(s)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,i=t.retryable;if("ExpiredTokenException"!==r&&!i)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),Le.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,n.resendLimit-- >0)return Le.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Le.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Le.error("Initial endpoint update failed. ")},e.prototype._removeUnusedEndpoints=function(e,t){return Re(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,f,l,d,p;return Te(this,(function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),n=new J({ApplicationId:e,UserId:t}),[4,this.pinpointClient.send(n)];case 1:for(r=h.sent(),i=r.EndpointsResponse.Item,Le.debug("get endpoints associated with the userId: "+t+" with data",i),o=i[0],a=1;a<i.length&&(s=Date.parse(o.EffectiveDate),u=Date.parse(i[a].EffectiveDate),!isNaN(s));a++){if(isNaN(u)){o=i[a];break}u<s&&(o=i[a])}c={ApplicationId:e,EndpointId:o.Id,EndpointRequest:{User:{UserId:""}}},h.label=2;case 2:return h.trys.push([2,4,,5]),f=new Y(c),[4,this.pinpointClient.send(f)];case 3:return l=h.sent(),Le.debug("The old endpoint is updated with an empty string for user id"),[2,l];case 4:throw d=h.sent(),Le.debug("Failed to update the endpoint",d),d;case 5:return[3,7];case 6:throw p=h.sent(),Le.debug("Failed to get endpoints associated with the userId: "+t+" with error",p),p;case 7:return[2]}}))}))},e.prototype._initClients=function(e){return Re(this,void 0,void 0,(function(){var t,n;return Te(this,(function(i){return Le.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(Le.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,n=this._config.region,Le.debug("init clients with credentials",e),this.pinpointClient=new me({region:n,credentials:e,customUserAgent:Object(r.getAmplifyUserAgent)()}),this._bufferExists()&&t===e.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])}))}))},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof ke},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new ke(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},e.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},e.prototype._customizePinpointClientReq=function(){},e.prototype._getEndpointId=function(e){return Re(this,void 0,void 0,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return[4,we.a.getItem(e)];case 1:return t=n.sent(),Le.debug("endpointId from cache",t,"type",Me(t)),t||(t=Object(Oe.v1)(),we.a.setItem(e,t)),[2,t]}}))}))},e.prototype._endpointRequest=function(e,t){var n=e.credentials,i=this._clientInfo||{},o=e.clientContext||{},a=e.endpoint||{},s={appVersion:i.appVersion,make:i.make,model:i.model,modelVersion:i.version,platform:i.platform},u=(o.clientId,o.appTitle,o.appVersionName,o.appVersionCode,o.appPackageName,Ue(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),c=t.address?"android"===i.platform?"GCM":"APNS":void 0,f=Ce(Ce(Ce({channelType:c,requestId:Object(Oe.v1)(),effectiveDate:(new Date).toISOString()},a),t),{attributes:Ce(Ce({},a.attributes),t.attributes),demographic:Ce(Ce(Ce(Ce({},s),u),a.demographic),t.demographic),location:Ce(Ce({},a.location),t.location),metrics:Ce(Ce({},a.metrics),t.metrics),user:{userId:t.userId||a.userId||n.identityId,userAttributes:Ce(Ce({},a.userAttributes),t.userAttributes)}}),l=(f.userId,f.userAttributes,f.name,f.session,f.eventId,f.immediate,Ue(f,["userId","userAttributes","name","session","eventId","immediate"]));return r.JS.transferKeyToUpperCase(l,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){Le.error("record event failed.",e),Le.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return Re(this,void 0,void 0,(function(){var e,t;return Te(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r.Credentials.get()];case 1:return(e=n.sent())?(Le.debug("set credentials for analytics",e),[2,r.Credentials.shear(e)]):[2,null];case 2:return t=n.sent(),Le.debug("ensure credentials error",t),[2,null];case 3:return[2]}}))}))},e.category="Analytics",e.providerName="AWSPinpoint",e}(),Fe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},$e=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Fe(arguments[t]));return e},Ke=[],Ve=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){We(e,t).set(n)},e.remove=function(e,t){We(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,$e(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}();function We(e,t){var n=Ke.filter((function(n){return n.context===e&&n.methodName===t}))[0];return n||(n=new Ve(e,t),Ke.push(n)),n}var Ge=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Je=new r.ConsoleLogger("PageViewTracker"),Ze="aws-amplify-analytics-prevUrl",Xe={enable:!1,provider:"AWSPinpoint",getUrl:function(){return r.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},Qe=function(){function e(e,t){Je.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Xe,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem(Ze)===this._config.getUrl()&&(Je.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return Ge(this,void 0,void 0,(function(){var e,t,n,i;return Ye(this,(function(o){switch(o.label){case 0:return r.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Je.debug("not in the supported web enviroment"),[2]);case 1:return n=o.sent(),[3,3];case 2:n=this._config.attributes,o.label=3;case 3:return t=n,i=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:i},this._config.provider).catch((function(e){Je.debug("Failed to record the page view event",e)})),sessionStorage.setItem(Ze,e)),[2]}}))}))},e.prototype._trackFunc=function(){return Ge(this,void 0,void 0,(function(){var e,t,n,i;return Ye(this,(function(o){switch(o.label){case 0:return r.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Je.debug("not in the supported web enviroment"),[2]);case 1:return n=o.sent(),[3,3];case 2:n=this._config.attributes,o.label=3;case 3:return t=n,i=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:i},this._config.provider).catch((function(e){Je.debug("Failed to record the page view event",e)})),sessionStorage.setItem(Ze,e)),[2]}}))}))},e.prototype._pageViewTrackSPA=function(){r.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Ve.add(history,"pushState",this._trackFunc),Ve.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Ve.remove(history,"pushState"),Ve.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Je.debug("not in the supported web enviroment")},e}(),et=r.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,tt=et?et.matches||et.matchesSelector||et.webkitMatchesSelector||et.mozMatchesSelector||et.msMatchesSelector||et.oMatchesSelector:null;function nt(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||rt(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||rt(e,r))return!0}return!1}function rt(e,t){if("string"!=typeof t)return!1;if(tt)return tt.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,i=void 0;i=n[r];r++)if(i===e)return!0;return!1}function it(e,t,n,r,i){void 0===i&&(i={});var o=function(e){var t;if(i.composed&&"function"==typeof e.composedPath)for(var o=e.composedPath(),a=0,s=void 0;s=o[a];a++)1===s.nodeType&&nt(s,n)&&(t=s);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(nt(r,t))return r}(e.target,n,!0);t&&r.call(t,e,t)};return e.addEventListener(t,o,i.useCapture),{destroy:function(){e.removeEventListener(t,o,i.useCapture)}}}var ot,at,st,ut,ct=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ft=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},lt=new r.ConsoleLogger("EventTracker"),dt={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},pt=function(){function e(e,t){r.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},dt,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),lt.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):lt.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(e){t._delegates[e]=it(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()})),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return ct(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return ft(this,(function(c){switch(c.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),i=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach((function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return s=c.sent(),[3,3];case 2:s=this._config.attributes,c.label=3;case 3:return a=s,u=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},a,n),lt.debug("events needed to be recorded",r),lt.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(lt.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:i||"event",attributes:u},this._config.provider).catch((function(t){lt.debug("Failed to record the "+e.type+" event', "+t)})),[2])}}))}))},e}(),ht=pt,vt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},_t=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},gt=new r.ConsoleLogger("SessionTracker"),yt={enable:!1,provider:"AWSPinpoint"},mt=!1,bt=function(){function e(e,t){this._config=Object.assign({},yt,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!r.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return gt.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return gt.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return vt(this,void 0,void 0,(function(){var e,t,n;return _t(this,(function(r){switch(r.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch((function(e){gt.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){gt.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then((function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch((function(e){gt.debug("record session stop event failed.",e)}))}))},e.prototype._sendInitialEvent=function(){return vt(this,void 0,void 0,(function(){var e,t,n;return _t(this,(function(r){switch(r.label){case 0:return mt?(gt.debug("the start session has been sent when the page is loaded"),[2]):(mt=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){gt.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}(),wt=bt,Ot=function(){return(Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Et=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},St=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},jt=new r.ConsoleLogger("AnalyticsClass"),At="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",It={pageView:Qe,event:ht,session:wt},xt=null,Pt=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},xt=this,this.record=this.record.bind(this),r.Hub.listen("auth",Rt),r.Hub.listen("storage",Rt),r.Hub.listen("analytics",Rt),r.Amplify.register(this)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;jt.debug("configure Analytics",e);var n,i,o,a=r.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,a.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach((function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure(Ot({disabled:t._config.disabled},n))})),0===this._pluggables.length&&this.addPluggable(new Be),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),n="configured",i=null,o="The Analytics category has been configured successfully",r.Hub.dispatch("analytics",{event:n,data:i,message:o},"Analytics",At),jt.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=Ot({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return jt.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void jt.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return Et(this,void 0,void 0,(function(){var t;return St(this,(function(n){return t={event:{name:"_session.start"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.stopSession=function(e){return Et(this,void 0,void 0,(function(){var t;return St(this,(function(n){return t={event:{name:"_session.stop"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.record=function(e,t,n){return Et(this,void 0,void 0,(function(){var r;return St(this,(function(i){return r=null,r="string"==typeof e?{event:{name:e,attributes:t,metrics:n},provider:"AWSPinpoint"}:{event:e,provider:t},[2,this._sendEvent(r)]}))}))},e.prototype.updateEndpoint=function(e,t){return Et(this,void 0,void 0,(function(){var n;return St(this,(function(r){return n=Ot(Ot({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]}))}))},e.prototype._sendEvent=function(e){var t=this;if(this._disabled)return jt.debug("Analytics has been disabled"),Promise.resolve();var n=e.provider?e.provider:"AWSPinpoint";return new Promise((function(r,i){t._pluggables.forEach((function(t){t.getProviderName()===n&&t.record(e,{resolve:r,reject:i})}))}))},e.prototype.autoTrack=function(e,t){if(It[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new It[e](this.record,t)}else jt.debug("invalid tracker type")},e}(),kt=!1,Mt=!1,Ct=!1,Rt=function(e){var t=e.channel,n=e.payload;switch(jt.debug("on hub capsule "+t,n),t){case"auth":Ut(n);break;case"storage":Tt(n);break;case"analytics":zt(n)}},Tt=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&Ct&&xt.record({name:"Storage",attributes:n,metrics:r}).catch((function(e){jt.debug("Failed to send the storage event automatically",e)}))},Ut=function(e){var t=e.event;if(t){var n=function(e){return Et(void 0,void 0,void 0,(function(){var t;return St(this,(function(n){switch(n.label){case 0:if(!Mt||!Ct)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,xt.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),jt.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}}))}))};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":(Mt=!0)&&Ct&&Dt()}}},zt=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":Ct=!0,Mt&&Ct&&Dt()}},Dt=function(){var e=xt.configure();!kt&&e.autoSessionRecord&&(xt.updateEndpoint({immediate:!0}).catch((function(e){jt.debug("Failed to update the endpoint",e)})),kt=!0),xt.autoTrack("session",{enable:e.autoSessionRecord})},Lt=new Pt,Nt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,c,f,l,d,p,h,v,_,g,y,m;return Object(i.__generator)(this,(function(b){switch(b.label){case 0:return r=[Object(i.__assign)({},e)],o={},[4,dn(e.body,t)];case 1:switch(n=i.__assign.apply(void 0,r.concat([(o.body=b.sent(),o)])),s="UnknownError",u=n.body.__type.split("#"),s=void 0===u[1]?u[0]:u[1],s){case"InvalidArgumentException":case"com.amazonaws.kinesis.v20131202#InvalidArgumentException":return[3,2];case"KMSAccessDeniedException":case"com.amazonaws.kinesis.v20131202#KMSAccessDeniedException":return[3,4];case"KMSDisabledException":case"com.amazonaws.kinesis.v20131202#KMSDisabledException":return[3,6];case"KMSInvalidStateException":case"com.amazonaws.kinesis.v20131202#KMSInvalidStateException":return[3,8];case"KMSNotFoundException":case"com.amazonaws.kinesis.v20131202#KMSNotFoundException":return[3,10];case"KMSOptInRequired":case"com.amazonaws.kinesis.v20131202#KMSOptInRequired":return[3,12];case"KMSThrottlingException":case"com.amazonaws.kinesis.v20131202#KMSThrottlingException":return[3,14];case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis.v20131202#ProvisionedThroughputExceededException":return[3,16];case"ResourceNotFoundException":case"com.amazonaws.kinesis.v20131202#ResourceNotFoundException":return[3,18]}return[3,20];case 2:return c=[{}],[4,qt(n,t)];case 3:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,c.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 4:return f=[{}],[4,Ht(n,t)];case 5:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,f.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 6:return l=[{}],[4,Bt(n,t)];case 7:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,l.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 8:return d=[{}],[4,Ft(n,t)];case 9:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,d.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 10:return p=[{}],[4,$t(n,t)];case 11:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,p.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 12:return h=[{}],[4,Kt(n,t)];case 13:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,h.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 14:return v=[{}],[4,Vt(n,t)];case 15:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,v.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 16:return _=[{}],[4,Wt(n,t)];case 17:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,_.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 18:return g=[{}],[4,Gt(n,t)];case 19:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,g.concat([b.sent()])),{name:s,$metadata:cn(e)}]),[3,21];case 20:y=n.body,s=y.code||y.Code||s,a=Object(i.__assign)(Object(i.__assign)({},y),{name:""+s,message:y.message||y.Message||s,$fault:"client",$metadata:cn(e)}),b.label=21;case 21:return m=a.message||a.Message||s,a.message=m,delete a.Message,[2,Promise.reject(Object.assign(new Error(m),a))]}}))}))},qt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Zt(n,t),[2,Object(i.__assign)({name:"InvalidArgumentException",$fault:"client",$metadata:cn(e)},r)]}))}))},Ht=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Xt(n,t),[2,Object(i.__assign)({name:"KMSAccessDeniedException",$fault:"client",$metadata:cn(e)},r)]}))}))},Bt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Qt(n,t),[2,Object(i.__assign)({name:"KMSDisabledException",$fault:"client",$metadata:cn(e)},r)]}))}))},Ft=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=en(n,t),[2,Object(i.__assign)({name:"KMSInvalidStateException",$fault:"client",$metadata:cn(e)},r)]}))}))},$t=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=tn(n,t),[2,Object(i.__assign)({name:"KMSNotFoundException",$fault:"client",$metadata:cn(e)},r)]}))}))},Kt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=nn(n,t),[2,Object(i.__assign)({name:"KMSOptInRequired",$fault:"client",$metadata:cn(e)},r)]}))}))},Vt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=rn(n,t),[2,Object(i.__assign)({name:"KMSThrottlingException",$fault:"client",$metadata:cn(e)},r)]}))}))},Wt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=on(n,t),[2,Object(i.__assign)({name:"ProvisionedThroughputExceededException",$fault:"client",$metadata:cn(e)},r)]}))}))},Gt=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=un(n,t),[2,Object(i.__assign)({name:"ResourceNotFoundException",$fault:"client",$metadata:cn(e)},r)]}))}))},Yt=function(e,t){return Object(i.__assign)(Object(i.__assign)({},void 0!==e.Records&&{Records:Jt(e.Records,t)}),void 0!==e.StreamName&&{StreamName:e.StreamName})},Jt=function(e,t){return e.map((function(e){return function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.Data&&{Data:t.base64Encoder(e.Data)}),void 0!==e.ExplicitHashKey&&{ExplicitHashKey:e.ExplicitHashKey}),void 0!==e.PartitionKey&&{PartitionKey:e.PartitionKey})}(e,t)}))},Zt=function(e,t){return{__type:"InvalidArgumentException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},Xt=function(e,t){return{__type:"KMSAccessDeniedException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},Qt=function(e,t){return{__type:"KMSDisabledException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},en=function(e,t){return{__type:"KMSInvalidStateException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},tn=function(e,t){return{__type:"KMSNotFoundException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},nn=function(e,t){return{__type:"KMSOptInRequired",message:void 0!==e.message&&null!==e.message?e.message:void 0}},rn=function(e,t){return{__type:"KMSThrottlingException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},on=function(e,t){return{__type:"ProvisionedThroughputExceededException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},an=function(e,t){return{__type:"PutRecordsOutput",EncryptionType:void 0!==e.EncryptionType&&null!==e.EncryptionType?e.EncryptionType:void 0,FailedRecordCount:void 0!==e.FailedRecordCount&&null!==e.FailedRecordCount?e.FailedRecordCount:void 0,Records:void 0!==e.Records&&null!==e.Records?sn(e.Records,t):void 0}},sn=function(e,t){return(e||[]).map((function(e){return function(e,t){return{__type:"PutRecordsResultEntry",ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,SequenceNumber:void 0!==e.SequenceNumber&&null!==e.SequenceNumber?e.SequenceNumber:void 0,ShardId:void 0!==e.ShardId&&null!==e.ShardId?e.ShardId:void 0}}(e)}))},un=function(e,t){return{__type:"ResourceNotFoundException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},cn=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},fn=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},ln=function(e,t,n,r,a){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var s,u,c,f,l,d;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.endpoint()];case 1:return s=i.sent(),u=s.hostname,c=s.protocol,f=void 0===c?"https":c,l=s.port,d={protocol:f,hostname:u,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==a&&(d.body=a),[2,new o.HttpRequest(d)]}}))}))},dn=function(e,t){return function(e,t){return fn(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},pn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(i.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(W.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"Kinesis_20131202.PutRecords"},r=JSON.stringify(Yt(e,t)),[2,ln(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o;return Object(i.__generator)(this,(function(a){switch(a.label){case 0:return e.statusCode>=400?[2,Nt(e,t)]:[4,dn(e.body,t)];case 1:return n=a.sent(),{},r=an(n,t),o=Object(i.__assign)({$metadata:cn(e),__type:"PutRecordsOutput"},r),[2,Promise.resolve(o)]}}))}))}(e,t)},t}(a.Command),hn=n(27),vn=n(49),_n=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),gn=new Set(["cn-north-1","cn-northwest-1"]),yn=new Set(["us-iso-east-1"]),mn=new Set(["us-isob-east-1"]),bn=new Set(["us-gov-west-1","us-gov-east-1"]),wn={apiVersion:"2013-12-02",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"kinesis.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"kinesis.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"kinesis.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"kinesis.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"kinesis.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"kinesis.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"kinesis.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"kinesis.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"kinesis.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"kinesis.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"kinesis.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"kinesis.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"kinesis.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"kinesis.eu-west-3.amazonaws.com"};break;case"me-south-1":n={hostname:"kinesis.me-south-1.amazonaws.com"};break;case"sa-east-1":n={hostname:"kinesis.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"kinesis.us-east-1.amazonaws.com"};break;case"us-east-2":n={hostname:"kinesis.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"kinesis.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"kinesis.us-gov-west-1.amazonaws.com"};break;case"us-iso-east-1":n={hostname:"kinesis.us-iso-east-1.c2s.ic.gov"};break;case"us-isob-east-1":n={hostname:"kinesis.us-isob-east-1.sc2s.sgov.gov"};break;case"us-west-1":n={hostname:"kinesis.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"kinesis.us-west-2.amazonaws.com"};break;default:_n.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e)}),gn.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com.cn".replace("{region}",e)}),yn.has(e)&&(n={hostname:"kinesis.{region}.c2s.ic.gov".replace("{region}",e)}),mn.has(e)&&(n={hostname:"kinesis.{region}.sc2s.sgov.gov".replace("{region}",e)}),bn.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e)})}return Promise.resolve(n)},signingName:"kinesis"},On=Object(i.__assign)(Object(i.__assign)({},wn),{runtime:"browser",base64Decoder:ne.fromBase64,base64Encoder:ne.toBase64,bodyLengthChecker:re.calculateBodyLength,credentialDefaultProvider:Object(ee.invalidFunction)("Credential is missing"),defaultUserAgent:Object(ie.defaultUserAgent)(hn.a,hn.b),eventStreamSerdeProvider:vn.eventStreamSerdeProvider,regionDefaultProvider:Object(ee.invalidFunction)("Region is missing"),requestHandler:new Q.FetchHttpHandler,sha256:X.Sha256,streamCollector:Q.streamCollector,urlParser:te.parseUrl,utf8Decoder:oe.fromUtf8,utf8Encoder:oe.toUtf8}),En=n(48),Sn=function(e){function t(t){var n=this,r=Object(i.__assign)(Object(i.__assign)({},On),t),o=Object(pe.resolveRegionConfig)(r),a=Object(pe.resolveEndpointsConfig)(o),s=Object(ge.resolveAwsAuthConfig)(a),u=Object(_e.resolveRetryConfig)(s),c=Object(ye.resolveUserAgentConfig)(u),f=Object(ve.resolveHostHeaderConfig)(c),l=Object(En.resolveEventStreamSerdeConfig)(f);return(n=e.call(this,l)||this).config=l,n.middlewareStack.use(Object(ge.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(_e.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(ye.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(he.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(ve.getHostHeaderPlugin)(n.config)),n}return Object(i.__extends)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(a.Client),jn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},An=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},In=new r.ConsoleLogger("AWSKinesisProvider"),xn=function(){function e(e){this._buffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return e.prototype._setupTimer=function(){var e=this;this._timer&&clearInterval(this._timer);var t=this._config,n=t.flushSize,r=t.flushInterval;this._timer=setInterval((function(){for(var t=e._buffer.length<n?e._buffer.length:n,r=[],i=0;i<t;i+=1){var o=e._buffer.shift();r.push(o)}e._sendFromBuffer(r)}),r)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AWSKinesis"},e.prototype.configure=function(e){In.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),this._setupTimer(),this._config},e.prototype.record=function(e){return jn(this,void 0,void 0,(function(){var t;return An(this,(function(n){switch(n.label){case 0:return[4,this._getCredentials()];case 1:return(t=n.sent())?(Object.assign(e,{config:this._config,credentials:t}),[2,this._putToBuffer(e)]):[2,Promise.resolve(!1)]}}))}))},e.prototype.updateEndpoint=function(){return In.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},e.prototype._putToBuffer=function(e){return this._buffer.length<1e3?(this._buffer.push(e),Promise.resolve(!0)):(In.debug("exceed analytics events buffer size"),Promise.reject(!1))},e.prototype._sendFromBuffer=function(e){for(var t=this,n=[],r=null,i=[],o=0;o<e.length;o+=1){var a=e[o].credentials;0===o?(i.push(e[o]),r=a):a.sessionToken===r.sessionToken&&a.identityId===r.identityId?(In.debug("no change for cred, put event in the same group"),i.push(e[o])):(n.push(i),(i=[]).push(e[o]),r=a)}n.push(i),n.map((function(e){t._sendEvents(e)}))},e.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var r=t.data&&"string"!=typeof t.data?JSON.stringify(t.data):t.data,a={Data:Object(oe.fromUtf8)(r),PartitionKey:t.partitionKey||"partition-"+i.identityId};o[n].push(a)})),Object.keys(o).map((function(e){return jn(t,void 0,void 0,(function(){var t,n;return An(this,(function(r){switch(r.label){case 0:In.debug("putting records to kinesis with records",o[e]),r.label=1;case 1:return r.trys.push([1,3,,4]),t=new pn({Records:o[e],StreamName:e}),[4,this._kinesis.send(t)];case 2:return r.sent(),In.debug("Upload records to stream",e),[3,4];case 3:return n=r.sent(),In.debug("Failed to upload records to Kinesis",n),[3,4];case 4:return[2]}}))}))}))}},e.prototype._init=function(e,t){if(In.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return In.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region,r=e.endpoint;return this._initKinesis(n,r,t)},e.prototype._initKinesis=function(e,t,n){return In.debug("initialize kinesis with credentials",n),this._kinesis=new Sn({region:e,credentials:n,customUserAgent:Object(r.getAmplifyUserAgent)(),endpoint:t}),!0},e.prototype._getCredentials=function(){var e=this;return r.Credentials.get().then((function(t){return t?(In.debug("set credentials for analytics",e._config.credentials),r.Credentials.shear(t)):null})).catch((function(e){return In.debug("ensure credentials error",e),null}))},e}(),Pn=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,c,f,l,d,p,h;return Object(i.__generator)(this,(function(v){switch(v.label){case 0:return r=[Object(i.__assign)({},e)],o={},[4,Vn(e.body,t)];case 1:switch(n=i.__assign.apply(void 0,r.concat([(o.body=v.sent(),o)])),s="UnknownError",u=n.body.__type.split("#"),s=void 0===u[1]?u[0]:u[1],s){case"InvalidArgumentException":case"com.amazonaws.firehose.v20150804#InvalidArgumentException":return[3,2];case"InvalidKMSResourceException":case"com.amazonaws.firehose.v20150804#InvalidKMSResourceException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.firehose.v20150804#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.firehose.v20150804#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return c=[{}],[4,kn(n,t)];case 3:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Fn(e)}]),[3,11];case 4:return f=[{}],[4,Mn(n,t)];case 5:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,f.concat([v.sent()])),{name:s,$metadata:Fn(e)}]),[3,11];case 6:return l=[{}],[4,Cn(n,t)];case 7:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Fn(e)}]),[3,11];case 8:return d=[{}],[4,Rn(n,t)];case 9:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Fn(e)}]),[3,11];case 10:p=n.body,s=p.code||p.Code||s,a=Object(i.__assign)(Object(i.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Fn(e)}),v.label=11;case 11:return h=a.message||a.Message||s,a.message=h,delete a.Message,[2,Promise.reject(Object.assign(new Error(h),a))]}}))}))},kn=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Dn(n,t),[2,Object(i.__assign)({name:"InvalidArgumentException",$fault:"client",$metadata:Fn(e)},r)]}))}))},Mn=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Ln(n,t),[2,Object(i.__assign)({name:"InvalidKMSResourceException",$fault:"client",$metadata:Fn(e)},r)]}))}))},Cn=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Hn(n,t),[2,Object(i.__assign)({name:"ResourceNotFoundException",$fault:"client",$metadata:Fn(e)},r)]}))}))},Rn=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){return n=e.body,r=Bn(n,t),[2,Object(i.__assign)({name:"ServiceUnavailableException",$fault:"server",$metadata:Fn(e)},r)]}))}))},Tn=function(e,t){return Object(i.__assign)(Object(i.__assign)({},void 0!==e.DeliveryStreamName&&{DeliveryStreamName:e.DeliveryStreamName}),void 0!==e.Records&&{Records:Un(e.Records,t)})},Un=function(e,t){return e.map((function(e){return zn(e,t)}))},zn=function(e,t){return Object(i.__assign)({},void 0!==e.Data&&{Data:t.base64Encoder(e.Data)})},Dn=function(e,t){return{__type:"InvalidArgumentException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},Ln=function(e,t){return{__type:"InvalidKMSResourceException",code:void 0!==e.code&&null!==e.code?e.code:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},Nn=function(e,t){return{__type:"PutRecordBatchOutput",Encrypted:void 0!==e.Encrypted&&null!==e.Encrypted?e.Encrypted:void 0,FailedPutCount:void 0!==e.FailedPutCount&&null!==e.FailedPutCount?e.FailedPutCount:void 0,RequestResponses:void 0!==e.RequestResponses&&null!==e.RequestResponses?qn(e.RequestResponses,t):void 0}},qn=function(e,t){return(e||[]).map((function(e){return function(e,t){return{__type:"PutRecordBatchResponseEntry",ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,RecordId:void 0!==e.RecordId&&null!==e.RecordId?e.RecordId:void 0}}(e)}))},Hn=function(e,t){return{__type:"ResourceNotFoundException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},Bn=function(e,t){return{__type:"ServiceUnavailableException",message:void 0!==e.message&&null!==e.message?e.message:void 0}},Fn=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},$n=function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))},Kn=function(e,t,n,r,a){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var s,u,c,f,l,d;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.endpoint()];case 1:return s=i.sent(),u=s.hostname,c=s.protocol,f=void 0===c?"https":c,l=s.port,d={protocol:f,hostname:u,port:l,method:"POST",path:n,headers:t},void 0!==r&&(d.hostname=r),void 0!==a&&(d.body=a),[2,new o.HttpRequest(d)]}}))}))},Vn=function(e,t){return $n(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Wn=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(i.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(W.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"Firehose_20150804.PutRecordBatch"},r=JSON.stringify(Tn(e,t)),[2,Kn(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o;return Object(i.__generator)(this,(function(a){switch(a.label){case 0:return e.statusCode>=400?[2,Pn(e,t)]:[4,Vn(e.body,t)];case 1:return n=a.sent(),{},r=Nn(n,t),o=Object(i.__assign)({$metadata:Fn(e),__type:"PutRecordBatchOutput"},r),[2,Promise.resolve(o)]}}))}))}(e,t)},t}(a.Command),Gn=n(28),Yn=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Jn=new Set(["cn-north-1","cn-northwest-1"]),Zn=new Set(["us-iso-east-1"]),Xn=new Set(["us-isob-east-1"]),Qn=new Set(["us-gov-west-1","us-gov-east-1"]),er={apiVersion:"2015-08-04",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"firehose.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"firehose.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"firehose.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"firehose.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"firehose.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"firehose.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"firehose.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"firehose.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"firehose.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"firehose.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"firehose.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"firehose.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"firehose.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"firehose.eu-west-3.amazonaws.com"};break;case"me-south-1":n={hostname:"firehose.me-south-1.amazonaws.com"};break;case"sa-east-1":n={hostname:"firehose.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"firehose.us-east-1.amazonaws.com"};break;case"us-east-2":n={hostname:"firehose.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"firehose.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"firehose.us-gov-west-1.amazonaws.com"};break;case"us-west-1":n={hostname:"firehose.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"firehose.us-west-2.amazonaws.com"};break;default:Yn.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e)}),Jn.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com.cn".replace("{region}",e)}),Zn.has(e)&&(n={hostname:"firehose.{region}.c2s.ic.gov".replace("{region}",e)}),Xn.has(e)&&(n={hostname:"firehose.{region}.sc2s.sgov.gov".replace("{region}",e)}),Qn.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e)})}return Promise.resolve(n)},signingName:"firehose"},tr=Object(i.__assign)(Object(i.__assign)({},er),{runtime:"browser",base64Decoder:ne.fromBase64,base64Encoder:ne.toBase64,bodyLengthChecker:re.calculateBodyLength,credentialDefaultProvider:Object(ee.invalidFunction)("Credential is missing"),defaultUserAgent:Object(ie.defaultUserAgent)(Gn.a,Gn.b),regionDefaultProvider:Object(ee.invalidFunction)("Region is missing"),requestHandler:new Q.FetchHttpHandler,sha256:X.Sha256,streamCollector:Q.streamCollector,urlParser:te.parseUrl,utf8Decoder:oe.fromUtf8,utf8Encoder:oe.toUtf8}),nr=function(e){function t(t){var n=this,r=Object(i.__assign)(Object(i.__assign)({},tr),t),o=Object(pe.resolveRegionConfig)(r),a=Object(pe.resolveEndpointsConfig)(o),s=Object(ge.resolveAwsAuthConfig)(a),u=Object(_e.resolveRetryConfig)(s),c=Object(ye.resolveUserAgentConfig)(u),f=Object(ve.resolveHostHeaderConfig)(c);return(n=e.call(this,f)||this).config=f,n.middlewareStack.use(Object(ge.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(_e.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(ye.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(he.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(ve.getHostHeaderPlugin)(n.config)),n}return Object(i.__extends)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(a.Client),rr=(ot=function(e,t){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ot(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ir=new r.ConsoleLogger("AWSKineisFirehoseProvider"),or=function(e){function t(t){return e.call(this,t)||this}return rr(t,e),t.prototype.getProviderName=function(){return"AWSKinesisFirehose"},t.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName,r=t.data;void 0===o[n]&&(o[n]=[]);var i=r&&"string"!=typeof r?JSON.stringify(r):r,a={Data:Object(oe.fromUtf8)(i)};o[n].push(a)})),Object.keys(o).map((function(e){ir.debug("putting records to kinesis",e,"with records",o[e]),t._kinesisFirehose.send(new Wn({Records:o[e],DeliveryStreamName:e})).then((function(t){return ir.debug("Upload records to stream",e)})).catch((function(e){return ir.debug("Failed to upload records to Kinesis",e)}))}))}},t.prototype._init=function(e,t){if(ir.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return ir.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initFirehose(n,t)},t.prototype._initFirehose=function(e,t){return ir.debug("initialize kinesis firehose with credentials",t),this._kinesisFirehose=new nr({apiVersion:"2015-08-04",region:e,credentials:t}),!0},t}(xn),ar=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o,a,s,u,c,f;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:return r=[Object(i.__assign)({},e)],o={},[4,lr(e.body,t)];case 1:switch(n=i.__assign.apply(void 0,r.concat([(o.body=l.sent(),o)])),s="UnknownError",s=dr(e,n.body),s){case"InvalidInputException":case"com.amazonaws.services.personalize.events.exceptions#InvalidInputException":return[3,2]}return[3,4];case 2:return u=[{}],[4,sr(n,t)];case 3:return a=i.__assign.apply(void 0,[i.__assign.apply(void 0,u.concat([l.sent()])),{name:s,$metadata:cr(e)}]),[3,5];case 4:c=n.body,s=c.code||c.Code||s,a=Object(i.__assign)(Object(i.__assign)({},c),{name:""+s,message:c.message||c.Message||s,$fault:"client",$metadata:cr(e)}),l.label=5;case 5:return f=a.message||a.Message||s,a.message=f,delete a.Message,[2,Promise.reject(Object.assign(new Error(f),a))]}}))}))},sr=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){return t={name:"InvalidInputException",$fault:"client",$metadata:cr(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},ur=function(e,t){return e.map((function(e){return function(e,t){return Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.eventId&&{eventId:e.eventId}),void 0!==e.eventType&&{eventType:e.eventType}),void 0!==e.properties&&{properties:a.LazyJsonString.fromObject(e.properties)}),void 0!==e.sentAt&&{sentAt:Math.round(e.sentAt.getTime()/1e3)})}(e)}))},cr=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},fr=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},lr=function(e,t){return function(e,t){return fr(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},dr=function(e,t){var n,r,i=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,r="x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()===r.toLowerCase()})));return void 0!==o?i(e.headers[o]):void 0!==t.code?i(t.code):void 0!==t.__type?i(t.__type):""},pr=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Object(i.__extends)(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(W.getSerdePlugin)(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.requestHandler;return r.resolve((function(e){return i.handle(e.request,n||{})}),{logger:{}})},t.prototype.serialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,a,s,u,c,f,l;return Object(i.__generator)(this,(function(d){switch(d.label){case 0:return n={"Content-Type":"application/json"},r="/events",a=JSON.stringify(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},void 0!==e.eventList&&{eventList:ur(e.eventList,t)}),void 0!==e.sessionId&&{sessionId:e.sessionId}),void 0!==e.trackingId&&{trackingId:e.trackingId}),void 0!==e.userId&&{userId:e.userId})),[4,t.endpoint()];case 1:return s=d.sent(),u=s.hostname,c=s.protocol,f=void 0===c?"https":c,l=s.port,[2,new o.HttpRequest({protocol:f,hostname:u,port:l,method:"POST",headers:n,path:r,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=400?[2,ar(e,t)]:(n={$metadata:cr(e)},[4,fr(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(a.Command),hr=n(29),vr=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),_r=new Set(["cn-north-1","cn-northwest-1"]),gr=new Set(["us-iso-east-1"]),yr=new Set(["us-isob-east-1"]),mr=new Set(["us-gov-west-1","us-gov-east-1"]),br={apiVersion:"2018-03-22",disableHostPrefix:!1,regionInfoProvider:function(e,t){var n=void 0;return vr.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e)}),_r.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com.cn".replace("{region}",e)}),gr.has(e)&&(n={hostname:"personalize-events.{region}.c2s.ic.gov".replace("{region}",e)}),yr.has(e)&&(n={hostname:"personalize-events.{region}.sc2s.sgov.gov".replace("{region}",e)}),mr.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e)}),Promise.resolve(n)},signingName:"personalize"},wr=Object(i.__assign)(Object(i.__assign)({},br),{runtime:"browser",base64Decoder:ne.fromBase64,base64Encoder:ne.toBase64,bodyLengthChecker:re.calculateBodyLength,credentialDefaultProvider:Object(ee.invalidFunction)("Credential is missing"),defaultUserAgent:Object(ie.defaultUserAgent)(hr.a,hr.b),regionDefaultProvider:Object(ee.invalidFunction)("Region is missing"),requestHandler:new Q.FetchHttpHandler,sha256:X.Sha256,streamCollector:Q.streamCollector,urlParser:te.parseUrl,utf8Decoder:oe.fromUtf8,utf8Encoder:oe.toUtf8}),Or=function(e){function t(t){var n=this,r=Object(i.__assign)(Object(i.__assign)({},wr),t),o=Object(pe.resolveRegionConfig)(r),a=Object(pe.resolveEndpointsConfig)(o),s=Object(ge.resolveAwsAuthConfig)(a),u=Object(_e.resolveRetryConfig)(s),c=Object(ye.resolveUserAgentConfig)(u),f=Object(ve.resolveHostHeaderConfig)(c);return(n=e.call(this,f)||this).config=f,n.middlewareStack.use(Object(ge.getAwsAuthPlugin)(n.config)),n.middlewareStack.use(Object(_e.getRetryPlugin)(n.config)),n.middlewareStack.use(Object(ye.getUserAgentPlugin)(n.config)),n.middlewareStack.use(Object(he.getContentLengthPlugin)(n.config)),n.middlewareStack.use(Object(ve.getHostHeaderPlugin)(n.config)),n}return Object(i.__extends)(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(a.Client),Er=n(5),Sr=(new r.ConsoleLogger("AmazonPersonalizeProvider"),function(){function e(e){void 0===e&&(e=""),this._isBrowser=r.JS.browserOrNode().isBrowser,this._timerKey=Object(Oe.v1)().substr(0,15),this._refreshTimer()}return e.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var e=this;this._timer=setInterval((function(){e._timerKey=Object(Oe.v1)().substr(0,15)}),3e4)},e.prototype.storeValue=function(e,t){var n=new Date,r=new Date;r.setTime(n.getTime()+6048e5),we.a.setItem(this._getCachePrefix(e),t,{expires:r.getTime()})},e.prototype.retrieveValue=function(e){return we.a.getItem(this._getCachePrefix(e))},e.prototype._getCachePrefix=function(e){return this._isBrowser?e+"."+window.location.host:"peronslize"},e.prototype.getTimerKey=function(){return this._timerKey},e.prototype.updateSessionInfo=function(e,t){var n=t.userId,r=t.sessionId;if(this._isRequireNewSession(e,n,r)){var i=Object(Oe.v1)();this.storeValue("_awsct_uid",e),this.storeValue("_awsct_sid",i),t.sessionId=i}else this._isRequireUpdateSessionInfo(e,n,r)&&this.storeValue("_awsct_uid",e);t.userId=e},e.prototype._isRequireUpdateSessionInfo=function(e,t,n){return!Object(Er.isEmpty)(n)&&Object(Er.isEmpty)(t)&&!Object(Er.isEmpty)(e)},e.prototype.retrieveSessionInfo=function(e){var t={};return t.trackingId=e,t.sessionId=this.retrieveValue("_awsct_sid"),t.userId=this.retrieveValue("_awsct_uid"),Object(Er.isEmpty)(t.sessionId)&&(t.sessionId=Object(Oe.v1)(),this.storeValue("_awsct_sid",t.sessionId)),this.storeValue("_awsct",e),t},e.prototype._isRequireNewSession=function(e,t,n){var r=Object(Er.isEmpty)(n),i=Object(Er.isEmpty)(e)&&!Object(Er.isEmpty)(t),o=!Object(Er.isEmpty)(e)&&!Object(Er.isEmpty)(t)&&!Object(Er.isEqual)(e,t);return r||i||o},e}());!function(e){e.PLAY="play",e.PAUSE="pause",e.ENDED="Ended"}(at||(at={})),function(e){e.IFRAME="IFRAME",e.VIDEO="VIDEO",e.AUDIO="AUDIO"}(st||(st={})),function(e){e.PLAY="Play",e.ENDED="Ended",e.PAUSE="Pause",e.TIME_WATCHED="TimeWatched"}(ut||(ut={}));var jr=function(){function e(e,t){var n;this.eventActionMapping=((n={})[ut.ENDED]=this.endedEventAction.bind(this),n[ut.PLAY]=this.playEventAction.bind(this),n[ut.PAUSE]=this.pauseEventAction.bind(this),n);var r=e.eventData;this._params=e,this._mediaElement=document.getElementById(r.properties.domElementId),this._started=!1,this._provider=t,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return e.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(e){var t=this;if(this.listeners.push(e),this.loaded)setTimeout((function(){t.done()}));else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){t.loaded=!0,t.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},e.prototype._iframeMediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(st.IFRAME,ut.TIME_WATCHED)}),3e3),this._youTubeIframeLoader.load((function(t){e._iframePlayer=new t.Player(e._mediaElement.id,{events:{onStateChange:e._onPlayerStateChange.bind(e)}})}))},e.prototype._onPlayerStateChange=function(e){var t={0:ut.ENDED,1:ut.PLAY,2:ut.PAUSE}[e.data];t&&this.eventActionMapping[t](st.IFRAME)},e.prototype._html5MediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(st.VIDEO,ut.TIME_WATCHED)}),3e3),this._mediaElement.addEventListener(at.PLAY,(function(){e.eventActionMapping[ut.PLAY](st.VIDEO)}),!1),this._mediaElement.addEventListener(at.PAUSE,(function(){e.eventActionMapping[ut.PAUSE](st.VIDEO)}),!1),this._mediaElement.addEventListener(at.ENDED,(function(){e.eventActionMapping[ut.ENDED](st.VIDEO)}),!1)},e.prototype.playEventAction=function(e){this._started=!0,this.recordEvent(e,ut.PLAY)},e.prototype.pauseEventAction=function(e){this._started=!1,this.recordEvent(e,ut.PAUSE)},e.prototype.endedEventAction=function(e){this._started=!1,this.recordEvent(e,ut.ENDED)},e.prototype.recordEvent=function(e,t){var n=Object.assign({},this._params),r=n.eventData;r.eventType=t,e===st.VIDEO?(r.properties.timestamp=this._mediaElement.currentTime,r.properties.duration=this._mediaElement.duration):(r.properties.timestamp=this._financial(this._iframePlayer.getCurrentTime()),r.properties.duration=this._financial(this._iframePlayer.getDuration()));var i=parseFloat(r.properties.timestamp)/parseFloat(r.properties.duration);r.properties.eventValue=Number(i.toFixed(4)),delete r.properties.domElementId,this._provider.putToBuffer(n)},e.prototype._financial=function(e){return Number.parseFloat(e).toFixed(4)},e}(),Ar=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ir=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xr=new r.ConsoleLogger("AmazonPersonalizeProvider"),Pr=function(){function e(e){this._buffer=[],this._config=e||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new Sr,Object(Er.isEmpty)(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=r.JS.browserOrNode().isBrowser,this._setupTimer()}return e.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var e=this._config.flushInterval,t=this;this._timer=setInterval((function(){t._sendFromBuffer()}),e)},e.prototype.record=function(e){return Ar(this,void 0,void 0,(function(){var t,n,r,i,o;return Ir(this,(function(a){switch(a.label){case 0:return[4,this._getCredentials()];case 1:return(t=a.sent())?(Object.assign(e,{config:this._config,credentials:t,sentAt:new Date}),n=e.event,r=n.eventType,i=n.properties,"Identify"===r?(this._sessionManager.updateSessionInfo(i&&i.userId?i.userId:"",this._sessionInfo),[2]):(Object(Er.isEmpty)(e.event.userId)||this._sessionManager.updateSessionInfo(e.event.userId,this._sessionInfo),o=this.generateRequestParams(e,this._sessionInfo),"MediaAutoTrack"!==r?[3,7]:this._isBrowser?Object(Er.isEmpty)(Object(Er.get)(o,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,o.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return a.sent()?new jr(o,this):xr.debug("Cannot find the media element."),[3,4];case 3:xr.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),a.label=4;case 4:return[3,6];case 5:xr.debug("MediaAutoTrack only for browser"),a.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(o)]}}))}))},e.prototype.loadElement=function(e){return new Promise((function(t,n){return document.getElementById(e)&&document.getElementById(e).clientHeight?t(!0):n(!0)}))},e.prototype.isElementFullyLoaded=function(e,t,n,r){var i=this;return new Promise((function(o,a){return e(t).then(o).catch((function(s){return r-1>0?(u=n,new Promise((function(e){return setTimeout(e,u)}))).then(i.isElementFullyLoaded.bind(null,e,t,n,r-1)).then(o).catch(a):a(s);var u}))}))},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AmazonPersonalize"},e.prototype.configure=function(e){xr.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),Object(Er.isEmpty)(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},e.prototype.generateRequestParams=function(e,t){var n={},r=e.event,i=r.eventType,o=r.properties;return n.eventData={eventType:i,properties:o},n.sessionInfo=t,n.sentAt=e.sentAt,n.credentials=e.credentials,n.config=e.config,n},e.prototype._sendEvents=function(e){var t=e.length;if(0!==t){var n=e[0],r=n.config,i=n.credentials,o=n.sessionInfo;if(!this._init(r,i))return!1;if(t>0){for(var a=[],s=0;s<t;s+=1){var u=e.shift(),c=this._generateSingleRecordPayload(u,o);a.push(c)}var f={};f.trackingId=o.trackingId,f.sessionId=o.sessionId,f.userId=o.userId,f.eventList=[],a.forEach((function(e){f.eventList.push(e)}));var l=new pr(f);this._personalize.send(l,(function(e){e?xr.debug("Failed to call putEvents in Personalize",e):xr.debug("Put events")}))}}else xr.debug("events array is empty, directly return")},e.prototype.putToBuffer=function(e){return this._buffer.length<this._config.flushSize?this._buffer.push(e):(this._buffer.push(e),this._sendFromBuffer()),Promise.resolve(!0)},e.prototype._sendFromBuffer=function(){var e=this,t=this._buffer.length;if(!(t<=0)){for(var n=[],r=null,i=[],o=0;o<t;o+=1){var a=this._buffer.shift(),s=a.credentials,u=a.sessionInfo;0===o?(i.push(a),r=s):Object(Er.isEqual)(u,this._sessionInfo)&&s.sessionToken===r.sessionToken&&s.identityId===r.identityId?(xr.debug("no change for cred, put event in the same group"),i.push(a)):(n.push(i),(i=[]).push(a),r=s,this._sessionInfo=u)}n.push(i),n.map((function(t){e._sendEvents(t)}))}},e.prototype._generateSingleRecordPayload=function(e,t){var n=e.eventData,r=e.sentAt,i={};return i.sentAt=r,i.properties=n.properties&&JSON.stringify(n.properties),i.eventId=this._sessionManager.getTimerKey()+t.sessionId,i.eventType=n.eventType,i},e.prototype._init=function(e,t){if(xr.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return xr.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return xr.debug("initialize personalize with credentials",t),this._personalize=new Or({region:n,credentials:t,customUserAgent:Object(r.getAmplifyUserAgent)()}),!0},e.prototype._getCredentials=function(){var e=this;return r.Credentials.get().then((function(t){return t?(xr.debug("set credentials for analytics",e._config.credentials),r.Credentials.shear(t)):null})).catch((function(e){return xr.debug("ensure credentials error",e),null}))},e}();t.default=Lt},function(e,t,n){"use strict";n.r(t),n.d(t,"createScope",(function(){return p})),n.d(t,"getSigningKey",(function(){return h})),n.d(t,"clearCredentialCache",(function(){return v})),n.d(t,"SignatureV4",(function(){return A}));var r="X-Amz-Date".toLowerCase(),i=["authorization",r,"date"],o="X-Amz-Signature".toLowerCase(),a="X-Amz-Security-Token".toLowerCase(),s={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},u=/^proxy-/,c=/^sec-/,f="AWS4-HMAC-SHA256-PAYLOAD",l={},d=[];function p(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function h(e,t,n,r,i){var o=n+":"+r+":"+i+":"+t.accessKeyId+":"+t.sessionToken;if(o in l)return l[o];for(d.push(o);d.length>50;)delete l[d.shift()];return l[o]=new Promise((function(a,s){for(var u=Promise.resolve("AWS4"+t.secretAccessKey),c=function(t){(u=u.then((function(n){return r=t,(i=new e(n)).update(r),i.digest();var r,i}))).catch((function(){}))},f=0,d=[n,r,i,"aws4_request"];f<d.length;f++){c(d[f])}u.then(a,(function(e){delete l[o],s(e)}))}))}function v(){d.length=0,Object.keys(l).forEach((function(e){delete l[e]}))}var _=n(0);function g(e,t,n){for(var r=e.headers,i={},o=0,a=Object.keys(r).sort();o<a.length;o++){var f=a[o],l=f.toLowerCase();(l in s||(null==t?void 0:t.has(l))||u.test(l)||c.test(l))&&(!n||n&&!n.has(l))||(i[l]=r[f].trim().replace(/\s+/g," "))}return i}var y=n(23);var m=n(47),b=n(16);function w(e,t){var n=e.headers,r=e.body;return Object(_.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s;return Object(_.__generator)(this,(function(u){switch(u.label){case 0:for(e=0,i=Object.keys(n);e<i.length;e++)if("x-amz-content-sha256"===(o=i[e]).toLowerCase())return[2,n[o]];return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||Object(m.isArrayBuffer)(r)?((a=new t).update(r),s=b.toHex,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[u.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function O(e){var t=e.headers,n=e.query,r=Object(_.__rest)(e,["headers","query"]);return Object(_.__assign)(Object(_.__assign)({},r),{headers:Object(_.__assign)({},t),query:n?E(n):void 0})}function E(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Object(_.__assign)(Object(_.__assign)({},t),((r={})[n]=Array.isArray(i)?Object(_.__spreadArrays)(i):i,r))}),{})}function S(e){e="function"==typeof e.clone?e.clone():O(e);for(var t=0,n=Object.keys(e.headers);t<n.length;t++){var r=n[t];i.indexOf(r.toLowerCase())>-1&&delete e.headers[r]}return e}function j(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var A=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;if(this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,"string"==typeof r){var u=Promise.resolve(r);this.regionProvider=function(){return u}}else this.regionProvider=r;if("object"==typeof n){var c=Promise.resolve(n);this.credentialProvider=function(){return c}}else this.credentialProvider=n}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Object(_.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,f,l,d,h,v,y,m,b,E,j,A,P,k;return Object(_.__generator)(this,(function(M){switch(M.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return n=M.sent(),r=n[0],i=n[1],o=t.signingDate,a=void 0===o?new Date:o,s=t.expiresIn,u=void 0===s?3600:s,c=t.unsignableHeaders,f=t.signableHeaders,l=I(a),d=l.longDate,h=l.shortDate,u>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(v=p(h,r,this.service),y=function(e){for(var t="function"==typeof e.clone?e.clone():O(e),n=t.headers,r=t.query,i=void 0===r?{}:r,o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];"x-amz-"===s.toLowerCase().substr(0,6)&&(i[s]=n[s],delete n[s])}return Object(_.__assign)(Object(_.__assign)({},e),{headers:n,query:i})}(S(e)),i.sessionToken&&(y.query["X-Amz-Security-Token"]=i.sessionToken),y.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",y.query["X-Amz-Credential"]=i.accessKeyId+"/"+v,y.query["X-Amz-Date"]=d,y.query["X-Amz-Expires"]=u.toString(10),m=g(y,c,f),y.query["X-Amz-SignedHeaders"]=x(m),b=y.query,E="X-Amz-Signature",j=this.getSignature,A=[d,v,this.getSigningKey(i,r,h)],P=this.createCanonicalRequest,k=[y,m],[4,w(e,this.sha256)]);case 2:return[4,j.apply(this,A.concat([P.apply(this,k.concat([M.sent()]))]))];case 3:return b[E]=M.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return Object(_.__awaiter)(this,void 0,void 0,(function(){return Object(_.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,a=t.priorSignature;return Object(_.__awaiter)(this,void 0,void 0,(function(){var e,t,i,s,u,c,l,d,h,v;return Object(_.__generator)(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return e=_.sent()[0],t=I(o),i=t.shortDate,s=t.longDate,u=p(i,e,this.service),[4,w({headers:{},body:r},this.sha256)];case 2:return c=_.sent(),(l=new this.sha256).update(n),h=b.toHex,[4,l.digest()];case 3:return d=h.apply(void 0,[_.sent()]),v=[f,s,u,a,d,c].join("\n"),[2,this.signString(v,{signingDate:o})]}}))}))},e.prototype.signString=function(e,t){var n=(void 0===t?{}:t).signingDate,r=void 0===n?new Date:n;return Object(_.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a,s,u,c;return Object(_.__generator)(this,(function(f){switch(f.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return t=f.sent(),n=t[0],i=t[1],o=I(r).shortDate,u=(s=this.sha256).bind,[4,this.getSigningKey(i,n,o)];case 2:return(a=new(u.apply(s,[void 0,f.sent()]))).update(e),c=b.toHex,[4,a.digest()];case 3:return[2,c.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,i=n.signingDate,o=void 0===i?new Date:i,s=n.signableHeaders,u=n.unsignableHeaders;return Object(_.__awaiter)(this,void 0,void 0,(function(){var t,n,i,c,f,l,d,h,v,y,m;return Object(_.__generator)(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.regionProvider(),this.credentialProvider()])];case 1:return t=_.sent(),n=t[0],i=t[1],c=S(e),f=I(o),l=f.longDate,d=f.shortDate,h=p(d,n,this.service),c.headers[r]=l,i.sessionToken&&(c.headers[a]=i.sessionToken),[4,w(c,this.sha256)];case 2:return v=_.sent(),!function(e,t){e=e.toLowerCase();for(var n=0,r=Object.keys(t);n<r.length;n++){if(e===r[n].toLowerCase())return!0}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=v),y=g(c,u,s),[4,this.getSignature(l,h,this.getSigningKey(i,n,d),this.createCanonicalRequest(c,y,v))];case 3:return m=_.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+i.accessKeyId+"/"+h+", SignedHeaders="+x(y)+", Signature="+m,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){for(var t=e.query,n=void 0===t?{}:t,r=[],i={},a=function(e){if(e.toLowerCase()===o)return"continue";r.push(e);var t=n[e];"string"==typeof t?i[e]=Object(y.escapeUri)(e)+"="+Object(y.escapeUri)(t):Array.isArray(t)&&(i[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Object(y.escapeUri)(e)+"="+Object(y.escapeUri)(n)])}),[]).join("&"))},s=0,u=Object.keys(n).sort();s<u.length;s++){a(u[s])}return r.map((function(e){return i[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Object(_.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(_.__generator)(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+Object(b.toHex)(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Object(_.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(_.__generator)(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),s=(a=this.sha256).bind,[4,n];case 2:return(o=new(s.apply(a,[void 0,c.sent()]))).update(i),u=b.toHex,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n){return h(this.sha256,e,n,t,this.service)},e}();function I(e){var t=j(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}}function x(e){return Object.keys(e).sort().join(";")}}])}));
//# sourceMappingURL=aws-amplify-analytics.min.js.map