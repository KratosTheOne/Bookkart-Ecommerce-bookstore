{"ast":null,"code":"var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport { browserOrNode, isWebWorker } from '@aws-amplify/core';\nimport Observable from 'zen-observable-ts';\n\nvar ReachabilityNavigator =\n/** @class */\nfunction () {\n  function ReachabilityNavigator() {}\n\n  ReachabilityNavigator.prototype.networkMonitor = function (netInfo) {\n    if (browserOrNode().isNode) {\n      return Observable.from([{\n        online: true\n      }]);\n    }\n\n    var globalObj = isWebWorker() ? self : window;\n    return new Observable(function (observer) {\n      observer.next({\n        online: globalObj.navigator.onLine\n      });\n\n      var notifyOnline = function notifyOnline() {\n        return observer.next({\n          online: true\n        });\n      };\n\n      var notifyOffline = function notifyOffline() {\n        return observer.next({\n          online: false\n        });\n      };\n\n      globalObj.addEventListener('online', notifyOnline);\n      globalObj.addEventListener('offline', notifyOffline);\n\n      ReachabilityNavigator._observers.push(observer);\n\n      return function () {\n        globalObj.removeEventListener('online', notifyOnline);\n        globalObj.removeEventListener('offline', notifyOffline);\n        ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) {\n          return _observer !== observer;\n        });\n      };\n    });\n  }; // expose observers to simulate offline mode for integration testing\n\n\n  ReachabilityNavigator._observerOverride = function (status) {\n    var e_1, _a;\n\n    var _loop_1 = function _loop_1(observer) {\n      if (observer.closed) {\n        ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) {\n          return _observer !== observer;\n        });\n        return \"continue\";\n      }\n\n      observer.next(status);\n    };\n\n    try {\n      for (var _b = __values(ReachabilityNavigator._observers), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var observer = _c.value;\n\n        _loop_1(observer);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  ReachabilityNavigator._observers = [];\n  return ReachabilityNavigator;\n}();\n\nexport default ReachabilityNavigator;","map":{"version":3,"sources":["../../src/Util/Reachability.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,SAAS,aAAT,EAAwB,WAAxB,QAA2C,mBAA3C;AACA,OAAO,UAAP,MAA0C,mBAA1C;;AAMA,IAAA,qBAAA;AAAA;AAAA,YAAA;AAAA,WAAA,qBAAA,GAAA,CA8CC;;AAzCA,EAAA,qBAAA,CAAA,SAAA,CAAA,cAAA,GAAA,UAAe,OAAf,EAA4B;AAC3B,QAAI,aAAa,GAAG,MAApB,EAA4B;AAC3B,aAAO,UAAU,CAAC,IAAX,CAAgB,CAAC;AAAE,QAAA,MAAM,EAAE;AAAV,OAAD,CAAhB,CAAP;AACA;;AAED,QAAM,SAAS,GAAG,WAAW,KAAK,IAAL,GAAY,MAAzC;AAEA,WAAO,IAAI,UAAJ,CAAe,UAAA,QAAA,EAAQ;AAC7B,MAAA,QAAQ,CAAC,IAAT,CAAc;AAAE,QAAA,MAAM,EAAE,SAAS,CAAC,SAAV,CAAoB;AAA9B,OAAd;;AAEA,UAAM,YAAY,GAAG,SAAf,YAAe,GAAA;AAAM,eAAA,QAAQ,CAAC,IAAT,CAAc;AAAE,UAAA,MAAM,EAAtB;AAAc,SAAd,CAAA;AAA+B,OAA1D;;AACA,UAAM,aAAa,GAAG,SAAhB,aAAgB,GAAA;AAAM,eAAA,QAAQ,CAAC,IAAT,CAAc;AAAE,UAAA,MAAM,EAAtB;AAAc,SAAd,CAAA;AAAgC,OAA5D;;AAEA,MAAA,SAAS,CAAC,gBAAV,CAA2B,QAA3B,EAAqC,YAArC;AACA,MAAA,SAAS,CAAC,gBAAV,CAA2B,SAA3B,EAAsC,aAAtC;;AAEA,MAAA,qBAAqB,CAAC,UAAtB,CAAiC,IAAjC,CAAsC,QAAtC;;AAEA,aAAO,YAAA;AACN,QAAA,SAAS,CAAC,mBAAV,CAA8B,QAA9B,EAAwC,YAAxC;AACA,QAAA,SAAS,CAAC,mBAAV,CAA8B,SAA9B,EAAyC,aAAzC;AAEA,QAAA,qBAAqB,CAAC,UAAtB,GAAmC,qBAAqB,CAAC,UAAtB,CAAiC,MAAjC,CAClC,UAAA,SAAA,EAAS;AAAI,iBAAA,SAAS,KAAT,QAAA;AAAsB,SADD,CAAnC;AAGA,OAPD;AAQA,KAnBM,CAAP;AAoBA,GA3BD,CALD,CAkCC;;;AACe,EAAA,qBAAA,CAAA,iBAAA,GAAf,UAAiC,MAAjC,EAAsD;;;mCAC1C,Q,EAAQ;AAClB,UAAI,QAAQ,CAAC,MAAb,EAAqB;AACpB,QAAA,qBAAqB,CAAC,UAAtB,GAAmC,qBAAqB,CAAC,UAAtB,CAAiC,MAAjC,CAClC,UAAA,SAAA,EAAS;AAAI,iBAAA,SAAS,KAAT,QAAA;AAAsB,SADD,CAAnC;;AAIA;;AACD,MAAA,QAAQ,CAAC,IAAT,CAAc,MAAd;;;;AAPD,WAAuB,IAAA,EAAA,GAAA,QAAA,CAAA,qBAAqB,CAAC,UAAtB,CAAA,EAAgC,EAAA,GAAA,EAAA,CAAA,IAAA,EAAvD,EAAuD,CAAA,EAAA,CAAA,IAAvD,EAAuD,EAAA,GAAA,EAAA,CAAA,IAAA,EAAvD,EAAuD;AAAlD,YAAM,QAAQ,GAAA,EAAA,CAAA,KAAd;;gBAAM,Q;AAQV;;;;;;;;;;;;AACD,GAVc;;AAlCA,EAAA,qBAAA,CAAA,UAAA,GAEX,EAFW;AA6ChB,SAAA,qBAAA;AAAC,CA9CD,EAAA;;eAAqB,qB","sourceRoot":"","sourcesContent":["var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { browserOrNode, isWebWorker } from '@aws-amplify/core';\nimport Observable from 'zen-observable-ts';\nvar ReachabilityNavigator = /** @class */ (function () {\n    function ReachabilityNavigator() {\n    }\n    ReachabilityNavigator.prototype.networkMonitor = function (netInfo) {\n        if (browserOrNode().isNode) {\n            return Observable.from([{ online: true }]);\n        }\n        var globalObj = isWebWorker() ? self : window;\n        return new Observable(function (observer) {\n            observer.next({ online: globalObj.navigator.onLine });\n            var notifyOnline = function () { return observer.next({ online: true }); };\n            var notifyOffline = function () { return observer.next({ online: false }); };\n            globalObj.addEventListener('online', notifyOnline);\n            globalObj.addEventListener('offline', notifyOffline);\n            ReachabilityNavigator._observers.push(observer);\n            return function () {\n                globalObj.removeEventListener('online', notifyOnline);\n                globalObj.removeEventListener('offline', notifyOffline);\n                ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) { return _observer !== observer; });\n            };\n        });\n    };\n    // expose observers to simulate offline mode for integration testing\n    ReachabilityNavigator._observerOverride = function (status) {\n        var e_1, _a;\n        var _loop_1 = function (observer) {\n            if (observer.closed) {\n                ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) { return _observer !== observer; });\n                return \"continue\";\n            }\n            observer.next(status);\n        };\n        try {\n            for (var _b = __values(ReachabilityNavigator._observers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var observer = _c.value;\n                _loop_1(observer);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    ReachabilityNavigator._observers = [];\n    return ReachabilityNavigator;\n}());\nexport default ReachabilityNavigator;\n//# sourceMappingURL=Reachability.js.map"]},"metadata":{},"sourceType":"module"}