{"ast":null,"code":"import { __assign } from \"tslib\";\nexport function resolveBucketEndpointConfig(input) {\n  var _a = input.bucketEndpoint,\n      bucketEndpoint = _a === void 0 ? false : _a,\n      _b = input.forcePathStyle,\n      forcePathStyle = _b === void 0 ? false : _b,\n      _c = input.useAccelerateEndpoint,\n      useAccelerateEndpoint = _c === void 0 ? false : _c,\n      _d = input.useDualstackEndpoint,\n      useDualstackEndpoint = _d === void 0 ? false : _d,\n      _e = input.useArnRegion,\n      useArnRegion = _e === void 0 ? false : _e;\n  return __assign(__assign({}, input), {\n    bucketEndpoint: bucketEndpoint,\n    forcePathStyle: forcePathStyle,\n    useAccelerateEndpoint: useAccelerateEndpoint,\n    useDualstackEndpoint: useDualstackEndpoint,\n    useArnRegion: typeof useArnRegion === \"function\" ? useArnRegion : function () {\n      return Promise.resolve(useArnRegion);\n    }\n  });\n}\nexport var NODE_USE_ARN_REGION_ENV_NAME = \"AWS_S3_USE_ARN_REGION\";\nexport var NODE_USE_ARN_REGION_INI_NAME = \"s3_use_arn_region\";\n/**\n * Config to load useArnRegion from environment variables and shared INI files\n *\n * @api private\n */\n\nexport var NODE_USE_ARN_REGION_CONFIG_OPTIONS = {\n  environmentVariableSelector: function (env) {\n    if (!Object.prototype.hasOwnProperty.call(env, NODE_USE_ARN_REGION_ENV_NAME)) return undefined;\n    if (env[NODE_USE_ARN_REGION_ENV_NAME] === \"true\") return true;\n    if (env[NODE_USE_ARN_REGION_ENV_NAME] === \"false\") return false;\n    throw new Error(\"Cannot load env \" + NODE_USE_ARN_REGION_ENV_NAME + \". Expected \\\"true\\\" or \\\"false\\\", got \" + env[NODE_USE_ARN_REGION_ENV_NAME] + \".\");\n  },\n  configFileSelector: function (profile) {\n    if (!Object.prototype.hasOwnProperty.call(profile, NODE_USE_ARN_REGION_INI_NAME)) return undefined;\n    if (profile[NODE_USE_ARN_REGION_INI_NAME] === \"true\") return true;\n    if (profile[NODE_USE_ARN_REGION_INI_NAME] === \"false\") return false;\n    throw new Error(\"Cannot load shared config entry \" + NODE_USE_ARN_REGION_INI_NAME + \". Expected \\\"true\\\" or \\\"false\\\", got \" + profile[NODE_USE_ARN_REGION_INI_NAME] + \".\");\n  },\n  default: false\n};","map":{"version":3,"sources":["../../src/configurations.ts"],"names":[],"mappings":";AA2CA,OAAM,SAAU,2BAAV,CACJ,KADI,EACqD;AAGvD,MAAA,EAAA,GAKE,KAAK,CALe,cAAtB;AAAA,MAAA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAAtB;AAAA,MACA,EAAA,GAIE,KAAK,CAJe,cADtB;AAAA,MACA,cAAc,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EADtB;AAAA,MAEA,EAAA,GAGE,KAAK,CAHsB,qBAF7B;AAAA,MAEA,qBAAqB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAF7B;AAAA,MAGA,EAAA,GAEE,KAAK,CAFqB,oBAH5B;AAAA,MAGA,oBAAoB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAH5B;AAAA,MAIA,EAAA,GACE,KAAK,CADa,YAJpB;AAAA,MAIA,YAAY,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAH,GAAQ,EAJpB;AAMF,SAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACK,KADL,CAAA,EACU;AACR,IAAA,cAAc,EAAA,cADN;AAER,IAAA,cAAc,EAAA,cAFN;AAGR,IAAA,qBAAqB,EAAA,qBAHb;AAIR,IAAA,oBAAoB,EAAA,oBAJZ;AAKR,IAAA,YAAY,EAAE,OAAO,YAAP,KAAwB,UAAxB,GAAqC,YAArC,GAAoD,YAAA;AAAM,aAAA,OAAO,CAAC,OAAR,CAAA,YAAA,CAAA;AAA6B;AAL7F,GADV,CAAA;AAQD;AAED,OAAO,IAAM,4BAA4B,GAAG,uBAArC;AACP,OAAO,IAAM,4BAA4B,GAAG,mBAArC;AAEP;;;;AAIG;;AACH,OAAO,IAAM,kCAAkC,GAAmC;AAChF,EAAA,2BAA2B,EAAE,UAAC,GAAD,EAAuB;AAClD,QAAI,CAAC,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,GAArC,EAA0C,4BAA1C,CAAL,EAA8E,OAAO,SAAP;AAC9E,QAAI,GAAG,CAAC,4BAAD,CAAH,KAAsC,MAA1C,EAAkD,OAAO,IAAP;AAClD,QAAI,GAAG,CAAC,4BAAD,CAAH,KAAsC,OAA1C,EAAmD,OAAO,KAAP;AACnD,UAAM,IAAI,KAAJ,CACJ,qBAAmB,4BAAnB,GAA+C,wCAA/C,GAAoF,GAAG,CAAC,4BAAD,CAAvF,GAAqH,GADjH,CAAN;AAGD,GAR+E;AAShF,EAAA,kBAAkB,EAAE,UAAC,OAAD,EAAQ;AAC1B,QAAI,CAAC,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,OAArC,EAA8C,4BAA9C,CAAL,EAAkF,OAAO,SAAP;AAClF,QAAI,OAAO,CAAC,4BAAD,CAAP,KAA0C,MAA9C,EAAsD,OAAO,IAAP;AACtD,QAAI,OAAO,CAAC,4BAAD,CAAP,KAA0C,OAA9C,EAAuD,OAAO,KAAP;AACvD,UAAM,IAAI,KAAJ,CACJ,qCAAmC,4BAAnC,GAA+D,wCAA/D,GAAoG,OAAO,CAAC,4BAAD,CAA3G,GAAyI,GADrI,CAAN;AAGD,GAhB+E;AAiBhF,EAAA,OAAO,EAAE;AAjBuE,CAA3E","sourcesContent":["import { LoadedConfigSelectors } from \"@aws-sdk/node-config-provider\";\nimport { Provider, RegionInfoProvider } from \"@aws-sdk/types\";\n\nexport interface BucketEndpointInputConfig {\n  /**\n   * Whether the provided endpoint addresses an individual bucket.\n   */\n  bucketEndpoint?: boolean;\n  /**\n   * Whether to force path style URLs for S3 objects (e.g., https://s3.amazonaws.com/<bucketName>/<key> instead of https://<bucketName>.s3.amazonaws.com/<key>\n   */\n  forcePathStyle?: boolean;\n  /**\n   * Whether to use the S3 Transfer Acceleration endpoint by default\n   */\n  useAccelerateEndpoint?: boolean;\n  /**\n   * Enables IPv6/IPv4 dualstack endpoint. When a DNS lookup is performed on an endpoint of this type, it returns an “A” record with an IPv4 address and an “AAAA” record with an IPv6 address. In most cases the network stack in the client environment will automatically prefer the AAAA record and make a connection using the IPv6 address. Note, however, that currently on Windows, the IPv4 address will be preferred.\n   */\n  useDualstackEndpoint?: boolean;\n  /**\n   * Whether to override the request region with the region inferred from requested resource's ARN. Defaults to false\n   */\n  useArnRegion?: boolean | Provider<boolean>;\n}\n\ninterface PreviouslyResolved {\n  isCustomEndpoint: boolean;\n  region: Provider<string>;\n  regionInfoProvider: RegionInfoProvider;\n}\n\nexport interface BucketEndpointResolvedConfig {\n  isCustomEndpoint: boolean;\n  bucketEndpoint: boolean;\n  forcePathStyle: boolean;\n  useAccelerateEndpoint: boolean;\n  useDualstackEndpoint: boolean;\n  useArnRegion: Provider<boolean>;\n  region: Provider<string>;\n  regionInfoProvider: RegionInfoProvider;\n}\n\nexport function resolveBucketEndpointConfig<T>(\n  input: T & PreviouslyResolved & BucketEndpointInputConfig\n): T & BucketEndpointResolvedConfig {\n  const {\n    bucketEndpoint = false,\n    forcePathStyle = false,\n    useAccelerateEndpoint = false,\n    useDualstackEndpoint = false,\n    useArnRegion = false,\n  } = input;\n  return {\n    ...input,\n    bucketEndpoint,\n    forcePathStyle,\n    useAccelerateEndpoint,\n    useDualstackEndpoint,\n    useArnRegion: typeof useArnRegion === \"function\" ? useArnRegion : () => Promise.resolve(useArnRegion),\n  };\n}\n\nexport const NODE_USE_ARN_REGION_ENV_NAME = \"AWS_S3_USE_ARN_REGION\";\nexport const NODE_USE_ARN_REGION_INI_NAME = \"s3_use_arn_region\";\n\n/**\n * Config to load useArnRegion from environment variables and shared INI files\n *\n * @api private\n */\nexport const NODE_USE_ARN_REGION_CONFIG_OPTIONS: LoadedConfigSelectors<boolean> = {\n  environmentVariableSelector: (env: NodeJS.ProcessEnv) => {\n    if (!Object.prototype.hasOwnProperty.call(env, NODE_USE_ARN_REGION_ENV_NAME)) return undefined;\n    if (env[NODE_USE_ARN_REGION_ENV_NAME] === \"true\") return true;\n    if (env[NODE_USE_ARN_REGION_ENV_NAME] === \"false\") return false;\n    throw new Error(\n      `Cannot load env ${NODE_USE_ARN_REGION_ENV_NAME}. Expected \"true\" or \"false\", got ${env[NODE_USE_ARN_REGION_ENV_NAME]}.`\n    );\n  },\n  configFileSelector: (profile) => {\n    if (!Object.prototype.hasOwnProperty.call(profile, NODE_USE_ARN_REGION_INI_NAME)) return undefined;\n    if (profile[NODE_USE_ARN_REGION_INI_NAME] === \"true\") return true;\n    if (profile[NODE_USE_ARN_REGION_INI_NAME] === \"false\") return false;\n    throw new Error(\n      `Cannot load shared config entry ${NODE_USE_ARN_REGION_INI_NAME}. Expected \"true\" or \"false\", got ${profile[NODE_USE_ARN_REGION_INI_NAME]}.`\n    );\n  },\n  default: false,\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}