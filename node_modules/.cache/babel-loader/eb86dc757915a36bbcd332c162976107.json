{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { r as registerInstance, h } from './index-82dae9d1.js';\nimport { ConsoleLogger, I18n } from '@aws-amplify/core';\nimport { A as AuthState } from './auth-types-78df304e.js';\nimport { T as Translations } from './Translations-baba3f2c.js';\nimport { N as NO_AUTH_MODULE_FOUND, h as AUTH_SOURCE_KEY } from './constants-3e1b5fcc.js';\nimport { Auth } from '@aws-amplify/auth';\nimport { d as dispatchAuthStateChangeEvent } from './helpers-9dae6f2a.js';\nvar logger = new ConsoleLogger('amplify-amazon-button');\n\nvar AmplifyAmazonButton =\n/** @class */\nfunction () {\n  function AmplifyAmazonButton(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /** Auth state change handler for this component\n     * e.g. SignIn -> 'Create Account' link -> SignUp\n     */\n\n    this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n\n    this.federatedSignIn = function (response) {\n      var access_token = response.access_token,\n          expires_in = response.expires_in;\n\n      if (!access_token) {\n        return;\n      }\n\n      if (!Auth || typeof Auth.federatedSignIn !== 'function' || typeof Auth.currentAuthenticatedUser !== 'function') {\n        throw new Error(NO_AUTH_MODULE_FOUND);\n      }\n\n      var date = new Date();\n      var expires_at = expires_in * 1000 + date.getTime();\n      window['amazon'].Login.retrieveProfile(function (userInfo) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var user, authenticatedUser;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                if (!userInfo.success) {\n                  return [2\n                  /*return*/\n                  , logger.debug('Get user Info failed')];\n                }\n\n                user = {\n                  name: userInfo.profile.Name,\n                  email: userInfo.profile.PrimaryEmail\n                };\n                return [4\n                /*yield*/\n                , Auth.federatedSignIn('amazon', {\n                  token: access_token,\n                  expires_at: expires_at\n                }, user)];\n\n              case 1:\n                _a.sent();\n\n                return [4\n                /*yield*/\n                , Auth.currentAuthenticatedUser()];\n\n              case 2:\n                authenticatedUser = _a.sent();\n                this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      });\n    };\n  }\n  /**\n   * @see https://developer.amazon.com/docs/login-with-amazon/install-sdk-javascript.html\n   */\n\n\n  AmplifyAmazonButton.prototype.signInWithAmazon = function (event) {\n    var _this = this;\n\n    event.preventDefault();\n    window['amazon'].Login.setClientId(this.clientId);\n    window['amazon'].Login.authorize({\n      scope: 'profile'\n    }, function (response) {\n      if (response.error) {\n        return logger.debug('Failed to login with amazon: ' + response.error);\n      }\n\n      try {\n        window.localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify({\n          provider: 'amazon'\n        }));\n      } catch (e) {\n        logger.debug('Failed to cache auth source into localStorage', e);\n      }\n\n      _this.federatedSignIn(response);\n    });\n  };\n\n  AmplifyAmazonButton.prototype.render = function () {\n    var _this = this;\n\n    return h(\"amplify-sign-in-button\", {\n      onClick: function onClick(event) {\n        return _this.signInWithAmazon(event);\n      },\n      provider: \"amazon\"\n    }, h(\"script\", {\n      src: \"https://assets.loginwithamazon.com/sdk/na/login1.js\"\n    }), I18n.get(Translations.SIGN_IN_WITH_AMAZON));\n  };\n\n  return AmplifyAmazonButton;\n}();\n\nvar logger$1 = new ConsoleLogger('amplify-auth0-button');\n\nvar AmplifyAuth0Button =\n/** @class */\nfunction () {\n  function AmplifyAuth0Button(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /** Auth state change handler for this component */\n\n    this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n\n    this.handleLoad = function () {\n      // @ts-ignore Property 'auth0' does not exist on type '{}'.\n      var _a = Auth.configure({}).oauth,\n          oauth = _a === void 0 ? {} : _a; // @ts-ignore Property 'auth0' does not exist on type '{}'.\n\n      var _b = _this.config,\n          config = _b === void 0 ? oauth.auth0 : _b;\n\n      if (!config) {\n        logger$1.debug('Auth0 is not configured');\n        return;\n      }\n\n      logger$1.debug('auth0 configuration', config);\n\n      if (!_this._auth0) {\n        _this._auth0 = new window['auth0'].WebAuth(config);\n      }\n\n      _this._auth0.parseHash(function (err, authResult) {\n        if (err) {\n          logger$1.debug('Failed to parse the url for Auth0', err);\n          return;\n        }\n\n        if (!authResult) {\n          logger$1.debug('Auth0 found no authResult in hash');\n          return;\n        }\n\n        var payload = {\n          provider: 'auth0',\n          opts: {\n            returnTo: config.returnTo,\n            clientID: config.clientID,\n            federated: config.federated\n          }\n        };\n\n        try {\n          localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify(payload));\n        } catch (e) {\n          logger$1.debug('Failed to cache auth source into localStorage', e);\n        }\n\n        _this._auth0.client.userInfo(authResult.accessToken, function (err, user) {\n          return __awaiter(_this, void 0, void 0, function () {\n            var username, email, authenticatedUser;\n            return __generator(this, function (_a) {\n              switch (_a.label) {\n                case 0:\n                  username = undefined;\n                  email = undefined;\n\n                  if (err) {\n                    logger$1.debug('Failed to get the user info', err);\n                  } else {\n                    username = user.name;\n                    email = user.email;\n                  }\n\n                  return [4\n                  /*yield*/\n                  , Auth.federatedSignIn(config.domain, {\n                    token: authResult.idToken,\n                    expires_at: authResult.expiresIn * 1000 + new Date().getTime()\n                  }, {\n                    name: username,\n                    email: email\n                  })];\n\n                case 1:\n                  _a.sent();\n\n                  return [4\n                  /*yield*/\n                  , Auth.currentAuthenticatedUser()];\n\n                case 2:\n                  authenticatedUser = _a.sent();\n                  this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                  return [2\n                  /*return*/\n                  ];\n              }\n            });\n          });\n        });\n      });\n    };\n  }\n\n  AmplifyAuth0Button.prototype.signInWithAuth0 = function (event) {\n    event.preventDefault();\n\n    if (!this._auth0) {\n      throw new Error('the auth0 client is not configured');\n    }\n\n    this._auth0.authorize();\n  };\n\n  AmplifyAuth0Button.prototype.render = function () {\n    var _this = this;\n\n    return h(\"amplify-sign-in-button\", {\n      onClick: function onClick(event) {\n        return _this.signInWithAuth0(event);\n      },\n      provider: \"auth0\"\n    }, h(\"script\", {\n      onLoad: this.handleLoad,\n      src: \"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js\"\n    }), I18n.get(Translations.SIGN_IN_WITH_AUTH0));\n  };\n\n  return AmplifyAuth0Button;\n}();\n\nvar logger$2 = new ConsoleLogger('amplify-facebook-button');\n\nvar AmplifyFacebookButton =\n/** @class */\nfunction () {\n  function AmplifyFacebookButton(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /** Auth state change handler for this component\n     * e.g. SignIn -> 'Create Account' link -> SignUp\n     */\n\n    this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n\n    this.federatedSignIn = function (authResponse) {\n      var accessToken = authResponse.accessToken,\n          expiresIn = authResponse.expiresIn;\n\n      if (!accessToken) {\n        return;\n      }\n\n      if (!Auth || typeof Auth.federatedSignIn !== 'function' || typeof Auth.currentAuthenticatedUser !== 'function') {\n        throw new Error(NO_AUTH_MODULE_FOUND);\n      }\n\n      var date = new Date();\n      var expires_at = expiresIn * 1000 + date.getTime();\n      var fields = 'name,email';\n      window['FB'].api('/me', {\n        fields: fields\n      }, function (response) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var user, authenticatedUser;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                user = {\n                  name: response.name,\n                  email: response.email\n                };\n                return [4\n                /*yield*/\n                , Auth.federatedSignIn('facebook', {\n                  token: accessToken,\n                  expires_at: expires_at\n                }, user)];\n\n              case 1:\n                _a.sent();\n\n                return [4\n                /*yield*/\n                , Auth.currentAuthenticatedUser()];\n\n              case 2:\n                authenticatedUser = _a.sent();\n                this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                return [2\n                /*return*/\n                ];\n            }\n          });\n        });\n      });\n    };\n\n    this.getLoginStatus = function () {\n      window['FB'].getLoginStatus(function (response) {\n        try {\n          window.localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify({\n            provider: 'facebook'\n          }));\n        } catch (e) {\n          logger$2.debug('Failed to cache auth source into localStorage', e);\n        }\n\n        if (response.status === 'connected') {\n          return _this.federatedSignIn(response.authResponse);\n        }\n\n        _this.login();\n      });\n    };\n\n    this.login = function () {\n      var scope = 'public_profile,email';\n      window['FB'].login(function (response) {\n        if (response && response.authResponse) {\n          _this.federatedSignIn(response.authResponse);\n        }\n      }, {\n        scope: scope\n      });\n    };\n  }\n  /**\n   * @see https://developers.facebook.com/docs/javascript/reference/FB.init/v5.0\n   */\n\n\n  AmplifyFacebookButton.prototype.signInWithFacebook = function (event) {\n    event.preventDefault();\n    window['FB'].init({\n      appId: this.appId,\n      cookie: true,\n      xfbml: false,\n      version: 'v5.0'\n    });\n    this.getLoginStatus();\n  };\n\n  AmplifyFacebookButton.prototype.render = function () {\n    var _this = this;\n\n    return h(\"amplify-sign-in-button\", {\n      onClick: function onClick(event) {\n        return _this.signInWithFacebook(event);\n      },\n      provider: \"facebook\"\n    }, h(\"script\", {\n      async: true,\n      defer: true,\n      src: \"https://connect.facebook.net/en_US/sdk.js\"\n    }), I18n.get(Translations.SIGN_IN_WITH_FACEBOOK));\n  };\n\n  return AmplifyFacebookButton;\n}();\n\nvar logger$3 = new ConsoleLogger('amplify-google-button');\n\nvar AmplifyGoogleButton =\n/** @class */\nfunction () {\n  function AmplifyGoogleButton(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /** Auth state change handler for this component\n     * e.g. SignIn -> 'Create Account' link -> SignUp\n     */\n\n    this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n\n    this.handleError = function (error) {\n      console.error(error);\n    };\n    /**\n     * @see https://developers.google.com/identity/sign-in/web/build-button#building_a_button_with_a_custom_graphic\n     */\n\n\n    this.handleLoad = function () {\n      window['gapi'].load('auth2');\n    };\n\n    this.handleUser = function (user) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a, id_token, expires_at, profile, authenticatedUser;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              if (!Auth || typeof Auth.federatedSignIn !== 'function' || typeof Auth.currentAuthenticatedUser !== 'function') {\n                throw new Error(NO_AUTH_MODULE_FOUND);\n              }\n\n              try {\n                window.localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify({\n                  provider: 'google'\n                }));\n              } catch (e) {\n                logger$3.debug('Failed to cache auth source into localStorage', e);\n              }\n\n              _a = user.getAuthResponse(), id_token = _a.id_token, expires_at = _a.expires_at;\n              profile = user.getBasicProfile();\n              return [4\n              /*yield*/\n              , Auth.federatedSignIn('google', {\n                token: id_token,\n                expires_at: expires_at\n              }, {\n                email: profile.getEmail(),\n                name: profile.getName(),\n                picture: profile.getImageUrl()\n              })];\n\n            case 1:\n              _b.sent();\n\n              return [4\n              /*yield*/\n              , Auth.currentAuthenticatedUser()];\n\n            case 2:\n              authenticatedUser = _b.sent();\n\n              try {\n                this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n              } catch (error) {\n                this.handleError(error);\n              }\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n  }\n\n  AmplifyGoogleButton.prototype.getAuthInstance = function () {\n    if (window['gapi'] && window['gapi'].auth2) {\n      return window['gapi'].auth2.getAuthInstance() || window['gapi'].auth2.init({\n        client_id: this.clientId,\n        cookiepolicy: 'single_host_origin',\n        scope: 'profile email openid'\n      });\n    }\n\n    return null;\n  };\n\n  AmplifyGoogleButton.prototype.signInWithGoogle = function (event) {\n    event.preventDefault();\n    this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError);\n  };\n\n  AmplifyGoogleButton.prototype.render = function () {\n    var _this = this;\n\n    return h(\"amplify-sign-in-button\", {\n      onClick: function onClick(event) {\n        return _this.signInWithGoogle(event);\n      },\n      provider: \"google\"\n    }, h(\"script\", {\n      onLoad: this.handleLoad,\n      src: \"https://apis.google.com/js/api:client.js\"\n    }), I18n.get(Translations.SIGN_IN_WITH_GOOGLE));\n  };\n\n  return AmplifyGoogleButton;\n}();\n\nvar AmplifyOAuthButton =\n/** @class */\nfunction () {\n  function AmplifyOAuthButton(hostRef) {\n    registerInstance(this, hostRef);\n    /** Federated credentials & configuration. */\n\n    this.config = {};\n  }\n\n  AmplifyOAuthButton.prototype.signInWithOAuth = function (event) {\n    event.preventDefault();\n    Auth.federatedSignIn();\n  };\n\n  AmplifyOAuthButton.prototype.render = function () {\n    var _this = this;\n\n    return h(\"amplify-sign-in-button\", {\n      onClick: function onClick(event) {\n        return _this.signInWithOAuth(event);\n      },\n      provider: \"oauth\"\n    }, this.config.label || I18n.get(Translations.SIGN_IN_WITH_AWS));\n  };\n\n  return AmplifyOAuthButton;\n}();\n\nexport { AmplifyAmazonButton as amplify_amazon_button, AmplifyAuth0Button as amplify_auth0_button, AmplifyFacebookButton as amplify_facebook_button, AmplifyGoogleButton as amplify_google_button, AmplifyOAuthButton as amplify_oauth_button };","map":{"version":3,"sources":["C:/Users/Kaustubh Sinha/Desktop/bookkart/node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-amazon-button_5.entry.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","r","registerInstance","h","ConsoleLogger","I18n","A","AuthState","T","Translations","N","NO_AUTH_MODULE_FOUND","AUTH_SOURCE_KEY","Auth","d","dispatchAuthStateChangeEvent","logger","AmplifyAmazonButton","hostRef","_this","handleAuthStateChange","federatedSignIn","response","access_token","expires_in","currentAuthenticatedUser","Error","date","Date","expires_at","getTime","window","Login","retrieveProfile","userInfo","user","authenticatedUser","_a","success","debug","name","profile","Name","email","PrimaryEmail","token","SignedIn","prototype","signInWithAmazon","event","preventDefault","setClientId","clientId","authorize","scope","error","localStorage","setItem","JSON","stringify","provider","render","onClick","src","get","SIGN_IN_WITH_AMAZON","logger$1","AmplifyAuth0Button","handleLoad","configure","oauth","_b","config","auth0","_auth0","WebAuth","parseHash","err","authResult","payload","opts","returnTo","clientID","federated","client","accessToken","username","undefined","domain","idToken","expiresIn","signInWithAuth0","onLoad","SIGN_IN_WITH_AUTH0","logger$2","AmplifyFacebookButton","authResponse","fields","api","getLoginStatus","status","login","signInWithFacebook","init","appId","cookie","xfbml","version","async","defer","SIGN_IN_WITH_FACEBOOK","logger$3","AmplifyGoogleButton","handleError","console","load","handleUser","id_token","getAuthResponse","getBasicProfile","getEmail","getName","picture","getImageUrl","getAuthInstance","auth2","client_id","cookiepolicy","signInWithGoogle","signIn","catch","SIGN_IN_WITH_GOOGLE","AmplifyOAuthButton","signInWithOAuth","SIGN_IN_WITH_AWS","amplify_amazon_button","amplify_auth0_button","amplify_facebook_button","amplify_google_button","amplify_oauth_button"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { r as registerInstance, h } from './index-82dae9d1.js';\nimport { ConsoleLogger, I18n } from '@aws-amplify/core';\nimport { A as AuthState } from './auth-types-78df304e.js';\nimport { T as Translations } from './Translations-baba3f2c.js';\nimport { N as NO_AUTH_MODULE_FOUND, h as AUTH_SOURCE_KEY } from './constants-3e1b5fcc.js';\nimport { Auth } from '@aws-amplify/auth';\nimport { d as dispatchAuthStateChangeEvent } from './helpers-9dae6f2a.js';\nvar logger = new ConsoleLogger('amplify-amazon-button');\nvar AmplifyAmazonButton = /** @class */ (function () {\n    function AmplifyAmazonButton(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n        this.federatedSignIn = function (response) {\n            var access_token = response.access_token, expires_in = response.expires_in;\n            if (!access_token) {\n                return;\n            }\n            if (!Auth || typeof Auth.federatedSignIn !== 'function' || typeof Auth.currentAuthenticatedUser !== 'function') {\n                throw new Error(NO_AUTH_MODULE_FOUND);\n            }\n            var date = new Date();\n            var expires_at = expires_in * 1000 + date.getTime();\n            window['amazon'].Login.retrieveProfile(function (userInfo) { return __awaiter(_this, void 0, void 0, function () {\n                var user, authenticatedUser;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!userInfo.success) {\n                                return [2 /*return*/, logger.debug('Get user Info failed')];\n                            }\n                            user = {\n                                name: userInfo.profile.Name,\n                                email: userInfo.profile.PrimaryEmail,\n                            };\n                            return [4 /*yield*/, Auth.federatedSignIn('amazon', { token: access_token, expires_at: expires_at }, user)];\n                        case 1:\n                            _a.sent();\n                            return [4 /*yield*/, Auth.currentAuthenticatedUser()];\n                        case 2:\n                            authenticatedUser = _a.sent();\n                            this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        };\n    }\n    /**\n     * @see https://developer.amazon.com/docs/login-with-amazon/install-sdk-javascript.html\n     */\n    AmplifyAmazonButton.prototype.signInWithAmazon = function (event) {\n        var _this = this;\n        event.preventDefault();\n        window['amazon'].Login.setClientId(this.clientId);\n        window['amazon'].Login.authorize({ scope: 'profile' }, function (response) {\n            if (response.error) {\n                return logger.debug('Failed to login with amazon: ' + response.error);\n            }\n            try {\n                window.localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify({ provider: 'amazon' }));\n            }\n            catch (e) {\n                logger.debug('Failed to cache auth source into localStorage', e);\n            }\n            _this.federatedSignIn(response);\n        });\n    };\n    AmplifyAmazonButton.prototype.render = function () {\n        var _this = this;\n        return (h(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithAmazon(event); }, provider: \"amazon\" }, h(\"script\", { src: \"https://assets.loginwithamazon.com/sdk/na/login1.js\" }), I18n.get(Translations.SIGN_IN_WITH_AMAZON)));\n    };\n    return AmplifyAmazonButton;\n}());\nvar logger$1 = new ConsoleLogger('amplify-auth0-button');\nvar AmplifyAuth0Button = /** @class */ (function () {\n    function AmplifyAuth0Button(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /** Auth state change handler for this component */\n        this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n        this.handleLoad = function () {\n            // @ts-ignore Property 'auth0' does not exist on type '{}'.\n            var _a = Auth.configure({}).oauth, oauth = _a === void 0 ? {} : _a;\n            // @ts-ignore Property 'auth0' does not exist on type '{}'.\n            var _b = _this.config, config = _b === void 0 ? oauth.auth0 : _b;\n            if (!config) {\n                logger$1.debug('Auth0 is not configured');\n                return;\n            }\n            logger$1.debug('auth0 configuration', config);\n            if (!_this._auth0) {\n                _this._auth0 = new window['auth0'].WebAuth(config);\n            }\n            _this._auth0.parseHash(function (err, authResult) {\n                if (err) {\n                    logger$1.debug('Failed to parse the url for Auth0', err);\n                    return;\n                }\n                if (!authResult) {\n                    logger$1.debug('Auth0 found no authResult in hash');\n                    return;\n                }\n                var payload = {\n                    provider: 'auth0',\n                    opts: {\n                        returnTo: config.returnTo,\n                        clientID: config.clientID,\n                        federated: config.federated,\n                    },\n                };\n                try {\n                    localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify(payload));\n                }\n                catch (e) {\n                    logger$1.debug('Failed to cache auth source into localStorage', e);\n                }\n                _this._auth0.client.userInfo(authResult.accessToken, function (err, user) { return __awaiter(_this, void 0, void 0, function () {\n                    var username, email, authenticatedUser;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                username = undefined;\n                                email = undefined;\n                                if (err) {\n                                    logger$1.debug('Failed to get the user info', err);\n                                }\n                                else {\n                                    username = user.name;\n                                    email = user.email;\n                                }\n                                return [4 /*yield*/, Auth.federatedSignIn(config.domain, {\n                                        token: authResult.idToken,\n                                        expires_at: authResult.expiresIn * 1000 + new Date().getTime(),\n                                    }, { name: username, email: email })];\n                            case 1:\n                                _a.sent();\n                                return [4 /*yield*/, Auth.currentAuthenticatedUser()];\n                            case 2:\n                                authenticatedUser = _a.sent();\n                                this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                                return [2 /*return*/];\n                        }\n                    });\n                }); });\n            });\n        };\n    }\n    AmplifyAuth0Button.prototype.signInWithAuth0 = function (event) {\n        event.preventDefault();\n        if (!this._auth0) {\n            throw new Error('the auth0 client is not configured');\n        }\n        this._auth0.authorize();\n    };\n    AmplifyAuth0Button.prototype.render = function () {\n        var _this = this;\n        return (h(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithAuth0(event); }, provider: \"auth0\" }, h(\"script\", { onLoad: this.handleLoad, src: \"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js\" }), I18n.get(Translations.SIGN_IN_WITH_AUTH0)));\n    };\n    return AmplifyAuth0Button;\n}());\nvar logger$2 = new ConsoleLogger('amplify-facebook-button');\nvar AmplifyFacebookButton = /** @class */ (function () {\n    function AmplifyFacebookButton(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n        this.federatedSignIn = function (authResponse) {\n            var accessToken = authResponse.accessToken, expiresIn = authResponse.expiresIn;\n            if (!accessToken) {\n                return;\n            }\n            if (!Auth || typeof Auth.federatedSignIn !== 'function' || typeof Auth.currentAuthenticatedUser !== 'function') {\n                throw new Error(NO_AUTH_MODULE_FOUND);\n            }\n            var date = new Date();\n            var expires_at = expiresIn * 1000 + date.getTime();\n            var fields = 'name,email';\n            window['FB'].api('/me', { fields: fields }, function (response) { return __awaiter(_this, void 0, void 0, function () {\n                var user, authenticatedUser;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            user = {\n                                name: response.name,\n                                email: response.email,\n                            };\n                            return [4 /*yield*/, Auth.federatedSignIn('facebook', { token: accessToken, expires_at: expires_at }, user)];\n                        case 1:\n                            _a.sent();\n                            return [4 /*yield*/, Auth.currentAuthenticatedUser()];\n                        case 2:\n                            authenticatedUser = _a.sent();\n                            this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        };\n        this.getLoginStatus = function () {\n            window['FB'].getLoginStatus(function (response) {\n                try {\n                    window.localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify({ provider: 'facebook' }));\n                }\n                catch (e) {\n                    logger$2.debug('Failed to cache auth source into localStorage', e);\n                }\n                if (response.status === 'connected') {\n                    return _this.federatedSignIn(response.authResponse);\n                }\n                _this.login();\n            });\n        };\n        this.login = function () {\n            var scope = 'public_profile,email';\n            window['FB'].login(function (response) {\n                if (response && response.authResponse) {\n                    _this.federatedSignIn(response.authResponse);\n                }\n            }, { scope: scope });\n        };\n    }\n    /**\n     * @see https://developers.facebook.com/docs/javascript/reference/FB.init/v5.0\n     */\n    AmplifyFacebookButton.prototype.signInWithFacebook = function (event) {\n        event.preventDefault();\n        window['FB'].init({\n            appId: this.appId,\n            cookie: true,\n            xfbml: false,\n            version: 'v5.0',\n        });\n        this.getLoginStatus();\n    };\n    AmplifyFacebookButton.prototype.render = function () {\n        var _this = this;\n        return (h(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithFacebook(event); }, provider: \"facebook\" }, h(\"script\", { async: true, defer: true, src: \"https://connect.facebook.net/en_US/sdk.js\" }), I18n.get(Translations.SIGN_IN_WITH_FACEBOOK)));\n    };\n    return AmplifyFacebookButton;\n}());\nvar logger$3 = new ConsoleLogger('amplify-google-button');\nvar AmplifyGoogleButton = /** @class */ (function () {\n    function AmplifyGoogleButton(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = dispatchAuthStateChangeEvent;\n        this.handleError = function (error) {\n            console.error(error);\n        };\n        /**\n         * @see https://developers.google.com/identity/sign-in/web/build-button#building_a_button_with_a_custom_graphic\n         */\n        this.handleLoad = function () {\n            window['gapi'].load('auth2');\n        };\n        this.handleUser = function (user) { return __awaiter(_this, void 0, void 0, function () {\n            var _a, id_token, expires_at, profile, authenticatedUser;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!Auth || typeof Auth.federatedSignIn !== 'function' || typeof Auth.currentAuthenticatedUser !== 'function') {\n                            throw new Error(NO_AUTH_MODULE_FOUND);\n                        }\n                        try {\n                            window.localStorage.setItem(AUTH_SOURCE_KEY, JSON.stringify({ provider: 'google' }));\n                        }\n                        catch (e) {\n                            logger$3.debug('Failed to cache auth source into localStorage', e);\n                        }\n                        _a = user.getAuthResponse(), id_token = _a.id_token, expires_at = _a.expires_at;\n                        profile = user.getBasicProfile();\n                        return [4 /*yield*/, Auth.federatedSignIn('google', { token: id_token, expires_at: expires_at }, {\n                                email: profile.getEmail(),\n                                name: profile.getName(),\n                                picture: profile.getImageUrl(),\n                            })];\n                    case 1:\n                        _b.sent();\n                        return [4 /*yield*/, Auth.currentAuthenticatedUser()];\n                    case 2:\n                        authenticatedUser = _b.sent();\n                        try {\n                            this.handleAuthStateChange(AuthState.SignedIn, authenticatedUser);\n                        }\n                        catch (error) {\n                            this.handleError(error);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n    }\n    AmplifyGoogleButton.prototype.getAuthInstance = function () {\n        if (window['gapi'] && window['gapi'].auth2) {\n            return (window['gapi'].auth2.getAuthInstance() ||\n                window['gapi'].auth2.init({\n                    client_id: this.clientId,\n                    cookiepolicy: 'single_host_origin',\n                    scope: 'profile email openid',\n                }));\n        }\n        return null;\n    };\n    AmplifyGoogleButton.prototype.signInWithGoogle = function (event) {\n        event.preventDefault();\n        this.getAuthInstance()\n            .signIn()\n            .then(this.handleUser)\n            .catch(this.handleError);\n    };\n    AmplifyGoogleButton.prototype.render = function () {\n        var _this = this;\n        return (h(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithGoogle(event); }, provider: \"google\" }, h(\"script\", { onLoad: this.handleLoad, src: \"https://apis.google.com/js/api:client.js\" }), I18n.get(Translations.SIGN_IN_WITH_GOOGLE)));\n    };\n    return AmplifyGoogleButton;\n}());\nvar AmplifyOAuthButton = /** @class */ (function () {\n    function AmplifyOAuthButton(hostRef) {\n        registerInstance(this, hostRef);\n        /** Federated credentials & configuration. */\n        this.config = {};\n    }\n    AmplifyOAuthButton.prototype.signInWithOAuth = function (event) {\n        event.preventDefault();\n        Auth.federatedSignIn();\n    };\n    AmplifyOAuthButton.prototype.render = function () {\n        var _this = this;\n        return (h(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithOAuth(event); }, provider: \"oauth\" }, this.config.label || I18n.get(Translations.SIGN_IN_WITH_AWS)));\n    };\n    return AmplifyOAuthButton;\n}());\nexport { AmplifyAmazonButton as amplify_amazon_button, AmplifyAuth0Button as amplify_auth0_button, AmplifyFacebookButton as amplify_facebook_button, AmplifyGoogleButton as amplify_google_button, AmplifyOAuthButton as amplify_oauth_button };\n"]},"metadata":{},"sourceType":"module"}